(this.webpackJsonpcard_maker=this.webpackJsonpcard_maker||[]).push([[0],[,,,,,,,,function(e,t,n){e.exports={select:"SelectFontFamily_select__1Hv9D",fantazyor:"SelectFontFamily_fantazyor__1YuH3",piroucyrillic:"SelectFontFamily_piroucyrillic__2APyX",phenomena:"SelectFontFamily_phenomena__3L0pA",sunday:"SelectFontFamily_sunday__3-2n9",kurale:"SelectFontFamily_kurale__-1mws",sensei:"SelectFontFamily_sensei__1zzQ5",borsok:"SelectFontFamily_borsok__2Wuhd",summer:"SelectFontFamily_summer__1jEjL",underdog:"SelectFontFamily_underdog__2MpfH",montserrat:"SelectFontFamily_montserrat__3seoV",openSans:"SelectFontFamily_openSans__tiuJF",comfortaa:"SelectFontFamily_comfortaa__3IxgG",rubik:"SelectFontFamily_rubik__3nd8M",marta:"SelectFontFamily_marta__1T-z5"}},,,,function(e,t,n){e.exports={modal:"Modal_modal__3Ldwj",appear:"Modal_appear__1oVsi",modalDialog:"Modal_modalDialog__3Du5z",animatetop:"Modal_animatetop__2MHhu","slide-in":"Modal_slide-in__1_LpD",modalHeader:"Modal_modalHeader__1ppBy",modalFooter:"Modal_modalFooter__lSAfT",modalClose:"Modal_modalClose__3GnIC",modalBody:"Modal_modalBody__12nPW",modalContent:"Modal_modalContent__35CCy",modalTitle:"Modal_modalTitle__bNkET"}},function(e,t,n){e.exports={toolbar:"ToolbarBackground_toolbar__MQ_48",toolbar__label:"ToolbarBackground_toolbar__label__1I8R8",toolbar__col1:"ToolbarBackground_toolbar__col1__3BwVD",toolbar__col2:"ToolbarBackground_toolbar__col2__12hzd",toolbar__row:"ToolbarBackground_toolbar__row__3lf-3",button_container:"ToolbarBackground_button_container__1ir_S",colorPickerBox:"ToolbarBackground_colorPickerBox__2npIL"}},function(e,t,n){e.exports={block:"Img_block__r3fmB",img:"Img_img__3Hans",selected:"Img_selected__vEyvs",pointBottomRight:"Img_pointBottomRight__1Z-pj",pointTopLeft:"Img_pointTopLeft__3ZXB8",pointTopRight:"Img_pointTopRight__2cXMJ",pointBottomLeft:"Img_pointBottomLeft__x6rWq"}},function(e,t,n){e.exports={block:"ArtObj_block__1DyCD",img:"ArtObj_img__3ltZN",selected:"ArtObj_selected__1oJ2Z",pointBottomRight:"ArtObj_pointBottomRight__3og1x",pointTopLeft:"ArtObj_pointTopLeft__2iQK4",pointTopRight:"ArtObj_pointTopRight__19xjD",pointBottomLeft:"ArtObj_pointBottomLeft__1BMY1"}},function(e,t,n){e.exports={toolbar:"ToolbarCanvas_toolbar__2lemH",toolbar__button:"ToolbarCanvas_toolbar__button__2LRIf",toolbar__label:"ToolbarCanvas_toolbar__label__1lbBA",toolbar__button_text:"ToolbarCanvas_toolbar__button_text__Fo0b_",input_number:"ToolbarCanvas_input_number__kQeBA",toolbar__row:"ToolbarCanvas_toolbar__row__fR0UK",input_range:"ToolbarCanvas_input_range__2BdY0"}},,function(e,t,n){e.exports={toolbar:"ToolbarText_toolbar__L36Xy",toolbar__row:"ToolbarText_toolbar__row__1n6YO",toolbar__label:"ToolbarText_toolbar__label__XASo7",button:"ToolbarText_button__34F-S"}},function(e,t,n){e.exports={toolbar:"ToolbarObject_toolbar__1wNU-",toolbar__label:"ToolbarObject_toolbar__label__GzSLz",toolbar__col:"ToolbarObject_toolbar__col__33gVZ",toolbar__row:"ToolbarObject_toolbar__row__3n9uD",input__color:"ToolbarObject_input__color__3PxWa",button_container:"ToolbarObject_button_container__2CKtQ"}},,,function(e,t,n){e.exports={button:"NavFileButton_button__31bRb",button__text:"NavFileButton_button__text__2WzyS",inputFile:"NavFileButton_inputFile__3SOw7",icon:"NavFileButton_icon__1R6pk"}},function(e,t,n){e.exports={dropbtn:"DropdownMenu_dropbtn__2-JiC",dropdown:"DropdownMenu_dropdown__2_ubm",dropdown_content:"DropdownMenu_dropdown_content__iSef_",dropdown_text:"DropdownMenu_dropdown_text__2gbo8"}},function(e,t,n){e.exports={button:"AddImgButtonFile_button__2N8CC",button__text:"AddImgButtonFile_button__text__34fFe",inputFile:"AddImgButtonFile_inputFile__4uOdL",icon:"AddImgButtonFile_icon__3xQsK"}},function(e,t,n){e.exports={toolbar:"ToolbarFilter_toolbar__CEBoi",toolbar__label:"ToolbarFilter_toolbar__label__3pgyB",input_color:"ToolbarFilter_input_color__1hKXO",input_range:"ToolbarFilter_input_range__2mQc9",colorPickerBox:"ToolbarFilter_colorPickerBox__3-g1H"}},function(e,t,n){e.exports={button:"FileImgButton_button__2-G8o",button__text:"FileImgButton_button__text__ilBCY",inputFile:"FileImgButton_inputFile__nu7Na"}},,function(e,t,n){e.exports={toolbar:"ToolbarImg_toolbar__1U8h2",button_box:"ToolbarImg_button_box__1ADxG",toolbar__label:"ToolbarImg_toolbar__label__3zwm8"}},,,,function(e,t,n){e.exports={header:"Header_header__1rLmw",panel:"Header_panel__29H5m"}},function(e,t,n){e.exports={button:"NavButton_button__UL2Cr",button__text:"NavButton_button__text__C4Sqv"}},function(e,t,n){e.exports={button:"ButtonEditText_button__JsKq3",active:"ButtonEditText_active__1z4H3"}},function(e,t,n){e.exports={button:"AddImgButton_button__2zBC1"}},function(e,t,n){e.exports={button:"Button_button__3s58t",button_text:"Button_button_text__2xGDG"}},function(e,t,n){e.exports={toolbar:"ToolbarArea_toolbar__17QU7",toolbar__label:"ToolbarArea_toolbar__label__25frT"}},function(e,t,n){e.exports={block:"Text_block__Fvt_5",selected:"Text_selected__2uNOO"}},,function(e,t,n){e.exports={main:"CardMaker_main__qNuoq"}},,function(e,t,n){e.exports={navbar:"Navbar_navbar__2UjT7",input:"Navbar_input__1lW6o"}},,,function(e,t,n){e.exports={toolbar:"Toolbar_toolbar__hCIIv"}},function(e,t,n){e.exports={input:"ColorPicker_input__Kiwid"}},function(e,t,n){e.exports={input__number:"InputNumber_input__number__2kkQW"}},function(e,t,n){e.exports={sticker:"PreviewArtObj_sticker__twuA7"}},function(e,t,n){e.exports={input__color:"ColorPicker_input__color__3EGb4"}},function(e,t,n){e.exports={canvas:"Canvas_canvas__Ak89z"}},function(e,t,n){e.exports={filter:"Filter_filter__16erS"}},function(e,t,n){e.exports={deleteArea:"DeleteArea_deleteArea__2KQym"}},function(e,t,n){e.exports={areaSelection:"AreaSelection_areaSelection__1Syux"}},function(e,t,n){},,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);n(54);var r=n(1),c=n.n(r),o=n(27),a=n.n(o),i=n(40),l=n.n(i),u=n(2),s=n(32),d=n.n(s),b=n(42),f=n.n(b),_=n(4),v=n(33),j=n.n(v),p=n(6),m=n(0),O=Object(r.forwardRef)((function(e,t){return Object(m.jsxs)("button",{onClick:e.onClick?e.onClick:function(){},className:j.a.button,ref:t,children:[Object(m.jsx)(p.a,{icon:e.icon}),""!==e.label&&Object(m.jsx)("span",{className:j.a.button__text,children:e.label})]})})),x=Object(u.b)(null,null,null,{forwardRef:!0})(O),h=n(22),E=n.n(h),g=Object(r.forwardRef)((function(e,t){return Object(m.jsxs)("button",{className:E.a.button,children:[Object(m.jsx)("label",{htmlFor:"input-file",className:E.a.icon,children:Object(m.jsx)(p.a,{icon:e.icon})}),Object(m.jsx)("input",{className:E.a.inputFile,type:"file",ref:t,id:"input-file"}),""!==e.label&&Object(m.jsx)("label",{className:E.a.button__text,htmlFor:"input-file",children:e.label})]})})),y=Object(u.b)(null,null,null,{forwardRef:!0})(g),T=n(7),S=n.n(T),L=n(9);function w(e){return k.apply(this,arguments)}function k(){return(k=Object(L.a)(S.a.mark((function e(t){var n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Promise((function(e,n){var r=new FileReader;r.readAsDataURL(t),r.onload=function(){return e(r.result)},r.onerror=n})),r=new Image,e.next=4,n;case 4:return r.src=e.sent,e.next=7,r.decode();case 7:return e.abrupt("return",{width:r.width,height:r.height,src:r.src});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(e){return B.apply(this,arguments)}function B(){return(B=Object(L.a)(S.a.mark((function e(t){var n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Promise((function(e,n){var r=new FileReader;r.readAsText(t),r.onload=function(){return e(r.result)},r.onerror=n})),e.next=3,n;case 3:return r=e.sent,e.next=6,JSON.parse(r);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var C=n(3);function R(e,t,n){var r=[];return e.forEach((function(e){e.id===t?r.push(Object(C.a)(Object(C.a)({},e),n)):r.push(e)})),r}function I(e,t){var n=-1;return e.forEach((function(e,r){e.id===t&&(n=r)})),n}function A(e){if(!e)throw new Error("Assertion failed");return e}var F=n(39),D=n(11);var M=function(e,t){switch(t.type){case"NEW_CARD_MAKER":case"RESET_BACKGROUND":return{color:"#ffffff",src:null};case"SET_BACKGROUND_COLOR":return{color:t.color,src:null};case"SET_BACKGROUND_IMG":return{color:null,src:t.src};default:return e}};var z=function(e,t){switch(t.type){case"NEW_CARD_MAKER":return{color:"#ffffff",opacity:0};case"SET_FILTER":return{color:t.color,opacity:t.opacity};default:return e}};var K,P=function(e,t){switch(t.type){case"NEW_CARD_MAKER":return 600;case"SET_CANVAS_SIZE":return t.height;default:return e}};!function(e){e[e.img=0]="img",e[e.artObj=1]="artObj",e[e.text=2]="text"}(K||(K={}));var U;function X(){return[H(2),H(1),H(1),H(1),H(3)].join("-")}function H(e){for(var t="",n=0;n<e;n++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t}!function(e){e.boy="./img/artObj/boy.png",e.frog="./img/artObj/frog.png",e.girl="./img/artObj/girl.png",e.loupe="./img/artObj/loupe.png",e.palette="./img/artObj/palette.png",e.pencil="./img/artObj/pencil.png",e.rainbow="./img/artObj/rainbow.png",e.snail="./img/artObj/snail.png"}(U||(U={}));var G=function(e,t){switch(t.type){case"NEW_CARD_MAKER":return[];case"CREATE_TEXT_BLOCK":return[].concat(Object(D.a)(e),[{id:X(),type:K.text,color:"#898989",x:t.x-45,y:t.y-25,text:"<div>\u0422\u0435\u043a\u0441\u0442<br></div>",size:50,bold:!1,italic:!1,underline:!1,fontFamily:"OpenSans"}]);case"SET_SIZE_BLOCK":return R(e,t.id,{width:t.width,height:t.height});case"SET_TEXT_IN_TEXT_BLOCK":return R(e,t.id,{text:t.text});case"SET_FONT_FAMILY_TEXT":return R(e,t.id,{fontFamily:t.fontFamily});case"SET_BOLD_TEXT":return R(e,t.id,{bold:t.isBold});case"SET_ITALIC_TEXT":return R(e,t.id,{italic:t.isItalic});case"SET_UNDERLINE_TEXT":return R(e,t.id,{underline:t.isUnderline});case"SET_SIZE_TEXT":return R(e,t.id,{size:t.size});case"SET_COLOR_TEXT":return R(e,t.id,{color:t.color});case"CREATE_IMG_BLOCK":return[].concat(Object(D.a)(e),[{id:X(),type:K.img,width:t.width,height:t.height,x:t.x,y:t.y,src:t.src}]);case"CREATE_ART_OBJ_BLOCK":return[].concat(Object(D.a)(e),[{id:X(),type:K.artObj,width:150,height:150,x:t.x,y:t.y,src:t.src}]);case"DELETE_BLOCK":var n=Object(D.a)(e);return function(e){return Boolean(e)}(t.id)&&n.forEach((function(e,r){if(e.id===t.id)return n.splice(r,1),!1})),n;case"SET_POSITION_BLOCK":return R(e,t.id,{x:t.x,y:t.y});case"SHIFT_UP_BLOCK":var r=Object(D.a)(e);if(function(e,t){var n=t.length;return Boolean(e&&I(t,e)<n-1)}(t.id,e)){var c=I(r,t.id),o=[r[c+1],r[c]];r.splice.apply(r,[c,2].concat(o))}return r;case"SHIFT_DOWN_BLOCK":var a=Object(D.a)(e);if(function(e,t){return Boolean(e&&I(t,e)>0)}(t.id,e)){var i=I(a,t.id),l=[a[i],a[i-1]];a.splice.apply(a,[i-1,2].concat(l))}return a;default:return e}};var Y=function(e,t){switch(t.type){case"NEW_CARD_MAKER":return 800;case"SET_CANVAS_SIZE":return t.width;default:return e}};var W=function(e,t){return{width:Y(e.width,t),height:P(e.height,t),filter:z(e.filter,t),listBlock:G(e.listBlock,t),background:M(e.background,t),deleteArea:Z(e.deleteArea,t)}};function Z(e,t){switch(t.type){case"DELETE_AREA_SELECTION":return t.area?[].concat(Object(D.a)(e),[t.area]):e;case"NEW_CARD_MAKER":return[];default:return e}}var J=function(e,t){switch(t.type){case"NEW_CARD_MAKER":case"RESET_SELECTED_BLOCK":return null;case"SET_SELECTED_BLOCK":return t.id;default:return e}};var Q=function(e,t){switch(t.type){case"NEW_CARD_MAKER":return{listState:[W({},t)],currentIndex:0};case"ADD_HISTORY":var n=e.listState,r=e.currentIndex,c=Object(D.a)(e.listState);return r!==n.length-1&&c.splice(r+1,n.length-r+1),c.push(t.newCanvas),{currentIndex:r+1,listState:c};case"UNDO":var o=e.currentIndex,a=function(e){var t=e.listState.length,n=e.currentIndex;return t>1&&n>0}(e)?o-1:o;return Object(C.a)(Object(C.a)({},e),{},{currentIndex:a});case"REDO":var i=e.currentIndex,l=function(e){var t=e.listState.length;return e.currentIndex+1<t}(e)?i+1:i;return Object(C.a)(Object(C.a)({},e),{},{currentIndex:l});default:return e}};function V(e,t){switch(t.type){case"AREA_SELECTION":return{x:t.x,y:t.y,width:t.width,height:t.height};case"SET_POSITION_AREA_SELECTION":return Object(C.a)(Object(C.a)({},e.viewModel.areaSelection),{},{x:t.x,y:t.y});case"RESET_AREA_SELECTION":case"UNDO":case"REDO":return null;default:return e.viewModel.areaSelection}}function q(e,t){switch(t.type){case"INPUT_BACKGROUND_COLOR":return t.color;case"UNDO":case"REDO":return null;default:return e.canvas.background.color}}function $(e,t){return"INPUT_BACKGROUND_IMG"===t.type?{width:t.width,height:t.height,src:t.src}:null}function ee(e,t){switch(t.type){case"INPUT_CANVAS_SIZE":return{width:t.width,height:t.height};case"UNDO":case"REDO":return null;default:return e.viewModel.canvasSize}}function te(e,t){switch(t.type){case"INPUT_FILTER":return{color:t.color,opacity:t.opacity};case"UNDO":case"REDO":return null;default:return e.viewModel.filter}}function ne(e,t){var n,r={color:null,size:null,bold:null,italic:null,underline:null,fontFamily:null,tempColor:null,tempSize:null};switch(t.type){case"CLICK_ON_TEXT":var c=(n=e.canvas.listBlock)[I(n,t.id)];return{color:c.color,tempColor:null,tempSize:null,size:c.size,bold:c.bold,italic:c.italic,underline:c.underline,fontFamily:c.fontFamily};case"SET_FONT_FAMILY_TEXT":return Object(C.a)(Object(C.a)({},e.viewModel.text),{},{fontFamily:t.fontFamily});case"INPUT_COLOR_TEXT":return Object(C.a)(Object(C.a)({},e.viewModel.text),{},{tempColor:t.color});case"INPUT_SIZE_TEXT":return Object(C.a)(Object(C.a)({},e.viewModel.text),{},{tempSize:t.size});case"SET_BOLD_TEXT":return Object(C.a)(Object(C.a)({},e.viewModel.text),{},{bold:t.isBold});case"SET_ITALIC_TEXT":return Object(C.a)(Object(C.a)({},e.viewModel.text),{},{italic:t.isItalic});case"SET_UNDERLINE_TEXT":return Object(C.a)(Object(C.a)({},e.viewModel.text),{},{underline:t.isUnderline});case"SET_SELECTED_BLOCK":case"RESET_SELECTED_BLOCK":case"UNDO":case"REDO":return r;default:return e.viewModel.text}}var re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{bgColor:q(e,t),bgImg:$(e,t),canvasSize:ee(e,t),filter:te(e,t),text:ne(e,t),areaSelection:V(e,t)}};var ce={id:"d3df27cd-3053-21a6-4abe-9db51cda7c17",type:K.artObj,width:150,height:150,x:20,y:280,src:"img/artObj/girl.png"},oe={width:800,height:800,filter:{color:"#c1e319",opacity:.05},listBlock:[{id:"4f406201-6f2f-b9ce-575e-438b1a7d1456",type:K.img,width:320,height:238,x:100,y:270,src:"https://images.pexels.com/photos/3337209/pexels-photo-3337209.jpeg?cs=srgb&dl=pexels-mo-3337209.jpg&fm=jpg"},ce,{id:"9a13a85a-59ee-7ba3-1c64-fcad25650fc1",type:K.text,x:200,y:280,text:"<div>\u042d\u0442\u043e</div><div>\u0437\u0430\u043a\u0430\u0442!!!</div>",size:40,bold:!0,italic:!0,underline:!0,color:"#ffffff",fontFamily:"Sensei"}],deleteArea:[{width:100,height:50,x:150,y:200},{width:70,height:50,x:350,y:175}],background:{color:null,src:"https://images.pexels.com/photos/8175462/pexels-photo-8175462.jpeg?auto=compress&cs=tinysrgb&h=650&w=940"}},ae={canvas:oe,selectBlock:null,history:{listState:[oe],currentIndex:0},viewModel:{bgColor:null,bgImg:null,canvasSize:null,filter:null,text:{color:null,size:null,bold:null,italic:null,underline:null,fontFamily:null,tempColor:null,tempSize:null},areaSelection:null}},ie=["NEW_CARD_MAKER","ADD_HISTORY","AFTER_CHANGE_HISTORY","UNDO","REDO","SET_SELECTED_BLOCK","RESET_SELECTED_BLOCK","INPUT_SIZE_TEXT","INPUT_COLOR_TEXT","SET_SIZE_TEXT","SET_POSITION_AREA_SELECTION","RESET_AREA_SELECTION","AREA_SELECTION","INPUT_FILTER","INPUT_CANVAS_SIZE","INPUT_BACKGROUND_IMG","INPUT_BACKGROUND_COLOR"],le=["UNDO","REDO"],ue=Object(F.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AFTER_CHANGE_HISTORY":return t.cardMaker;case"APPLY_FILE_PROJECT":return t.project;default:return{canvas:W(e.canvas,t),selectBlock:J(e.selectBlock,t),history:Q(e.history,t),viewModel:re(e,t)}}}),ae,Object(F.a)((function(e){return function(t){return function(n){var r=e.getState(),c=t(n),o=e.getState();return ie.includes(n.type)||JSON.stringify(r.canvas)!==JSON.stringify(o.canvas)&&(console.log("\u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0438\u0441\u0442\u043e\u0440\u0438\u0438"),e.dispatch({type:"ADD_HISTORY",newCanvas:o.canvas})),c}}}),(function(e){return function(t){return function(n){var r=t(n);if(le.includes(n.type)&&"AFTER_CHANGE_HISTORY"!==n.type){var c=e.getState().history.listState[e.getState().history.currentIndex],o=Object(C.a)(Object(C.a)({},e.getState()),{},{canvas:c});e.dispatch({type:"AFTER_CHANGE_HISTORY",cardMaker:o})}return r}}})));var se=n(10),de=n(43),be=n(12),fe=n.n(be),_e=Object(u.b)()((function(e){var t=e.visible,n=void 0!==t&&t,c=e.title,o=void 0===c?"":c,a=e.content,i=void 0===a?"":a,l=e.footer,u=void 0===l?"":l,s=e.onClose;return Object(r.useEffect)((function(){var e=function(e){if("Escape"===e.key)s()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[s]),n?Object(m.jsx)("div",{className:fe.a.modal,onClick:s,children:Object(m.jsxs)("div",{className:fe.a.modalDialog,onClick:function(e){return e.stopPropagation()},children:[Object(m.jsxs)("div",{className:fe.a.modalHeader,children:[Object(m.jsx)("h3",{className:fe.a.modalTitle,children:o}),Object(m.jsx)("span",{className:fe.a.modalClose,onClick:s,children:Object(m.jsx)(p.a,{icon:_.p})})]}),Object(m.jsx)("div",{className:fe.a.modalBody,children:Object(m.jsx)("div",{className:fe.a.modalContent,children:i})}),u&&Object(m.jsx)("div",{className:fe.a.modalFooter,children:u})]})}):null}));var ve=Object(u.b)(null,(function(e){return{newCardMaker:function(){return e({type:"NEW_CARD_MAKER"})}}}))((function(e){var t=Object(r.useState)(!1),n=Object(se.a)(t,2),c=n[0],o=n[1],a=function(){return o(!1)},i=Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("p",{children:"\u041d\u0435\u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0431\u0443\u0434\u0443\u0442 \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u044b"}),Object(m.jsx)("p",{children:"\u0412\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c ?"})]}),l=Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){e.newCardMaker(),a()},children:"\u0414\u0430"}),Object(m.jsx)("button",{onClick:a,children:"\u041d\u0435\u0442"})]});return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(x,{label:"\u041d\u043e\u0432\u0430\u044f",icon:de.a,onClick:function(){return o(!0)}}),Object(m.jsx)(_e,{visible:c,title:"\u041d\u043e\u0432\u0430\u044f \u043e\u0442\u043a\u0440\u044b\u0442\u043a\u0430",content:i,footer:l,onClose:a})]})})),je=n(44);function pe(e){return me.apply(this,arguments)}function me(){return(me=Object(L.a)(S.a.mark((function e(t){var n,r,c,o,a,i,l,u,s,d,b,f,_,v,j;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=ue.getState().canvas.listBlock,r=ue.getState().canvas.deleteArea,c=ue.getState().canvas.width,o=ue.getState().canvas.height,a=ue.getState().canvas.background,i=ue.getState().canvas.filter,(l=document.createElement("canvas")).width=c,l.height=o,u=l.getContext("2d"),!a.src){e.next=23;break}return(s=new Image).crossOrigin="anonymous",s.src=a.src,e.next=16,s.decode();case 16:d=s.width,b=s.height,s.width<c&&(b=s.height*c/s.width,d=s.width*b/s.height),s.height<o&&(d=s.width*o/s.height,b=s.height*d/s.width),u.drawImage(s,0,0,d,b),e.next=24;break;case 23:a.color&&(u.fillStyle=a.color,u.fillRect(0,0,c,o));case 24:f=0;case 25:if(!(f<n.length)){e.next=31;break}return e.next=28,Oe(n[f],u);case 28:f++,e.next=25;break;case 31:_=Ee(i.color),u.fillStyle="rgba(".concat(_.r,", ").concat(_.g,", ").concat(_.b,", ").concat(i.opacity,")"),u.fillRect(0,0,c,o),u.fillStyle="#ffffff",r.forEach((function(e){u.fillRect(e.x,e.y,e.width,e.height)})),v=l.toDataURL(t),(j=document.createElement("a")).href=v,j.download="new-image",j.click();case 41:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(e,t){return xe.apply(this,arguments)}function xe(){return(xe=Object(L.a)(S.a.mark((function e(t,n){var r,c,o,a,i,l,u,s,d,b,f,_,v;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=5,c=1.2,e.t0=t.type,e.next=e.t0===K.text?5:e.t0===K.img?12:e.t0===K.artObj?19:26;break;case 5:o=he(t),(a=document.createElement("div")).innerHTML=t.text,i=0,l=Object(je.a)(Array.from(a.children));try{for(l.s();!(u=l.n()).done;){if(s=u.value,n.fillStyle=o.color,n.font=o.italic+" "+o.weight+" "+o.size+"px "+o.family,n.fillText(s.innerText,t.x+r,t.y+i+o.size),t.underline){for(d=n.measureText(s.innerText).width,b=0,f="";s.innerText.length>b;)f+="_",b++;n.font="700 ".concat(o.size,"px openSans"),n.fillText(f,t.x+r,t.y+i+o.size,d)}i+=t.size*c}}catch(j){l.e(j)}finally{l.f()}return e.abrupt("break",26);case 12:return(_=new Image).crossOrigin="anonymous",_.src=t.src,e.next=17,_.decode();case 17:return n.drawImage(_,t.x,t.y,t.width,t.height),e.abrupt("break",26);case 19:return(v=new Image).crossOrigin="anonymous",v.src=t.src,e.next=24,v.decode();case 24:return n.drawImage(v,t.x,t.y,t.width,t.height),e.abrupt("break",26);case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e){return{x:e.x,y:e.y,color:e.color,size:e.size,weight:e.bold?"700":"",italic:e.italic?"italic":"",family:e.fontFamily}}function Ee(e){"#"===e.substring(0,1)&&(e=e.substring(1));var t={r:255,g:255,b:255};return t.r=parseInt(e.substring(0,2),16),t.g=parseInt(e.substring(2,4),16),t.b=parseInt(e.substring(4),16),t}var ge=Object(u.b)()((function(){var e=Object(r.useRef)(null),t=Object(r.useState)(!1),n=Object(se.a)(t,2),c=n[0],o=n[1],a=function(){return o(!1)},i=Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("p",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u043e\u0440\u043c\u0430\u0442 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u043c\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430"})}),l=Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){pe("image/jpeg"),a()},children:"jpg"}),Object(m.jsx)("button",{onClick:function(){pe("image/png"),a()},children:"png"}),Object(m.jsx)("button",{onClick:a,children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]});return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(x,{label:"\u0412 jpg/png",icon:_.k,onClick:function(){return o(!0)},ref:e}),Object(m.jsx)(_e,{visible:c,title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043a\u0430\u043a...",content:i,footer:l,onClose:a})]})}));var ye=Object(u.b)(null,(function(e){return{undo:function(){return e({type:"UNDO"})},redo:function(){return e({type:"REDO"})},applyFileProject:function(t){return e({type:"APPLY_FILE_PROJECT",project:t})}}}))((function(e){var t=Object(r.useRef)(null),n=Object(r.useRef)(null);!function(e,t,n,c){Object(r.useEffect)((function(){var r=e.current,o=t.current;function a(){n()}function i(){c()}function l(e){"KeyZ"===e.code&&(e.ctrlKey||e.metaKey)&&n(),"KeyY"===e.code&&(e.ctrlKey||e.metaKey)&&c()}return A(r).addEventListener("click",a),A(o).addEventListener("click",i),document.addEventListener("keydown",l),function(){r&&r.removeEventListener("click",a),o&&o.removeEventListener("click",i),document.removeEventListener("keydown",l)}}),[e,t,n,c])}(t,n,e.undo,e.redo);var c,o=Object(r.useRef)(null),a=Object(r.useRef)(null);return function(e,t){Object(r.useEffect)((function(){var n=e.current;function r(e){return c.apply(this,arguments)}function c(){return(c=Object(L.a)(S.a.mark((function e(n){var r,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.target,c=r.files,e.t0=t,e.next=5,N(c[0]);case 5:e.t1=e.sent,(0,e.t0)(e.t1),r.value="";case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return A(n).addEventListener("change",r),function(){n&&n.removeEventListener("change",r)}}),[e,t])}(o,e.applyFileProject),c=a,Object(r.useEffect)((function(){var e=c.current;function t(e){var t=ue.getState(),n=JSON.stringify(Object(C.a)(Object(C.a)({},t),{},{history:{listState:[t.canvas],currentIndex:0}})),r=new Blob([n],{type:"application/json"}),c=document.createElement("a");c.href=URL.createObjectURL(r),c.download="\u041d\u043e\u0432\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442.json",c.click()}return A(e).addEventListener("click",t),function(){e&&e.removeEventListener("click",t)}}),[c]),Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)("nav",{className:f.a.navbar,children:[Object(m.jsx)(y,{label:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c",icon:_.h,ref:o}),Object(m.jsx)(ve,{}),Object(m.jsx)(ge,{}),Object(m.jsx)(x,{label:"\u0432 json",icon:_.g,ref:a,onClick:null}),Object(m.jsx)(x,{label:"\u0428\u0430\u0431\u043b\u043e\u043d\u044b",icon:_.d,onClick:null}),Object(m.jsx)(x,{label:"",icon:_.s,ref:t,onClick:null}),Object(m.jsx)(x,{label:"",icon:_.m,ref:n,onClick:null})]})})})),Te=n(45),Se=n.n(Te),Le=n(18),we=n.n(Le);function ke(e){return{type:"SET_BOLD_TEXT",id:ue.getState().selectBlock,isBold:e}}function Ne(e){return{type:"SET_ITALIC_TEXT",id:ue.getState().selectBlock,isItalic:e}}function Be(e){return{type:"SET_UNDERLINE_TEXT",id:ue.getState().selectBlock,isUnderline:e}}var Ce=n(34),Re=n.n(Ce);var Ie=Object(u.b)()((function(e){var t=Object(r.useRef)(null);return function(e,t,n,c){Object(r.useEffect)((function(){var r=e.current;function o(e){null!==t?(n(!t),e.preventDefault()):c||n(!0)}return A(r).addEventListener("click",o),function(){r&&r.removeEventListener("click",o)}}),[e,n,t,c])}(t,e.enabled,e.modifyFn,e.param),Object(m.jsx)("button",{className:Re.a.button+" "+(e.enabled?Re.a.active:""),ref:t,children:Object(m.jsx)(p.a,{icon:e.icon})})})),Ae=n(46),Fe=n.n(Ae);var De=Object(u.b)((function(e){return{color:e.viewModel.text.color}}),(function(e){return{setColorText:function(t){return e(function(e){return{type:"SET_COLOR_TEXT",id:ue.getState().selectBlock,color:e}}(t))},inputColorText:function(t){return e(function(e){return{type:"INPUT_COLOR_TEXT",color:e}}(t))}}}))((function(e){var t=Object(r.useRef)(null);return function(e,t,n,c){Object(r.useEffect)((function(){var r=t.current;function o(e){var t=e.target;c(t.value)}function a(e){var t=e.target;n(t.value)}function i(e){e.stopImmediatePropagation()}return A(r).value=e||"#000000",A(r).addEventListener("input",o),A(r).addEventListener("change",a),A(r).addEventListener("click",i),function(){r&&(r.removeEventListener("input",o),r.removeEventListener("change",a),r.removeEventListener("click",i))}}),[e,t,n,c])}(e.color,t,e.setColorText,e.inputColorText),Object(m.jsx)("input",{type:"color",ref:t,className:Fe.a.input})})),Me=n(47),ze=n.n(Me);var Ke=Object(u.b)((function(e){return{size:e.viewModel.text.size,tempSize:e.viewModel.text.tempSize}}),(function(e){return{setSizeText:function(t){return e(function(e){return{type:"SET_SIZE_TEXT",id:ue.getState().selectBlock,size:e}}(t))},inputSizeText:function(t){return e(function(e){return{type:"INPUT_SIZE_TEXT",size:e}}(t))}}}))((function(e){var t,n,c,o,a=Object(r.useRef)(null);return t=e.size,n=a,c=e.setSizeText,o=e.inputSizeText,Object(r.useEffect)((function(){var e=n.current;function r(e){var t=e.target;o(Number(t.value))}function a(e){var t=e.target;c(Number(t.value))}function i(e){e.stopImmediatePropagation()}return A(e).value=t?String(t):"10",A(e).addEventListener("input",r),A(e).addEventListener("blur",a),A(e).addEventListener("click",i),function(){e&&(e.removeEventListener("input",r),e.removeEventListener("blur",a),e.removeEventListener("click",i))}}),[t,n,c,o]),Object(m.jsx)("input",{type:"number",ref:a,className:ze.a.input__number,min:10,max:150,step:1})})),Pe=n(8),Ue=n.n(Pe);var Xe=Object(u.b)((function(e){var t,n=null;return(null===(t=e.viewModel.text)||void 0===t?void 0:t.fontFamily)&&(n=e.viewModel.text.fontFamily),{fontFamily:n}}),(function(e){return{setFontFamilyText:function(t){return e(function(e){return{type:"SET_FONT_FAMILY_TEXT",id:ue.getState().selectBlock,fontFamily:e}}(t))}}}))((function(e){var t=Object(r.useRef)(null);!function(e,t){Object(r.useEffect)((function(){var n=e.current;function r(e){e.stopImmediatePropagation()}function c(e){var n=e.target;t(n.value)}return A(n).addEventListener("click",r),A(n).addEventListener("change",c),function(){n&&(n.removeEventListener("click",r),n.removeEventListener("change",c))}}),[e,t])}(t,e.setFontFamilyText);var n=[{value:"Fantazyor",class:Ue.a.fantazyor},{value:"Piroucyrillic",class:Ue.a.piroucyrillic},{value:"Phenomena",class:Ue.a.phenomena},{value:"Sunday",class:Ue.a.sunday},{value:"Kurale",class:Ue.a.kurale},{value:"Sensei",class:Ue.a.sensei},{value:"Borsok",class:Ue.a.borsok},{value:"Summer",class:Ue.a.summer},{value:"Underdog",class:Ue.a.underdog},{value:"Montserrat",class:Ue.a.montserrat},{value:"OpenSans",class:Ue.a.openSans},{value:"Comfortaa",class:Ue.a.comfortaa},{value:"Rubik",class:Ue.a.rubik},{value:"Marta",class:Ue.a.marta}].map((function(e,t){return Object(m.jsx)("option",{className:e.class,value:e.value,children:e.value},t)})),c=n[0].props.className;return n=n.map((function(t){return t.props.value===e.fontFamily?(c=t.props.className,Object(C.a)(Object(C.a)({},t),{},{props:Object(C.a)(Object(C.a)({},t.props),{},{selected:!0})})):t})),Object(m.jsx)("select",{name:"",id:"",className:Ue.a.select+" "+c,ref:t,children:n})}));var He=Object(u.b)((function(e){return{bold:e.viewModel.text.bold,italic:e.viewModel.text.italic,underline:e.viewModel.text.underline}}),(function(e){return{createTextBlock:function(){return e({type:"CREATE_TEXT_BLOCK",x:ue.getState().canvas.width/2,y:ue.getState().canvas.height/2})},setBoldText:function(t){return e(ke(t))},setItalicText:function(t){return e(Ne(t))},setUnderlineText:function(t){return e(Be(t))}}}))((function(e){return Object(m.jsxs)("div",{className:we.a.toolbar,children:[Object(m.jsxs)("div",{className:we.a.toolbar__row,children:[Object(m.jsx)(Xe,{}),Object(m.jsx)(Ie,{icon:_.i,enabled:null,modifyFn:e.createTextBlock,param:!1})]}),Object(m.jsxs)("div",{className:we.a.toolbar__row,children:[Object(m.jsx)(Ke,{}),Object(m.jsx)(Ie,{icon:_.c,enabled:e.bold,modifyFn:e.setBoldText,param:!0}),Object(m.jsx)(Ie,{icon:_.l,enabled:e.italic,modifyFn:e.setItalicText,param:!0}),Object(m.jsx)(Ie,{icon:_.r,enabled:e.underline,modifyFn:e.setUnderlineText,param:!0}),Object(m.jsx)("div",{className:we.a.colorPickerBox,children:Object(m.jsx)(De,{})})]}),Object(m.jsx)("label",{className:we.a.toolbar__label,children:"\u0422\u0435\u043a\u0441\u0442"})]})})),Ge=n(28),Ye=n.n(Ge),We=n(23),Ze=n.n(We);var Je=Object(u.b)()((function(e){return Object(m.jsxs)("div",{className:Ze.a.dropdown,children:[Object(m.jsxs)("button",{className:Ze.a.dropbtn,children:[Object(m.jsx)(p.a,{icon:e.icon,size:e.sizeIcon}),""!==e.label&&Object(m.jsx)("span",{className:Ze.a.dropdown_text,children:e.label})]}),Object(m.jsx)("div",{className:Ze.a.dropdown_content,style:{minWidth:e.minWidth},children:e.children})]})})),Qe=n(35),Ve=n.n(Qe),qe=Object(r.forwardRef)((function(e,t){return Object(m.jsxs)("button",{ref:t,className:Ve.a.button,title:e.title,children:[Object(m.jsx)(p.a,{icon:e.icon,size:"lg"}),""!==e.label&&Object(m.jsx)("span",{className:Ve.a.button__text,children:e.label})]})})),$e=Object(u.b)(null,null,null,{forwardRef:!0})(qe),et=n(24),tt=n.n(et),nt=Object(r.forwardRef)((function(e,t){return Object(m.jsxs)("button",{className:tt.a.button,children:[Object(m.jsx)("label",{htmlFor:"input-file-img",className:tt.a.icon,children:Object(m.jsx)(p.a,{icon:e.icon,size:"lg"})}),Object(m.jsx)("input",{className:tt.a.inputFile,type:"file",ref:t,id:"input-file-img"}),""!==e.label&&Object(m.jsx)("label",{className:tt.a.button__text,htmlFor:"input-file-img",children:e.label})]})})),rt=Object(u.b)(null,null,null,{forwardRef:!0})(nt),ct=n(48),ot=n.n(ct);var at=Object(u.b)(null,(function(e){return{createArtObjBlock:function(t){return e(function(e){return{type:"CREATE_ART_OBJ_BLOCK",src:e,x:ue.getState().canvas.width/2-75,y:ue.getState().canvas.height/2-75}}(t))}}}))((function(e){var t,n,c,o=Object(r.useRef)(null);return t=o,n=e.src,c=e.createArtObjBlock,Object(r.useEffect)((function(){var e=t.current;function r(){c(n)}return A(e).addEventListener("click",r),function(){e&&e.removeEventListener("click",r)}}),[t,n,c]),Object(m.jsx)("img",{src:e.src,alt:"",ref:o,className:ot.a.sticker})}));var it=Object(u.b)(null,(function(e){return{createImgBlock:function(t,n,r){return e(function(e,t,n){return{type:"CREATE_IMG_BLOCK",src:e,width:t,height:n,x:ue.getState().canvas.width/2-t/2,y:ue.getState().canvas.height/2-n/2}}(t,n,r))}}}))((function(e){var t=Object.values(U),n=[];t.forEach((function(e,t){n.push(Object(m.jsx)(at,{src:e},t))}));var c=Object(r.useRef)(null);return function(e,t){Object(r.useEffect)((function(){var n=e.current;function r(e){return c.apply(this,arguments)}function c(){return(c=Object(L.a)(S.a.mark((function e(n){var r,c,o;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.target,c=r.files,e.next=4,w(c[0]);case 4:o=e.sent,t(o.src,o.width,o.height),r.value="";case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return A(n).addEventListener("change",r),function(){n&&n.removeEventListener("change",r)}}),[e,t])}(c,e.createImgBlock),Object(m.jsxs)("div",{className:Ye.a.toolbar,children:[Object(m.jsxs)("div",{className:Ye.a.button_box,children:[Object(m.jsx)(rt,{label:"",title:"C \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u0430",icon:_.e,ref:c}),Object(m.jsx)($e,{label:"",title:"\u0418\u0437 Pixels",icon:_.j}),Object(m.jsx)(Je,{minWidth:200,label:"",icon:_.o,sizeIcon:"lg",children:n})]}),Object(m.jsx)("label",{className:Ye.a.toolbar__label,children:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f"})]})})),lt=n(25),ut=n.n(lt),st=n(49),dt=n.n(st),bt=Object(r.forwardRef)((function(e,t){return Object(m.jsx)("input",{type:"color",ref:t,className:dt.a.input__color})})),ft=Object(u.b)(null,null,null,{forwardRef:!0})(bt);function _t(e,t){return{type:"SET_CANVAS_SIZE",width:e,height:t}}function vt(e,t,n,r){return{type:"AREA_SELECTION",x:e,y:t,width:n,height:r}}var jt=Object(u.b)((function(e){return{filter:e.canvas.filter}}),(function(e){return{inputFilter:function(t,n){return e(function(e,t){return{type:"INPUT_FILTER",color:e,opacity:t}}(t,n))},setFilter:function(t,n){return e(function(e,t){return{type:"SET_FILTER",color:e,opacity:t}}(t,n))}}}))((function(e){var t=Object(r.useRef)(null),n=Object(r.useRef)(null);return function(e,t,n,c,o){Object(r.useEffect)((function(){var r=e.current,a=t.current;function i(){if(a&&r){var e=r.value,t=Number(a.value);n(e,t)}}function l(){if(a&&r){var e=Number(a.value),t=r.value;c(t,e)}}return A(r).value=o.color,A(a).value=String(o.opacity),A(r).addEventListener("input",i),A(r).addEventListener("change",l),A(a).addEventListener("input",i),A(a).addEventListener("change",l),function(){r&&(r.removeEventListener("input",i),r.removeEventListener("change",l)),a&&(a.removeEventListener("input",i),a.removeEventListener("change",l))}}),[e,t,n,c,o])}(t,n,e.inputFilter,e.setFilter,e.filter),Object(m.jsxs)("div",{className:ut.a.toolbar,children:[Object(m.jsx)("div",{className:ut.a.colorPickerBox,children:Object(m.jsx)(ft,{ref:t})}),Object(m.jsx)("input",{type:"range",min:"0",max:"0.2",step:"0.025",className:ut.a.input_range,ref:n}),Object(m.jsx)("label",{className:ut.a.toolbar__label,children:"\u0424\u0438\u043b\u044c\u0442\u0440"})]})})),pt=n(13),mt=n.n(pt),Ot=n(26),xt=n.n(Ot);var ht=Object(u.b)((function(e){return{bgImg:e.viewModel.bgImg}}),(function(e){return{inputBackgroundImg:function(t,n,r){return e(function(e,t,n){return{type:"INPUT_BACKGROUND_IMG",width:e,height:t,src:n}}(t,n,r))},setBackgroundImg:function(t){return e(function(e){return{type:"SET_BACKGROUND_IMG",src:e}}(t))},setCanvasSize:function(t,n){return e(_t(t,n))}}}))((function(e){var t,n=Object(r.useRef)(null),c=Object(r.useState)(!1),o=Object(se.a)(c,2),a=o[0],i=o[1],l=function(){return i(!1)};!function(e,t,n,c){Object(r.useEffect)((function(){var r=ue.getState().canvas.width,o=ue.getState().canvas.height,a=e.current;function i(e){return l.apply(this,arguments)}function l(){return(l=Object(L.a)(S.a.mark((function e(a){var i,l,u;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=a.target,l=i.files,e.next=4,w(l[0]);case 4:u=e.sent,r<u.width||o<u.height?(n(u.width,u.height,u.src),c(!0)):t(u.src),i.value="";case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return A(a).addEventListener("change",i),function(){a&&a.removeEventListener("change",i)}}),[e,t,n,c])}(n,e.setBackgroundImg,e.inputBackgroundImg,i);var u=null!==(t=e.bgImg)&&void 0!==t?t:{width:0,height:0,src:""},s=Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("p",{children:"\u0418\u0441\u0445\u043e\u0434\u043d\u043e\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u0440\u0430\u0437\u043c\u0435\u0440\u0430 \u0445\u043e\u043b\u0441\u0442\u0430"})}),d=Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("button",{onClick:function(){e.setBackgroundImg(u.src),e.setCanvasSize(u.width,u.height),l()},children:"\u0420\u0430\u0441\u0442\u044f\u043d\u0443\u0442\u044c \u0445\u043e\u043b\u0441\u0442"}),Object(m.jsx)("button",{onClick:function(){e.setBackgroundImg(u.src),l()},children:"\u041e\u0431\u0440\u0435\u0437\u0430\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"}),Object(m.jsx)("button",{onClick:l,children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]});return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(_e,{visible:a,title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435",content:s,footer:d,onClose:l}),Object(m.jsxs)("button",{className:xt.a.button,title:e.title,children:[Object(m.jsx)("label",{htmlFor:"input-file-bg-img",className:xt.a.icon,children:Object(m.jsx)(p.a,{icon:e.icon})}),Object(m.jsx)("input",{className:xt.a.inputFile,type:"file",id:"input-file-bg-img",ref:n}),""!==e.label&&Object(m.jsx)("label",{className:xt.a.button__text,htmlFor:"input-file-bg-img",children:e.label})]})]})})),Et=n(36),gt=n.n(Et),yt=Object(r.forwardRef)((function(e,t){return Object(m.jsxs)("button",{className:gt.a.button,ref:t,title:e.title,style:{textAlign:""===e.label?"center":"left"},children:[Object(m.jsx)(p.a,{icon:e.icon}),""!==e.label&&Object(m.jsx)("span",{className:gt.a.button_text,children:e.label})]})})),Tt=Object(u.b)(null,null,null,{forwardRef:!0})(yt);var St=Object(u.b)((function(e){return{background:e.canvas.background}}),(function(e){return{resetBackground:function(){return e({type:"RESET_BACKGROUND"})},inputBackgroundColor:function(t){return e(function(e){return{type:"INPUT_BACKGROUND_COLOR",color:e}}(t))},setBackgroundColor:function(t){return e(function(e){return{type:"SET_BACKGROUND_COLOR",color:e}}(t))}}}))((function(e){var t=Object(r.useRef)(null),n=Object(r.useRef)(null);return function(e,t,n,c,o,a){Object(r.useEffect)((function(){var r=o.current,c=a.current;function i(){e()}function l(e){var n=e.target;t(n.value)}function u(e){var t=e.target.value;n(t)}return A(r).addEventListener("input",l),A(r).addEventListener("change",u),A(c).addEventListener("click",i),function(){r&&(r.removeEventListener("input",l),r.removeEventListener("change",u)),c&&c.removeEventListener("click",i)}}),[e,t,n,c,o,a]),Object(r.useEffect)((function(){A(o.current).value=c.color?c.color:"#ffffff"}),[o,c])}(e.resetBackground,e.inputBackgroundColor,e.setBackgroundColor,e.background,t,n),Object(m.jsxs)("div",{className:mt.a.toolbar,children:[Object(m.jsxs)("div",{className:mt.a.toolbar__row,children:[Object(m.jsx)("div",{className:mt.a.toolbar__col1,children:Object(m.jsxs)("div",{className:mt.a.button_container,children:[Object(m.jsx)(ht,{label:"C \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u0430",title:"C \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u0430",icon:_.e}),Object(m.jsx)(Tt,{label:"\u0418\u0437 Pixels",title:"\u0418\u0437 Pixels",icon:_.j})]})}),Object(m.jsxs)("div",{className:mt.a.toolbar__col2,children:[Object(m.jsx)("div",{className:mt.a.colorPickerBox,children:Object(m.jsx)(ft,{ref:t})}),Object(m.jsx)(Tt,{label:"\u0421\u0431\u0440\u043e\u0441",title:"\u0421\u0431\u0440\u043e\u0441",icon:_.n,ref:n})]})]}),Object(m.jsx)("label",{className:mt.a.toolbar__label,children:"\u0424\u043e\u043d"})]})})),Lt=n(37),wt=n.n(Lt);var kt=Object(u.b)(null,(function(e){return{deleteAreaSelection:function(){return e({type:"DELETE_AREA_SELECTION",area:ue.getState().viewModel.areaSelection})},resetAreaSelection:function(){return e({type:"RESET_AREA_SELECTION"})}}}))((function(e){var t=Object(r.useRef)(null);return function(e,t,n){Object(r.useEffect)((function(){var r=e.current;function c(){t(),n()}function o(e){e.preventDefault()}return A(r).addEventListener("click",c),A(r).addEventListener("mousedown",o),function(){r&&r.removeEventListener("click",c),r&&r.removeEventListener("mousedown",o)}}),[e,t,n])}(t,e.deleteAreaSelection,e.resetAreaSelection),Object(m.jsxs)("div",{className:wt.a.toolbar,children:[Object(m.jsx)(Tt,{ref:t,label:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",title:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435",icon:_.f}),Object(m.jsx)("label",{className:wt.a.toolbar__label,children:"\u041e\u0431\u043b\u0430\u0441\u0442\u044c"})]})})),Nt=n(19),Bt=n.n(Nt);function Ct(e){return{type:"SET_SELECTED_BLOCK",id:e}}function Rt(e,t){return{type:"SET_SIZE_BLOCK",id:ue.getState().selectBlock,width:e,height:t}}function It(){return{type:"DELETE_BLOCK",id:ue.getState().selectBlock}}function At(e,t){return{type:"SET_POSITION_BLOCK",id:ue.getState().selectBlock,x:e,y:t}}var Ft=Object(u.b)(null,(function(e){return{shiftUpBlock:function(){return e({type:"SHIFT_UP_BLOCK",id:ue.getState().selectBlock})},shiftDownBlock:function(){return e({type:"SHIFT_DOWN_BLOCK",id:ue.getState().selectBlock})},deleteBlock:function(){return e(It())}}}))((function(e){var t=Object(r.useRef)(null),n=Object(r.useRef)(null),c=Object(r.useRef)(null);return function(e,t,n,c){Object(r.useEffect)((function(){var r=e.current,o=t.current;function a(e){e.preventDefault(),n()}function i(e){e.preventDefault(),c()}return A(r).addEventListener("click",a),A(o).addEventListener("click",i),function(){r&&r.removeEventListener("click",a),o&&o.removeEventListener("click",i)}}),[e,t,n,c])}(t,n,e.shiftUpBlock,e.shiftDownBlock),function(e,t){Object(r.useEffect)((function(){var n=e.current;function r(){t()}function c(e){"Delete"===e.code&&t()}return A(n).addEventListener("click",r),document.addEventListener("keydown",c),function(){n&&n.removeEventListener("click",r),document.removeEventListener("keydown",c)}}),[e,t])}(c,e.deleteBlock),Object(m.jsxs)("div",{className:Bt.a.toolbar,children:[Object(m.jsxs)("div",{className:Bt.a.toolbar__row,children:[Object(m.jsx)("div",{children:Object(m.jsxs)("div",{className:Bt.a.button_container,children:[Object(m.jsx)(Tt,{ref:t,label:"",title:"\u041f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u0432\u043f\u0435\u0440\u0435\u0434",icon:_.b}),Object(m.jsx)(Tt,{ref:n,label:"",title:"\u041f\u0435\u0440\u0435\u043c\u0435\u0441\u0442\u0438\u0442\u044c \u043d\u0430\u0437\u0430\u0434",icon:_.a})]})}),Object(m.jsx)("div",{className:Bt.a.toolbar__col,children:Object(m.jsx)(Tt,{ref:c,label:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",title:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",icon:_.q})})]}),Object(m.jsx)("label",{className:Bt.a.toolbar__label,children:"\u041e\u0431\u044a\u0435\u043a\u0442\u044b"})]})})),Dt=n(16),Mt=n.n(Dt);var zt=Object(u.b)((function(e){return{width:e.canvas.width,height:e.canvas.height}}),(function(e){return{inputCanvasSize:function(t,n){return e(function(e,t){return{type:"INPUT_CANVAS_SIZE",width:e,height:t}}(t,n))},setCanvasSize:function(t,n){return e(_t(t,n))}}}))((function(e){var t=Object(r.useRef)(null),n=Object(r.useRef)(null);return function(e,t,n,c,o,a){Object(r.useEffect)((function(){var r=e.current,i=t.current;function l(){if(r&&i){var e=Number(r.value),t=Number(i.value);n(e,t)}}function u(){if(r&&i){var e=Number(r.value),t=Number(i.value);c(e,t)}}return A(r).value=String(o),A(i).value=String(a),A(r).addEventListener("change",l),A(r).addEventListener("blur",u),A(i).addEventListener("change",l),A(i).addEventListener("blur",u),function(){r&&(r.removeEventListener("change",l),r.removeEventListener("blur",u)),i&&(i.removeEventListener("change",l),i.removeEventListener("blur",u))}}),[e,t,n,c,o,a])}(t,n,e.inputCanvasSize,e.setCanvasSize,e.width,e.height),Object(m.jsxs)("div",{className:Mt.a.toolbar,children:[Object(m.jsxs)("div",{className:Mt.a.toolbar__row,children:[Object(m.jsx)("input",{type:"number",className:Mt.a.input_number,min:"0",ref:t}),Object(m.jsx)(p.a,{icon:_.p,className:Mt.a.label}),Object(m.jsx)("input",{type:"number",className:Mt.a.input_number,min:"0",ref:n})]}),Object(m.jsx)("label",{className:Mt.a.toolbar__label,children:"\u0425\u043e\u043b\u0441\u0442"})]})}));var Kt=Object(u.b)()((function(){return Object(m.jsxs)("div",{className:Se.a.toolbar,children:[Object(m.jsx)(He,{}),Object(m.jsx)(it,{}),Object(m.jsx)(St,{}),Object(m.jsx)(kt,{}),Object(m.jsx)(jt,{}),Object(m.jsx)(Ft,{}),Object(m.jsx)(zt,{})]})}));var Pt=Object(u.b)()((function(){return Object(m.jsx)("header",{className:d.a.header,children:Object(m.jsxs)("div",{className:d.a.panel,children:[Object(m.jsx)(ye,{}),Object(m.jsx)(Kt,{})]})})})),Ut=n(50),Xt=n.n(Ut),Ht=n(14),Gt=n.n(Ht);function Yt(e,t,n,c){Object(r.useEffect)((function(){var r=t.current;function o(){ue.getState().selectBlock!==e&&setTimeout((function(){n(e)}))}function a(t){var n=t.defaultPrevented,o=ue.getState().selectBlock===e;!n&&o&&t.target!==r&&c()}return document.addEventListener("click",a),A(r).addEventListener("mousedown",o),function(){r&&r.removeEventListener("mousedown",o),document.removeEventListener("click",a)}}),[e,t,n,c])}function Wt(e,t,n){Object(r.useEffect)((function(){var r,c,o=e.current;function a(e){r={x:e.pageX,y:e.pageY},document.addEventListener("mousemove",i),document.addEventListener("mouseup",l)}function i(e){if(!e.defaultPrevented){e.preventDefault();var n={x:e.pageX-r.x,y:e.pageY-r.y};c={x:t.x+n.x,y:t.y+n.y},A(o).style.left=String(c.x)+"px",A(o).style.top=String(c.y)+"px"}}function l(){c&&n(c.x,c.y),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",l)}return A(o).addEventListener("mousedown",a),function(){o&&o.removeEventListener("mousedown",a)}}),[e,t,n])}function Zt(e,t,n,c,o,a,i,l,u){Object(r.useEffect)((function(){var r,s,d=i.current,b=n,f=c,_=o,v=a;function j(e){switch(e.preventDefault(),e.target){case b.current:s="LT";break;case f.current:s="RT";break;case _.current:s="LB";break;case v.current:s="RB"}r={x:e.pageX+(5-e.offsetX),y:e.pageY+(5-e.offsetY)},document.addEventListener("mousemove",E),document.addEventListener("mouseup",y)}var p,m=u.width,O=u.height,x=u.width,h=u.height;function E(e){e.preventDefault();var t={x:e.pageX-r.x,y:e.pageY-r.y},n={x:0,y:0};switch(s){case"LT":var c=g({x:-t.x,y:-t.y},x,h),o=Object(se.a)(c,2);m=o[0],O=o[1],n={x:u.width-m,y:u.height-O};break;case"RT":var a=g({x:t.x,y:-t.y},x,h),i=Object(se.a)(a,2);m=i[0],O=i[1],n={x:0,y:u.height-O};break;case"LB":var b=g({x:-t.x,y:t.y},x,h),f=Object(se.a)(b,2);m=f[0],O=f[1],n={x:u.width-m,y:0};break;case"RB":var _=g(t,x,h),v=Object(se.a)(_,2);m=v[0],O=v[1]}A(d).style.width=String(m)+"px",A(d).style.height=String(O)+"px",p={x:l.x+n.x,y:l.y+n.y},A(d).style.left=String(p.x)+"px",A(d).style.top=String(p.y)+"px",x=m,h=O}function g(e,t,n){return e.x/t<e.y/n?(O=u.height+e.y,m=t*(O=O<20?20:O)/n):(m=u.width+e.x,O=n*(m=m<20?20:m)/t),[m,O]}function y(){e(m,O),p&&t(p.x,p.y),document.removeEventListener("mousemove",E),document.removeEventListener("mouseup",y)}return A(b.current).addEventListener("mousedown",j),A(f.current).addEventListener("mousedown",j),A(_.current).addEventListener("mousedown",j),A(v.current).addEventListener("mousedown",j),function(){b.current&&b.current.removeEventListener("mousedown",j),f.current&&f.current.removeEventListener("mousedown",j),_.current&&_.current.removeEventListener("mousedown",j),v.current&&v.current.removeEventListener("mousedown",j)}}),[e,t,n,c,o,a,i,l,u])}var Jt=Object(u.b)((function(e){return{selectBlock:e.selectBlock}}),(function(e){return{setPositionBlock:function(t,n){return e(At(t,n))},setSizeBlock:function(t,n){return e(Rt(t,n))},setSelectedBlock:function(t){return e(Ct(t))},resetSelectedBlock:function(){return e({type:"RESET_SELECTED_BLOCK"})}}}))((function(e){var t=e.img,n="";t.src&&(n=t.src);var c=function(e){return{width:e.width,height:e.height,left:e.x,top:e.y}}(t),o=Object(r.useRef)(null),a=Object(r.useRef)(null),i=Object(r.useRef)(null),l=Object(r.useRef)(null),u=Object(r.useRef)(null);Yt(e.img.id,o,e.setSelectedBlock,e.resetSelectedBlock),Wt(o,{x:t.x,y:t.y},e.setPositionBlock),Zt(e.setSizeBlock,e.setPositionBlock,a,i,l,u,o,{x:t.x,y:t.y},{width:t.width,height:t.height});var s=e.img.id===e.selectBlock?Gt.a.selected:"";return Object(m.jsxs)("div",{className:Gt.a.block+" "+s,style:c,ref:o,onDragStart:function(e){return e.preventDefault()},children:[Object(m.jsx)("div",{className:Gt.a.pointTopLeft,ref:a}),Object(m.jsx)("div",{className:Gt.a.pointTopRight,ref:i}),Object(m.jsx)("img",{src:n,alt:"",className:Gt.a.img}),Object(m.jsx)("div",{className:Gt.a.pointBottomLeft,ref:l}),Object(m.jsx)("div",{className:Gt.a.pointBottomRight,ref:u})]})})),Qt=n(38),Vt=n.n(Qt);var qt=Object(u.b)((function(e){return{selectBlock:e.selectBlock,color:e.viewModel.text.tempColor,size:e.viewModel.text.tempSize}}),(function(e){return{setPositionBlock:function(t,n){return e(At(t,n))},setSelectedBlock:function(t){return e(Ct(t))},resetSelectedBlock:function(){return e({type:"RESET_SELECTED_BLOCK"})},setTextInTextBlock:function(t){return e(function(e){return{type:"SET_TEXT_IN_TEXT_BLOCK",id:ue.getState().selectBlock,text:e}}(t))},clickOnText:function(){return e({type:"CLICK_ON_TEXT",id:ue.getState().selectBlock})},deleteBlock:function(){return e(It())},setBoldText:function(t){return e(ke(t))},setItalicText:function(t){return e(Ne(t))},setUnderlineText:function(t){return e(Be(t))}}}))((function(e){var t,n,c,o,a,i,l,u,s,d,b=e.text,f=Object(r.useRef)(null);Yt(e.text.id,f,e.setSelectedBlock,e.resetSelectedBlock),Wt(f,{x:b.x,y:b.y},e.setPositionBlock),t=f,n=b.bold,c=b.italic,o=b.underline,a=e.setTextInTextBlock,i=e.clickOnText,l=e.deleteBlock,u=e.setBoldText,s=e.setItalicText,d=e.setUnderlineText,Object(r.useEffect)((function(){var e=t.current;function r(){setTimeout((function(){i()}))}function b(){A(e).setAttribute("contenteditable","true"),A(e).focus()}function f(){if(e){e.setAttribute("contenteditable","false");var t=e.innerHTML;console.log(t),"<div><br></div>"===t?l():a(e.innerHTML)}}function _(t){"true"===A(e).getAttribute("contenteditable")&&t.stopImmediatePropagation()}function v(t){"Escape"===t.code&&"true"===A(e).getAttribute("contenteditable")&&(A(e).setAttribute("contenteditable","false"),a(A(e).innerHTML)),"Delete"===t.code&&t.stopImmediatePropagation(),"KeyB"===t.code&&(t.ctrlKey||t.metaKey)&&u(!n),"KeyI"===t.code&&(t.ctrlKey||t.metaKey)&&s(!c),"KeyU"===t.code&&(t.ctrlKey||t.metaKey)&&d(!o)}function j(e){e.preventDefault();var t=e.clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,t)}function p(t){e&&("<"===e.innerHTML[0]&&"<br>"!==e.innerHTML||(e.innerHTML="<div>".concat(e.innerText,"<br></div>"),e.focus()))}return A(e).addEventListener("mousedown",r),A(e).addEventListener("dblclick",b),A(e).addEventListener("blur",f),document.addEventListener("mousemove",_),A(e).addEventListener("keydown",v),A(e).addEventListener("paste",j),A(e).addEventListener("input",p),function(){e&&(e.removeEventListener("mousedown",r),e.removeEventListener("dblclick",b),e.addEventListener("blur",f),e.removeEventListener("keydown",v),e.removeEventListener("paste",j),e.removeEventListener("input",p)),document.removeEventListener("mousemove",_)}}),[t,n,c,o,a,i,l,u,s,d]);var _=e.text.id===e.selectBlock?Vt.a.selected:"",v=function(e){return{left:e.x,top:e.y,color:e.color,fontSize:e.size,fontWeight:e.bold?700:400,textDecoration:e.underline?"underline":"none",fontStyle:e.italic?"italic":"normal",fontFamily:e.fontFamily}}(b);return v=Object(C.a)(Object(C.a)({},v),{},{color:e.color&&""!==_?e.color:v.color,fontSize:e.size&&""!==_?e.size:v.fontSize}),Object(m.jsx)("div",{style:v,contentEditable:!1,suppressContentEditableWarning:!0,onDragStart:function(e){return e.preventDefault()},ref:f,className:Vt.a.block+" "+_,dangerouslySetInnerHTML:{__html:b.text}})})),$t=n(15),en=n.n($t);var tn=Object(u.b)((function(e){return{selectBlock:e.selectBlock}}),(function(e){return{setPositionBlock:function(t,n){return e(At(t,n))},setSizeBlock:function(t,n){return e(Rt(t,n))},setSelectedBlock:function(t){return e(Ct(t))},resetSelectedBlock:function(){return e({type:"RESET_SELECTED_BLOCK"})}}}))((function(e){var t=e.artObj,n=Object(r.useRef)(null),c=function(e){return{width:e.width,height:e.height,left:e.x,top:e.y}}(t),o=Object(r.useRef)(null),a=Object(r.useRef)(null),i=Object(r.useRef)(null),l=Object(r.useRef)(null);Yt(e.artObj.id,n,e.setSelectedBlock,e.resetSelectedBlock),Wt(n,{x:t.x,y:t.y},e.setPositionBlock),Zt(e.setSizeBlock,e.setPositionBlock,o,a,i,l,n,{x:t.x,y:t.y},{width:t.width,height:t.height});var u=e.artObj.id===e.selectBlock?en.a.selected:"";return Object(m.jsxs)("div",{className:en.a.block+" "+u,style:c,ref:n,onDragStart:function(e){return e.preventDefault()},children:[Object(m.jsx)("div",{className:en.a.pointTopLeft,ref:o}),Object(m.jsx)("div",{className:en.a.pointTopRight,ref:a}),Object(m.jsx)("img",{src:t.src,alt:"",className:en.a.img}),Object(m.jsx)("div",{className:en.a.pointBottomLeft,ref:i}),Object(m.jsx)("div",{className:en.a.pointBottomRight,ref:l})]})})),nn=n(51),rn=n.n(nn);var cn=Object(u.b)((function(e){return{canvas:e.canvas,filter:e.viewModel.filter}}))((function(e){var t=e.canvas,n="",r=0;e.filter?(n=e.filter.color,r=e.filter.opacity):(n=t.filter.color,r=t.filter.opacity);var c={background:n,opacity:r};return Object(m.jsx)("div",{className:rn.a.filter,style:c,id:"filter"})})),on=n(52),an=n.n(on);var ln=Object(u.b)((function(e){return{canvas:e.canvas}}))((function(e){var t=e.canvas,n=[];return t.deleteArea.forEach((function(e,t){var r={width:e.width,height:e.height,left:e.x,top:e.y};n.push(Object(m.jsx)("div",{className:an.a.deleteArea,style:r},t))})),Object(m.jsx)(m.Fragment,{children:n})})),un=n(53),sn=n.n(un),dn=Object(r.forwardRef)((function(e,t){var n;return n={left:e.area.x,top:e.area.y,width:e.area.width-2,height:e.area.height-2},Wt(t,{x:e.area.x,y:e.area.y},e.setPositionAreaSelection),Object(m.jsx)("div",{className:sn.a.areaSelection,style:n,ref:t})})),bn=Object(u.b)(null,(function(e){return{areaSelection:function(t,n,r,c){return e(vt(t,n,r,c))},resetAreaSelection:function(){return e({type:"RESET_AREA_SELECTION"})},setPositionAreaSelection:function(t,n){return e(function(e,t){return{type:"SET_POSITION_AREA_SELECTION",x:e,y:t}}(t,n))}}}),null,{forwardRef:!0})(dn);var fn=Object(u.b)((function(e){return{canvas:e.canvas,area:e.viewModel.areaSelection,bgColor:e.viewModel.bgColor,canvasSize:e.viewModel.canvasSize}}),(function(e){return{areaSelection:function(t,n,r,c){return e(vt(t,n,r,c))},resetAreaSelection:function(){return e({type:"RESET_AREA_SELECTION"})}}}))((function(e){var t=function(e,t,n){var r="#fff";t?r=t:e.background.color?r=e.background.color:e.background.src&&(r="url("+e.background.src+")");var c=0,o=0;n?(c=n.width,o=n.height):(c=e.width,o=e.height);return{width:c,height:o,background:r}}(e.canvas,e.bgColor,e.canvasSize),n=function(e){var t=[];return e.forEach((function(e){switch(e.type){case K.text:t.push(Object(m.jsx)(qt,{text:e},e.id));break;case K.img:t.push(Object(m.jsx)(Jt,{img:e},e.id));break;case K.artObj:t.push(Object(m.jsx)(tn,{artObj:e},e.id))}})),t}(e.canvas.listBlock),c=Object(r.useRef)(null),o=Object(r.useRef)(null);return function(e,t,n,c){Object(r.useEffect)((function(){var r,o,a=e.current,i=t.current,l=document.createElement("div");function u(e){e.defaultPrevented||e.target!==a||(r={x:e.pageX,y:e.pageY},o={x:e.offsetX,y:e.offsetY},document.addEventListener("mousemove",s),document.addEventListener("mouseup",d),l.style.border="1px dashed red",l.style.width="0px",l.style.height="0px",l.style.left=e.offsetX+"px",l.style.top=e.offsetY+"px",a&&a.appendChild(l))}function s(e){if(!e.defaultPrevented){var t={x:Math.abs(e.pageX-r.x),y:Math.abs(e.pageY-r.y)},n={x:0,y:0};r.x>=e.pageX&&r.y>=e.pageY?n={x:-t.x,y:-t.y}:r.x<=e.pageX&&r.y>=e.pageY?n={x:0,y:-t.y}:r.x>=e.pageX&&r.y<=e.pageY&&(n={x:-t.x,y:0}),l.style.width=t.x+"px",l.style.height=t.y+"px",l.style.left=o.x+n.x+"px",l.style.top=o.y+n.y+"px"}}function d(){l.offsetWidth>2&&l.offsetHeight>2&&n(l.offsetLeft,l.offsetTop,l.offsetWidth,l.offsetHeight),l.remove(),document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",d)}function b(e){!e.defaultPrevented&&t.current&&(e.preventDefault(),t.current!==e.target&&c())}function f(e){e.preventDefault()}return l.style.position="absolute",l.style.zIndex="1",l.style.pointerEvents="none",A(a).addEventListener("mousedown",u),i&&i.addEventListener("mousedown",f),document.addEventListener("mousedown",b),function(){a&&a.removeEventListener("mousedown",u),i&&i.removeEventListener("mousedown",f),document.removeEventListener("mousedown",b)}}),[e,t,n,c])}(c,o,e.areaSelection,e.resetAreaSelection),Object(m.jsxs)("div",{id:"canvas",className:Xt.a.canvas,style:t,ref:c,children:[e.area&&Object(m.jsx)(bn,{area:e.area,ref:o}),e.canvas.deleteArea&&Object(m.jsx)(ln,{}),Object(m.jsx)(cn,{}),n]})}));var _n=Object(u.b)()((function(){return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(Pt,{}),Object(m.jsx)("main",{className:l.a.main,children:Object(m.jsx)(fn,{})})]})}));ue.subscribe((function(){})),a.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(u.a,{store:ue,children:Object(m.jsx)(_n,{})})}),document.getElementById("root"))}],[[69,1,2]]]);
//# sourceMappingURL=main.4c6b5a98.chunk.js.map