(this.webpackJsonpcard_maker=this.webpackJsonpcard_maker||[]).push([[0],[,,,,,,,,,,function(e,t,n){e.exports={select:"SelectFontFamily_select__-xsBg",robotoSlab:"SelectFontFamily_robotoSlab__27hZJ",fantazyor:"SelectFontFamily_fantazyor__M9yoI",piroucyrillic:"SelectFontFamily_piroucyrillic__29ewu",phenomena:"SelectFontFamily_phenomena__NRqnd",sunday:"SelectFontFamily_sunday__1H2GQ",kurale:"SelectFontFamily_kurale__3Hg9L",sensei:"SelectFontFamily_sensei__M0k1g",borsok:"SelectFontFamily_borsok__uN7nG",summer:"SelectFontFamily_summer__1iu_f",underdog:"SelectFontFamily_underdog__1VSS1",montserrat:"SelectFontFamily_montserrat__2gZbq",openSans:"SelectFontFamily_openSans__20d1g",comfortaa:"SelectFontFamily_comfortaa__3j5F8",rubik:"SelectFontFamily_rubik__3P7MR",marta:"SelectFontFamily_marta__JO1cQ"}},,function(e,t,n){e.exports={modal:"ModalSearchImg_modal__uBBh1",appear:"ModalSearchImg_appear__1G1Sw",modalDialog:"ModalSearchImg_modalDialog__1idJU",animatetop:"ModalSearchImg_animatetop__lbfEH","slide-in":"ModalSearchImg_slide-in__3tA5h",modalHeader:"ModalSearchImg_modalHeader__3KLzI",modalFooter:"ModalSearchImg_modalFooter__2HKjX",modalClose:"ModalSearchImg_modalClose__3YhCx",modalBody:"ModalSearchImg_modalBody__dyHSE",modalContent:"ModalSearchImg_modalContent__2Q6UH",modalTitle:"ModalSearchImg_modalTitle__1vEB0",searchBox:"ModalSearchImg_searchBox__1QOP1",navBox:"ModalSearchImg_navBox__1nyG-",information:"ModalSearchImg_information__3v8sD"}},function(e,t,n){e.exports={toolbar:"ToolbarCanvas_toolbar__1lWFF",inputNumber:"ToolbarCanvas_inputNumber__3FE9W",row:"ToolbarCanvas_row__1CFS7",label:"ToolbarCanvas_label__1kyuR",unitsLabel:"ToolbarCanvas_unitsLabel__2Sp-N"}},function(e,t,n){e.exports={modal:"Modal_modal__3Ldwj",modalDialog:"Modal_modalDialog__3Du5z",modalHeader:"Modal_modalHeader__1ppBy",modalFooter:"Modal_modalFooter__lSAfT",modalClose:"Modal_modalClose__3GnIC",modalBody:"Modal_modalBody__12nPW",modalContent:"Modal_modalContent__35CCy",modalTitle:"Modal_modalTitle__bNkET"}},function(e,t,n){e.exports={block:"Img_block__r3fmB",img:"Img_img__3Hans",selected:"Img_selected__vEyvs",pointBottomRight:"Img_pointBottomRight__1Z-pj",pointTopLeft:"Img_pointTopLeft__3ZXB8",pointTopRight:"Img_pointTopRight__2cXMJ",pointBottomLeft:"Img_pointBottomLeft__x6rWq"}},function(e,t,n){e.exports={block:"ArtObj_block__1DyCD",img:"ArtObj_img__3ltZN",selected:"ArtObj_selected__1oJ2Z",pointBottomRight:"ArtObj_pointBottomRight__3og1x",pointTopLeft:"ArtObj_pointTopLeft__2iQK4",pointTopRight:"ArtObj_pointTopRight__19xjD",pointBottomLeft:"ArtObj_pointBottomLeft__1BMY1"}},,,,,function(e,t,n){e.exports={button:"NavFileButton_button__31bRb",button__text:"NavFileButton_button__text__2WzyS",inputFile:"NavFileButton_inputFile__3SOw7",icon:"NavFileButton_icon__1R6pk"}},function(e,t,n){e.exports={dropbtn:"DropdownMenu_dropbtn__2-JiC",dropdown:"DropdownMenu_dropdown__2_ubm",dropdownContent:"DropdownMenu_dropdownContent__3ihyt",dropdownText:"DropdownMenu_dropdownText__TLnH9"}},function(e,t,n){e.exports={toolbar:"ToolbarText_toolbar__3Q1B2",toolbar__row:"ToolbarText_toolbar__row__2xbEr"}},function(e,t,n){e.exports={button:"AddImgButtonFile_button__2-aES",buttonText:"AddImgButtonFile_buttonText__QVBcl",inputFile:"AddImgButtonFile_inputFile__2htQZ"}},function(e,t,n){e.exports={toolbar:"ToolbarFilter_toolbar__33oQI",inputRange:"ToolbarFilter_inputRange__3VgvX",row:"ToolbarFilter_row__2v8k_",label:"ToolbarFilter_label__1iRk3"}},function(e,t,n){e.exports={toolbar:"ToolbarBackground_toolbar__1Rsa9",row:"ToolbarBackground_row__Jz_7E",label:"ToolbarBackground_label__iB0N8",reset:"ToolbarBackground_reset__28bz6",active:"ToolbarBackground_active__2f4Mq"}},function(e,t,n){e.exports={button:"FileImgButton_button__YkRnP",buttonText:"FileImgButton_buttonText__zV9Xx",inputFile:"FileImgButton_inputFile__3s8el"}},,,,,function(e,t,n){e.exports={header:"Header_header__1rLmw",panel:"Header_panel__29H5m",mainLabel:"Header_mainLabel__3rCOx"}},function(e,t,n){e.exports={button:"NavButton_button__UL2Cr",button__text:"NavButton_button__text__C4Sqv"}},function(e,t,n){e.exports={preview:"PreviewTemplate_preview__IUSm5",img:"PreviewTemplate_img__ajmyo"}},function(e,t,n){e.exports={block:"Text_block__Fvt_5",selected:"Text_selected__2uNOO"}},function(e,t,n){e.exports={button:"ButtonEditText_button__2hfGq",active:"ButtonEditText_active__Ffbj1"}},function(e,t,n){e.exports={toolbar:"ToolbarImg_toolbar__GYlq5"}},function(e,t,n){e.exports={button:"AddImgByUrlButton_button__1EEtm",buttonText:"AddImgByUrlButton_buttonText__OVCrG"}},function(e,t,n){e.exports={button:"AddBackgroundByUrlButton_button__JwlsP",button_text:"AddBackgroundByUrlButton_button_text__1Me2L"}},function(e,t,n){e.exports={button:"Button_button__35p3U",buttonText:"Button_buttonText__22v9d"}},,function(e,t,n){e.exports={main:"CardMaker_main__qNuoq"}},,function(e,t,n){e.exports={navbar:"Navbar_navbar__2UjT7",input:"Navbar_input__1lW6o"}},,function(e,t,n){e.exports={canvas:"Canvas_canvas__Ak89z"}},function(e,t,n){e.exports={filter:"Filter_filter__16erS"}},function(e,t,n){e.exports={deleteArea:"DeleteArea_deleteArea__2KQym"}},function(e,t,n){e.exports={areaSelection:"AreaSelection_areaSelection__1Syux"}},function(e,t,n){e.exports={toolbar:"Toolbar_toolbar__apu1b"}},function(e,t,n){e.exports={input:"ColorPicker_input__3Kdsq"}},function(e,t,n){e.exports={input__number:"InputNumber_input__number__2Dr6G"}},function(e,t,n){e.exports={sticker:"PreviewArtObj_sticker__yjFpD"}},function(e,t,n){e.exports={cssloadSpinBox:"LoadingIndicator_cssloadSpinBox__27Etq","cssload-spin":"LoadingIndicator_cssload-spin__3fpV3"}},function(e,t,n){e.exports={input__color:"ColorPicker_input__color__29NBt"}},function(e,t,n){e.exports={toolbar:"ToolbarObject_toolbar__29GLR"}},function(e,t,n){},,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);n(57);var r,c=n(1),a=n.n(c),o=n(28),i=n.n(o),l=n(42),u=n.n(l),s=n(2),d=n(32),f=n.n(d),b=n(44),v=n.n(b),j=n(5),_=n(33),p=n.n(_),m=n(8),h=n(0),O=Object(c.forwardRef)((function(e,t){return Object(h.jsxs)("button",{onClick:e.onClick?e.onClick:function(){},className:p.a.button,ref:t,children:[Object(h.jsx)(m.a,{icon:e.icon}),""!==e.label&&Object(h.jsx)("span",{className:p.a.button__text,children:e.label})]})})),x=Object(s.b)(null,null,null,{forwardRef:!0})(O),g=n(21),E=n.n(g),y=Object(c.forwardRef)((function(e,t){return Object(h.jsxs)("button",{className:E.a.button,children:[Object(h.jsx)("label",{htmlFor:"input-file",className:E.a.icon,children:Object(h.jsx)(m.a,{icon:e.icon})}),Object(h.jsx)("input",{className:E.a.inputFile,type:"file",accept:".json",ref:t,id:"input-file"}),""!==e.label&&Object(h.jsx)("label",{className:E.a.button__text,htmlFor:"input-file",children:e.label})]})})),T=Object(s.b)(null,null,null,{forwardRef:!0})(y),w=n(3),S=n.n(w),k=n(7),L=function(){var e=Object(k.a)(S.a.mark((function e(t){var n,r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Promise((function(e,n){var r=new FileReader;r.readAsDataURL(t),r.onload=Object(k.a)(S.a.mark((function t(){return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e(r.result));case 1:case"end":return t.stop()}}),t)}))),r.onerror=n})),r=new Image,e.next=4,n;case 4:return r.src=e.sent,e.next=7,r.decode();case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(k.a)(S.a.mark((function e(t){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=JSON,e.next=3,new Promise((function(e,n){var r=new FileReader;r.readAsText(t),r.onload=function(){return e(r.result)},r.onerror=n}));case 3:return e.t1=e.sent,e.abrupt("return",e.t0.parse.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=n(4);function C(e,t,n){var r=[];return e.forEach((function(e){e.id===t?r.push(Object(B.a)(Object(B.a)({},e),n)):r.push(e)})),r}function R(e,t){var n=-1;return e.forEach((function(e,r){e.id!==t||(n=r)})),n}function I(e){if(!e)throw new Error("Assertion failed");return e}function F(e){return{type:"APPLY_FILE_PROJECT",project:e}}!function(e){e[e.img=0]="img",e[e.artObj=1]="artObj",e[e.text=2]="text"}(r||(r={}));var A,D={birthday_1:{name:"\u0421 \u0434\u043d\u0435\u043c \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f!",json:"./templates/birthday_1.json",preview:"./templates/birthday_1.png"},birthday_2:{name:"\u0421 \u0434\u043d\u0435\u043c \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f!",json:"./templates/birthday_2.json",preview:"./templates/birthday_2.png"},february_23_1:{name:"\u0421 23 \u0444\u0435\u0432\u0440\u0430\u043b\u044f!",json:"./templates/february_23_1.json",preview:"./templates/february_23_1.png"},march_8_1:{name:"\u0421 8 \u043c\u0430\u0440\u0442\u0430!",json:"./templates/march_8_1.json",preview:"./templates/march_8_1.png"},march_8_2:{name:"\u0421 8 \u043c\u0430\u0440\u0442\u0430!",json:"./templates/march_8_2.json",preview:"./templates/march_8_2.png"},new_year_1:{name:"\u0421 \u043d\u043e\u0432\u044b\u043c \u0433\u043e\u0434\u043e\u043c!",json:"./templates/new_year_1.json",preview:"./templates/new_year_1.png"},new_year_2:{name:"\u0421 \u043d\u043e\u0432\u044b\u043c \u0433\u043e\u0434\u043e\u043c!",json:"./templates/new_year_2.json",preview:"./templates/new_year_2.png"},new_year_3:{name:"\u0421 \u043d\u043e\u0432\u044b\u043c \u0433\u043e\u0434\u043e\u043c!",json:"./templates/new_year_3.json",preview:"./templates/new_year_3.png"},september_1_1:{name:"\u0421 1 \u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f!",json:"./templates/september_1_1.json",preview:"./templates/september_1_1.png"}};!function(e){e.ball_1="./img/artObj/ball_1.svg",e.bouquet_1="./img/artObj/bouquet_1.svg",e.bouquet_2="./img/artObj/bouquet_2.svg",e.bouquet_3="./img/artObj/bouquet_3.svg",e.bouquet_4="./img/artObj/bouquet_4.svg",e.bouquet_5="./img/artObj/bouquet_5.svg",e.bow="./img/artObj/bow.svg",e.branch_1="./img/artObj/branch_1.svg",e.branch_2="./img/artObj/branch_2.svg",e.branch_3="./img/artObj/branch_3.svg",e.camera_1="./img/artObj/camera_1.svg",e.camera_2="./img/artObj/camera_2.svg",e.flower_1="./img/artObj/flower_1.svg",e.flower_2="./img/artObj/flower_2.svg",e.flower_3="./img/artObj/flower_3.svg",e.gift_1="./img/artObj/gift_1.svg",e.gift_2="./img/artObj/gift_2.svg",e.gift_3="./img/artObj/gift_3.svg",e.sun_1="./img/artObj/sun_1.svg",e.tree_1="./img/artObj/tree_1.svg"}(A||(A={}));var M=n(41),K=n(11);var P=function(e,t){switch(t.type){case"NEW_CARD_MAKER":case"RESET_BACKGROUND":return{color:"#ffffff",src:null,width:null,height:null};case"SET_BACKGROUND_COLOR":return{color:t.color,src:null,width:null,height:null};case"SET_BACKGROUND_IMG":return{color:null,src:t.src,width:t.width,height:t.height};default:return e}};var z=function(e,t){switch(t.type){case"NEW_CARD_MAKER":return{color:"#ffffff",opacity:0};case"SET_FILTER":return{color:t.color,opacity:t.opacity};default:return e}};var U=function(e,t){switch(t.type){case"NEW_CARD_MAKER":return 600;case"SET_CANVAS_SIZE":return t.height;default:return e}};function X(){return[H(2),H(1),H(1),H(1),H(3)].join("-")}function H(e){for(var t="",n=0;n<e;n++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t}var G=function(e,t){switch(t.type){case"NEW_CARD_MAKER":return[];case"CREATE_TEXT_BLOCK":return[].concat(Object(K.a)(e),[{id:X(),type:r.text,color:"#898989",x:t.x-45,y:t.y-25,text:"<div>\u0422\u0435\u043a\u0441\u0442<br></div>",size:50,bold:!1,italic:!1,underline:!1,fontFamily:"OpenSans"}]);case"SET_SIZE_BLOCK":return C(e,t.id,{width:t.width,height:t.height});case"SET_TEXT_IN_TEXT_BLOCK":return C(e,t.id,{text:t.text});case"SET_FONT_FAMILY_TEXT":return C(e,t.id,{fontFamily:t.fontFamily});case"SET_BOLD_TEXT":return C(e,t.id,{bold:t.isBold});case"SET_ITALIC_TEXT":return C(e,t.id,{italic:t.isItalic});case"SET_UNDERLINE_TEXT":return C(e,t.id,{underline:t.isUnderline});case"SET_SIZE_TEXT":return C(e,t.id,{size:t.size});case"SET_COLOR_TEXT":return C(e,t.id,{color:t.color});case"CREATE_IMG_BLOCK":return[].concat(Object(K.a)(e),[{id:X(),type:r.img,width:t.width,height:t.height,x:t.x,y:t.y,src:t.src}]);case"CREATE_ART_OBJ_BLOCK":return[].concat(Object(K.a)(e),[{id:X(),type:r.artObj,width:150,height:150,x:t.x,y:t.y,src:t.src}]);case"DELETE_BLOCK":var n=Object(K.a)(e);return function(e){return Boolean(e)}(t.id)&&n.forEach((function(e,r){if(e.id===t.id)return n.splice(r,1),!1})),n;case"SET_POSITION_BLOCK":return C(e,t.id,{x:t.x,y:t.y});case"SHIFT_UP_BLOCK":var c=Object(K.a)(e);if(function(e,t){var n=t.length;return Boolean(e&&R(t,e)<n-1)}(t.id,e)){var a=R(c,t.id),o=[c[a+1],c[a]];c.splice.apply(c,[a,2].concat(o))}return c;case"SHIFT_DOWN_BLOCK":var i=Object(K.a)(e);if(function(e,t){return Boolean(e&&R(t,e)>0)}(t.id,e)){var l=R(i,t.id),u=[i[l],i[l-1]];i.splice.apply(i,[l-1,2].concat(u))}return i;default:return e}};var Y=function(e,t){switch(t.type){case"NEW_CARD_MAKER":return 800;case"SET_CANVAS_SIZE":return t.width;default:return e}};var W=function(e,t){return{width:Y(e.width,t),height:U(e.height,t),filter:z(e.filter,t),listBlock:G(e.listBlock,t),background:P(e.background,t),deleteArea:q(e.deleteArea,t)}};function q(e,t){switch(t.type){case"DELETE_AREA_SELECTION":return t.area?[].concat(Object(K.a)(e),[t.area]):e;case"NEW_CARD_MAKER":return[];default:return e}}var J=function(e,t){switch(t.type){case"NEW_CARD_MAKER":case"RESET_SELECTED_BLOCK":case"DELETE_BLOCK":return null;case"SET_SELECTED_BLOCK":return t.id;default:return e}};var Z=function(e,t){switch(t.type){case"NEW_CARD_MAKER":return{listState:[W({},t)],currentIndex:0};case"ADD_HISTORY":var n=e.listState,r=e.currentIndex,c=Object(K.a)(e.listState);return r!==n.length-1&&c.splice(r+1,n.length-r+1),c.push(t.newCanvas),{currentIndex:r+1,listState:c};case"UNDO":var a=e.currentIndex,o=function(e){var t=e.listState.length,n=e.currentIndex;return t>1&&n>0}(e)?a-1:a;return Object(B.a)(Object(B.a)({},e),{},{currentIndex:o});case"REDO":var i=e.currentIndex,l=function(e){var t=e.listState.length;return e.currentIndex+1<t}(e)?i+1:i;return Object(B.a)(Object(B.a)({},e),{},{currentIndex:l});default:return e}};function V(e,t){switch(t.type){case"AREA_SELECTION":return{x:t.x,y:t.y,width:t.width,height:t.height};case"SET_POSITION_AREA_SELECTION":return Object(B.a)(Object(B.a)({},e.viewModel.areaSelection),{},{x:t.x,y:t.y});case"RESET_AREA_SELECTION":case"UNDO":case"REDO":return null;default:return e.viewModel.areaSelection}}function Q(e,t){switch(t.type){case"INPUT_BACKGROUND_COLOR":return t.color;case"UNDO":case"REDO":return null;default:return e.canvas.background.color}}function $(e,t){return"INPUT_BACKGROUND_IMG"===t.type?{width:t.width,height:t.height,src:t.src}:null}function ee(e,t){switch(t.type){case"INPUT_CANVAS_SIZE":return{width:t.width,height:t.height};case"UNDO":case"REDO":return null;default:return e.viewModel.canvasSize}}function te(e,t){switch(t.type){case"INPUT_FILTER":return{color:t.color,opacity:t.opacity};case"UNDO":case"REDO":return null;default:return e.viewModel.filter}}function ne(e,t){var n,r={color:null,size:null,bold:null,italic:null,underline:null,fontFamily:null,tempColor:null,tempSize:null};switch(t.type){case"CLICK_ON_TEXT":var c=(n=e.canvas.listBlock)[R(n,t.id)];return{color:c.color,tempColor:null,tempSize:null,size:c.size,bold:c.bold,italic:c.italic,underline:c.underline,fontFamily:c.fontFamily};case"SET_FONT_FAMILY_TEXT":return Object(B.a)(Object(B.a)({},e.viewModel.text),{},{fontFamily:t.fontFamily});case"INPUT_COLOR_TEXT":return Object(B.a)(Object(B.a)({},e.viewModel.text),{},{tempColor:t.color});case"INPUT_SIZE_TEXT":return Object(B.a)(Object(B.a)({},e.viewModel.text),{},{tempSize:t.size});case"SET_BOLD_TEXT":return Object(B.a)(Object(B.a)({},e.viewModel.text),{},{bold:t.isBold});case"SET_ITALIC_TEXT":return Object(B.a)(Object(B.a)({},e.viewModel.text),{},{italic:t.isItalic});case"SET_UNDERLINE_TEXT":return Object(B.a)(Object(B.a)({},e.viewModel.text),{},{underline:t.isUnderline});case"SET_SELECTED_BLOCK":case"RESET_SELECTED_BLOCK":case"UNDO":case"REDO":return r;default:return e.viewModel.text}}var re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"NEW_CARD_MAKER"===t.type?{bgColor:null,bgImg:null,canvasSize:null,filter:null,text:{color:null,size:null,bold:null,italic:null,underline:null,fontFamily:null,tempColor:null,tempSize:null},areaSelection:null}:{bgColor:Q(e,t),bgImg:$(e,t),canvasSize:ee(e,t),filter:te(e,t),text:ne(e,t),areaSelection:V(e,t)}};var ce={width:800,height:600,filter:{color:"#ffffff",opacity:0},listBlock:[],deleteArea:[],background:{color:"#ffffff",src:null,width:null,height:null}},ae={canvas:ce,selectBlock:null,history:{listState:[ce],currentIndex:0},viewModel:{bgColor:null,bgImg:null,canvasSize:null,filter:null,text:{color:null,size:null,bold:null,italic:null,underline:null,fontFamily:null,tempColor:null,tempSize:null},areaSelection:null}},oe=["UNDO","REDO","ADD_HISTORY","AFTER_CHANGE_HISTORY","SET_SELECTED_BLOCK","SET_SIZE_TEXT","SET_POSITION_AREA_SELECTION","RESET_SELECTED_BLOCK","RESET_AREA_SELECTION","APPLY_FILE_PROJECT","NEW_CARD_MAKER","AREA_SELECTION","CLICK_ON_TEXT","INPUT_SIZE_TEXT","INPUT_COLOR_TEXT","INPUT_FILTER","INPUT_CANVAS_SIZE","INPUT_BACKGROUND_IMG","INPUT_BACKGROUND_COLOR"],ie=Object(M.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AFTER_CHANGE_HISTORY":return t.cardMaker;case"APPLY_FILE_PROJECT":return t.project;default:return{canvas:W(e.canvas,t),selectBlock:J(e.selectBlock,t),history:Z(e.history,t),viewModel:re(e,t)}}}),ae,Object(M.a)((function(e){return function(t){return function(n){var r=e.getState(),c=t(n);if(!oe.includes(n.type)){var a=e.getState();JSON.stringify(r.canvas)!==JSON.stringify(a.canvas)&&(console.log("\u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0438\u0441\u0442\u043e\u0440\u0438\u0438"),e.dispatch({type:"ADD_HISTORY",newCanvas:a.canvas}))}return c}}}),(function(e){return function(t){return function(n){var r=t(n);if(["UNDO","REDO"].includes(n.type)){var c=e.getState().history.currentIndex,a=e.getState().history.listState[c],o=Object(B.a)(Object(B.a)({},e.getState()),{},{canvas:a});e.dispatch({type:"AFTER_CHANGE_HISTORY",cardMaker:o})}return r}}})));var le=n(9),ue=n(45),se=n(14),de=n.n(se),fe=Object(s.b)()((function(e){var t=e.visible,n=void 0!==t&&t,r=e.title,a=void 0===r?"":r,o=e.content,i=void 0===o?"":o,l=e.footer,u=void 0===l?"":l,s=e.onClose;return Object(c.useEffect)((function(){var e=function(e){if("Escape"===e.key)s()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[s]),n?Object(h.jsx)("div",{className:de.a.modal,onClick:s,children:Object(h.jsxs)("div",{className:de.a.modalDialog,onClick:function(e){return e.stopPropagation()},children:[Object(h.jsxs)("div",{className:de.a.modalHeader,children:[Object(h.jsx)("h3",{className:de.a.modalTitle,children:a}),Object(h.jsx)("span",{className:de.a.modalClose,onClick:s,children:Object(h.jsx)(m.a,{icon:j.p})})]}),Object(h.jsx)("div",{className:de.a.modalBody,children:Object(h.jsx)("div",{className:de.a.modalContent,children:i})}),u&&Object(h.jsx)("div",{className:de.a.modalFooter,children:u})]})}):null}));var be=Object(s.b)(null,(function(e){return{newCardMaker:function(){return e({type:"NEW_CARD_MAKER"})}}}))((function(e){var t=Object(c.useState)(!1),n=Object(le.a)(t,2),r=n[0],a=n[1],o=function(){return a(!1)},i=Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("p",{children:"\u041d\u0435\u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0431\u0443\u0434\u0443\u0442 \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u044b"}),Object(h.jsx)("p",{children:"\u0412\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c ?"})]}),l=Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){e.newCardMaker(),o()},children:"\u0414\u0430"}),Object(h.jsx)("button",{onClick:o,children:"\u041d\u0435\u0442"})]});return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(x,{label:"\u041d\u043e\u0432\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442",icon:ue.a,onClick:function(){return a(!0)}}),Object(h.jsx)(fe,{visible:r,title:"\u041d\u043e\u0432\u0430\u044f \u043e\u0442\u043a\u0440\u044b\u0442\u043a\u0430",content:i,footer:l,onClose:o})]})})),ve=n(19);function je(e){"#"===e.substring(0,1)&&(e=e.substring(1));var t={r:255,g:255,b:255};return t.r=parseInt(e.substring(0,2),16),t.g=parseInt(e.substring(2,4),16),t.b=parseInt(e.substring(4),16),t}function _e(e,t,n){return e*n/t}function pe(e,t,n){return t*n/e}function me(e,t,n,r){var c={width:e,height:t};return e<n&&(c=function(e,t,n){var r=t*n/e;return{width:e*r/t,height:r}}(e,t,n)),t<r&&(c=function(e,t,n){var r=_e(e,t,n);return{width:r,height:pe(e,t,r)}}(e,t,r)),c}function he(e){return Oe.apply(this,arguments)}function Oe(){return(Oe=Object(k.a)(S.a.mark((function e(t){var n,r,c,a,o,i,l,u,s,d,f,b,v,j,_,p,m;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=ie.getState().canvas,r=n.width,c=n.height,a=n.background,o=n.filter,i=n.listBlock,l=n.deleteArea,(u=document.createElement("canvas")).width=r,u.height=c,!(s=u.getContext("2d"))){e.next=50;break}if(!a.src){e.next=22;break}return(d=new Image).crossOrigin="anonymous",d.src=a.src,e.next=18,d.decode();case 18:f=me(d.width,d.height,r,c),s.drawImage(d,0,0,f.width,f.height),e.next=23;break;case 22:a.color&&(s.fillStyle=a.color,s.fillRect(0,0,r,c));case 23:b=Object(ve.a)(i),e.prev=24,b.s();case 26:if((v=b.n()).done){e.next=32;break}return j=v.value,e.next=30,xe(j,s);case 30:e.next=26;break;case 32:e.next=37;break;case 34:e.prev=34,e.t0=e.catch(24),b.e(e.t0);case 37:return e.prev=37,b.f(),e.finish(37);case 40:_=je(o.color),s.fillStyle="rgba(".concat(_.r,", ").concat(_.g,", ").concat(_.b,", ").concat(o.opacity,")"),s.fillRect(0,0,r,c),s.fillStyle="#ffffff",l.forEach((function(e){s.fillRect(e.x,e.y,e.width,e.height)})),p=u.toDataURL(t),(m=document.createElement("a")).href=p,m.download="new_card",m.click();case 50:case"end":return e.stop()}}),e,null,[[24,34,37,40]])})))).apply(this,arguments)}function xe(e,t){return ge.apply(this,arguments)}function ge(){return(ge=Object(k.a)(S.a.mark((function e(t,n){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next=e.t0===r.text?3:e.t0===r.img?5:e.t0===r.artObj?8:11;break;case 3:return Ee(t,n),e.abrupt("break",11);case 5:return e.next=7,ye(t,n);case 7:case 10:return e.abrupt("break",11);case 8:return e.next=10,we(t,n);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(e,t){var n,r={x:(n=e).x,y:n.y,color:n.color,size:n.size,weight:n.bold?"700":"",italic:n.italic?"italic":"",family:n.fontFamily},c=document.createElement("div");c.innerHTML=e.text;var a,o=0,i=Object(ve.a)(Array.from(c.children));try{for(i.s();!(a=i.n()).done;){var l=a.value;if(t.fillStyle=r.color,t.font="".concat(r.italic," ").concat(r.weight," ").concat(r.size,"px ").concat(r.family),t.fillText(l.innerText,e.x+5,e.y+o+r.size),e.underline){for(var u=t.measureText(l.innerText).width,s=0,d="";l.innerText.length>s;)d+="__",s++;t.font="700 ".concat(r.size,"px openSans"),t.fillText(d,e.x+5,e.y+o+r.size,u)}o+=1.2*e.size}}catch(f){i.e(f)}finally{i.f()}}function ye(e,t){return Te.apply(this,arguments)}function Te(){return(Te=Object(k.a)(S.a.mark((function e(t,n){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new Image).crossOrigin="anonymous",r.src=t.src,e.next=5,r.decode();case 5:n.drawImage(r,t.x,t.y,t.width,t.height);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(e,t){return Se.apply(this,arguments)}function Se(){return(Se=Object(k.a)(S.a.mark((function e(t,n){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new Image).crossOrigin="anonymous",r.src=t.src,e.next=5,r.decode();case 5:n.drawImage(r,t.x,t.y,t.width,t.height);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ke=Object(s.b)()((function(){var e=Object(c.useRef)(null),t=Object(c.useState)(!1),n=Object(le.a)(t,2),r=n[0],a=n[1],o=function(){return a(!1)},i=Object(h.jsx)("p",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u043e\u0440\u043c\u0430\u0442 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u043c\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430"}),l=Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){he("image/jpeg"),o()},children:"jpg"}),Object(h.jsx)("button",{onClick:function(){he("image/png"),o()},children:"png"}),Object(h.jsx)("button",{onClick:o,children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]});return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(x,{label:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043a\u0430\u043a jpg/png",icon:j.k,onClick:function(){return a(!0)},ref:e}),Object(h.jsx)(fe,{visible:r,title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043a\u0430\u043a...",content:i,footer:l,onClose:o})]})})),Le=n(22),Ne=n.n(Le);var Be=Object(s.b)()((function(e){return Object(h.jsxs)("div",{className:Ne.a.dropdown,children:[Object(h.jsxs)("button",{className:Ne.a.dropbtn,children:[Object(h.jsx)(m.a,{icon:e.icon}),Object(h.jsx)("span",{className:Ne.a.dropdownText,children:e.label})]}),Object(h.jsx)("div",{className:Ne.a.dropdownContent,style:{minWidth:e.minWidth},children:e.children})]})})),Ce=n(34),Re=n.n(Ce);var Ie=Object(s.b)(null,(function(e){return{applyFileProject:function(t){return e(F(t))}}}))((function(e){var t=Object(c.useState)(!1),n=Object(le.a)(t,2),r=n[0],a=n[1],o=function(){return a(!1)},i=function(){var t=Object(k.a)(S.a.mark((function t(){var n;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.srcJson);case 2:return n=t.sent,t.t0=e,t.next=6,n.json();case 6:t.t1=t.sent,t.t0.applyFileProject.call(t.t0,t.t1),o();case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),l=Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("p",{children:"\u041d\u0435\u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0431\u0443\u0434\u0443\u0442 \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u044b"}),Object(h.jsx)("p",{children:"\u0412\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c ?"})]}),u=Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:i,children:"\u0414\u0430"}),Object(h.jsx)("button",{onClick:o,children:"\u041d\u0435\u0442"})]}),s=Object(c.useRef)(null);return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:Re.a.preview,onClick:function(){return a(!0)},children:[Object(h.jsx)("img",{src:e.srcImg,alt:"",ref:s,className:Re.a.img}),Object(h.jsx)("p",{children:e.name})]}),Object(h.jsx)(fe,{visible:r,title:"\u041f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430",content:l,footer:u,onClose:o})]})}));var Fe=Object(s.b)(null,(function(e){return{undo:function(){return e({type:"UNDO"})},redo:function(){return e({type:"REDO"})},applyFileProject:function(t){return e(F(t))}}}))((function(e){var t=Object(c.useRef)(null),n=Object(c.useRef)(null);!function(e,t,n,r){Object(c.useEffect)((function(){var c=e.current,a=t.current;function o(){n()}function i(){r()}function l(e){"KeyZ"===e.code&&(e.ctrlKey||e.metaKey)&&n(),"KeyY"===e.code&&(e.ctrlKey||e.metaKey)&&r()}return I(c).addEventListener("click",o),I(a).addEventListener("click",i),document.addEventListener("keydown",l),function(){c&&c.removeEventListener("click",o),a&&a.removeEventListener("click",i),document.removeEventListener("keydown",l)}}),[e,t,n,r])}(t,n,e.undo,e.redo);var r,a=Object(c.useRef)(null),o=Object(c.useRef)(null);!function(e,t){Object(c.useEffect)((function(){var n=e.current;function r(){return c.apply(this,arguments)}function c(){return(c=Object(k.a)(S.a.mark((function e(){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=15;break}if(r=n.files,e.prev=2,!r){e.next=9;break}return e.t0=t,e.next=7,N(r[0]);case 7:e.t1=e.sent,(0,e.t0)(e.t1);case 9:e.next=14;break;case 11:e.prev=11,e.t2=e.catch(2),alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0438\u043c\u043f\u043e\u0440\u0442\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0439 \u0444\u0430\u0438\u043b \u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443");case 14:n.value="";case 15:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}return I(n).addEventListener("change",r),function(){n&&n.removeEventListener("change",r)}}),[e,t])}(a,e.applyFileProject),r=o,Object(c.useEffect)((function(){var e=r.current;function t(){var e=ie.getState(),t=JSON.stringify(Object(B.a)(Object(B.a)({},e),{},{selectBlock:null,history:{listState:[e.canvas],currentIndex:0}})),n=new Blob([t],{type:"application/json"}),r=document.createElement("a");r.href=URL.createObjectURL(n),r.download="\u041d\u043e\u0432\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442.json",r.click()}return I(e).addEventListener("click",t),function(){e&&e.removeEventListener("click",t)}}),[r]);var i=Object.values(D),l=[];return i.forEach((function(e,t){l.push(Object(h.jsx)(Ie,{name:e.name,srcImg:e.preview,srcJson:e.json},t))})),Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("nav",{className:v.a.navbar,children:[Object(h.jsx)(be,{}),Object(h.jsx)(T,{label:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442",icon:j.h,ref:a}),Object(h.jsx)(x,{label:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442",icon:j.g,ref:o,onClick:null}),Object(h.jsx)(ke,{}),Object(h.jsx)("div",{children:Object(h.jsx)(Be,{minWidth:450,label:"\u0428\u0430\u0431\u043b\u043e\u043d\u044b",icon:j.d,children:l})}),Object(h.jsx)(x,{label:"",icon:j.s,ref:t,onClick:null}),Object(h.jsx)(x,{label:"",icon:j.m,ref:n,onClick:null})]})})}));var Ae=Object(s.b)()((function(){return Object(h.jsxs)("header",{className:f.a.header,children:[Object(h.jsx)("div",{className:f.a.mainLabel,children:"Card Maker"}),Object(h.jsx)(Fe,{})]})})),De=n(46),Me=n.n(De),Ke=n(15),Pe=n.n(Ke);function ze(e,t,n,r){Object(c.useEffect)((function(){var c=t.current,a=!1;function o(){a=!0,ie.getState().selectBlock!==e&&setTimeout((function(){n(e)}))}function i(t){var n=t.defaultPrevented,o=ie.getState().selectBlock===e;n||!o||t.target===c||a||r(),a=!1}return document.addEventListener("click",i),I(c).addEventListener("mousedown",o),function(){c&&c.removeEventListener("mousedown",o),document.removeEventListener("click",i)}}),[e,t,n,r])}function Ue(e,t,n){Object(c.useEffect)((function(){var r,c,a=e.current;function o(e){r={x:e.pageX,y:e.pageY},document.addEventListener("mousemove",i),document.addEventListener("mouseup",l)}function i(e){if(!e.defaultPrevented){e.preventDefault();var n={x:e.pageX-r.x,y:e.pageY-r.y};c={x:t.x+n.x,y:t.y+n.y},I(a).style.left="".concat(c.x,"px"),I(a).style.top="".concat(c.y,"px")}}function l(){c&&n(c.x,c.y),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",l)}return a&&a.addEventListener("mousedown",o),function(){a&&a.removeEventListener("mousedown",o)}}),[e,t,n])}function Xe(e,t,n,r,a,o,i,l,u){Object(c.useEffect)((function(){var c,s,d=i.current,f=n.current,b=r.current,v=a.current,j=o.current;function _(e){switch(e.preventDefault(),e.target){case f:s="LT";break;case b:s="RT";break;case v:s="LB";break;case j:s="RB"}c={x:e.pageX+(5-e.offsetX),y:e.pageY+(5-e.offsetY)},document.addEventListener("mousemove",g),document.addEventListener("mouseup",y)}var p,m=u.width,h=u.height,O=u.width,x=u.height;function g(e){e.preventDefault();var t={x:e.pageX-c.x,y:e.pageY-c.y},n={x:0,y:0};switch(s){case"LT":var r=E({x:-t.x,y:-t.y},O,x),a=Object(le.a)(r,2);m=a[0],h=a[1],n={x:u.width-m,y:u.height-h};break;case"RT":var o=E({x:t.x,y:-t.y},O,x),i=Object(le.a)(o,2);m=i[0],h=i[1],n={x:0,y:u.height-h};break;case"LB":var f=E({x:-t.x,y:t.y},O,x),b=Object(le.a)(f,2);m=b[0],h=b[1],n={x:u.width-m,y:0};break;case"RB":var v=E(t,O,x),j=Object(le.a)(v,2);m=j[0],h=j[1]}I(d).style.width="".concat(m,"px"),I(d).style.height="".concat(h,"px"),p={x:l.x+n.x,y:l.y+n.y},I(d).style.left="".concat(p.x,"px"),I(d).style.top="".concat(p.y,"px"),O=m,x=h}function E(e,t,n){return e.x/t<e.y/n?(h=u.height+e.y,m=_e(t,n,h=h<20?20:h)):(m=u.width+e.x,h=pe(t,n,m=m<20?20:m)),[m,h]}function y(){e(m,h),p&&t(p.x,p.y),document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",y)}return I(f).addEventListener("mousedown",_),I(b).addEventListener("mousedown",_),I(v).addEventListener("mousedown",_),I(j).addEventListener("mousedown",_),function(){f&&f.removeEventListener("mousedown",_),b&&b.removeEventListener("mousedown",_),v&&v.removeEventListener("mousedown",_),j&&j.removeEventListener("mousedown",_)}}),[e,t,n,r,a,o,i,l,u])}function He(e){return{type:"SET_SELECTED_BLOCK",id:e}}function Ge(e,t){return{type:"SET_SIZE_BLOCK",id:ie.getState().selectBlock,width:e,height:t}}function Ye(){return{type:"DELETE_BLOCK",id:ie.getState().selectBlock}}function We(e,t){return{type:"SET_POSITION_BLOCK",id:ie.getState().selectBlock,x:e,y:t}}var qe=Object(s.b)((function(e){return{selectBlock:e.selectBlock}}),(function(e){return{setPositionBlock:function(t,n){return e(We(t,n))},setSizeBlock:function(t,n){return e(Ge(t,n))},setSelectedBlock:function(t){return e(He(t))},resetSelectedBlock:function(){return e({type:"RESET_SELECTED_BLOCK"})}}}))((function(e){var t=e.img,n="";t.src&&(n=t.src);var r=function(e){return{width:e.width,height:e.height,left:e.x,top:e.y}}(t),a=Object(c.useRef)(null),o=Object(c.useRef)(null),i=Object(c.useRef)(null),l=Object(c.useRef)(null),u=Object(c.useRef)(null);ze(t.id,a,e.setSelectedBlock,e.resetSelectedBlock),Ue(a,{x:t.x,y:t.y},e.setPositionBlock),Xe(e.setSizeBlock,e.setPositionBlock,o,i,l,u,a,{x:t.x,y:t.y},{width:t.width,height:t.height});var s=t.id===e.selectBlock?Pe.a.selected:"";return Object(h.jsxs)("div",{className:"".concat(Pe.a.block," ").concat(s),style:r,ref:a,onDragStart:function(e){return e.preventDefault()},children:[Object(h.jsx)("div",{className:Pe.a.pointTopLeft,ref:o}),Object(h.jsx)("div",{className:Pe.a.pointTopRight,ref:i}),Object(h.jsx)("img",{src:n,alt:"",className:Pe.a.img}),Object(h.jsx)("div",{className:Pe.a.pointBottomLeft,ref:l}),Object(h.jsx)("div",{className:Pe.a.pointBottomRight,ref:u})]})})),Je=n(35),Ze=n.n(Je);function Ve(e){return{type:"SET_BOLD_TEXT",id:ie.getState().selectBlock,isBold:e}}function Qe(e){return{type:"SET_ITALIC_TEXT",id:ie.getState().selectBlock,isItalic:e}}function $e(e){return{type:"SET_UNDERLINE_TEXT",id:ie.getState().selectBlock,isUnderline:e}}var et=Object(s.b)((function(e){return{selectBlock:e.selectBlock,color:e.viewModel.text.tempColor,size:e.viewModel.text.tempSize}}),(function(e){return{setPositionBlock:function(t,n){return e(We(t,n))},setSelectedBlock:function(t){return e(He(t))},resetSelectedBlock:function(){return e({type:"RESET_SELECTED_BLOCK"})},setTextInTextBlock:function(t){return e(function(e){return{type:"SET_TEXT_IN_TEXT_BLOCK",id:ie.getState().selectBlock,text:e}}(t))},clickOnText:function(){return e({type:"CLICK_ON_TEXT",id:ie.getState().selectBlock})},deleteBlock:function(){return e(Ye())},setBoldText:function(t){return e(Ve(t))},setItalicText:function(t){return e(Qe(t))},setUnderlineText:function(t){return e($e(t))}}}))((function(e){var t,n,r,a,o,i,l,u,s,d,f=e.text,b=Object(c.useRef)(null);ze(f.id,b,e.setSelectedBlock,e.resetSelectedBlock),Ue(b,{x:f.x,y:f.y},e.setPositionBlock),t=b,n=f.bold,r=f.italic,a=f.underline,o=e.setTextInTextBlock,i=e.clickOnText,l=e.deleteBlock,u=e.setBoldText,s=e.setItalicText,d=e.setUnderlineText,Object(c.useEffect)((function(){var e=t.current;function c(){setTimeout((function(){i()}))}function f(){I(e).setAttribute("contenteditable","true"),I(e).focus()}function b(){e&&(e.setAttribute("contenteditable","false"),"<div><br></div>"===e.innerHTML?l():o(e.innerHTML))}function v(t){"true"===I(e).getAttribute("contenteditable")&&t.stopImmediatePropagation()}function j(t){"Escape"===t.code&&"true"===I(e).getAttribute("contenteditable")&&(I(e).setAttribute("contenteditable","false"),o(I(e).innerHTML)),"Delete"===t.code&&(t.preventDefault(),document.execCommand("forwardDelete")),"KeyB"===t.code&&(t.ctrlKey||t.metaKey)&&u(!n),"KeyI"===t.code&&(t.ctrlKey||t.metaKey)&&s(!r),"KeyU"===t.code&&(t.ctrlKey||t.metaKey)&&d(!a)}function _(e){e.preventDefault();var t=e.clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,t)}function p(){e&&("<"===e.innerHTML[0]&&"<br>"!==e.innerHTML||(e.innerHTML="<div>".concat(e.innerText,"<br></div>"),e.focus()))}return I(e).addEventListener("mousedown",c),I(e).addEventListener("dblclick",f),I(e).addEventListener("blur",b),I(e).addEventListener("keydown",j),I(e).addEventListener("paste",_),I(e).addEventListener("input",p),document.addEventListener("mousemove",v),function(){e&&(e.removeEventListener("mousedown",c),e.removeEventListener("dblclick",f),e.addEventListener("blur",b),e.removeEventListener("keydown",j),e.removeEventListener("paste",_),e.removeEventListener("input",p)),document.removeEventListener("mousemove",v)}}),[t,n,r,a,o,i,l,u,s,d]);var v=f.id===e.selectBlock?Ze.a.selected:"",j=function(e){return{left:e.x,top:e.y,color:e.color,fontSize:e.size,fontWeight:e.bold?700:400,textDecoration:e.underline?"underline":"none",fontStyle:e.italic?"italic":"normal",fontFamily:e.fontFamily}}(f);return j=Object(B.a)(Object(B.a)({},j),{},{color:e.color&&""!==v?e.color:j.color,fontSize:e.size&&""!==v?e.size:j.fontSize}),Object(h.jsx)("div",{style:j,contentEditable:!1,suppressContentEditableWarning:!0,onDragStart:function(e){return e.preventDefault()},ref:b,className:"".concat(Ze.a.block," ").concat(v),dangerouslySetInnerHTML:{__html:f.text}})})),tt=n(16),nt=n.n(tt);var rt=Object(s.b)((function(e){return{selectBlock:e.selectBlock}}),(function(e){return{setPositionBlock:function(t,n){return e(We(t,n))},setSizeBlock:function(t,n){return e(Ge(t,n))},setSelectedBlock:function(t){return e(He(t))},resetSelectedBlock:function(){return e({type:"RESET_SELECTED_BLOCK"})}}}))((function(e){var t=e.artObj,n=Object(c.useRef)(null),r=function(e){return{width:e.width,height:e.height,left:e.x,top:e.y}}(t),a=Object(c.useRef)(null),o=Object(c.useRef)(null),i=Object(c.useRef)(null),l=Object(c.useRef)(null);ze(t.id,n,e.setSelectedBlock,e.resetSelectedBlock),Ue(n,{x:t.x,y:t.y},e.setPositionBlock),Xe(e.setSizeBlock,e.setPositionBlock,a,o,i,l,n,{x:t.x,y:t.y},{width:t.width,height:t.height});var u=t.id===e.selectBlock?nt.a.selected:"";return Object(h.jsxs)("div",{className:"".concat(nt.a.block," ").concat(u),style:r,ref:n,onDragStart:function(e){return e.preventDefault()},children:[Object(h.jsx)("div",{className:nt.a.pointTopLeft,ref:a}),Object(h.jsx)("div",{className:nt.a.pointTopRight,ref:o}),Object(h.jsx)("img",{src:t.src,alt:"",className:nt.a.img}),Object(h.jsx)("div",{className:nt.a.pointBottomLeft,ref:i}),Object(h.jsx)("div",{className:nt.a.pointBottomRight,ref:l})]})})),ct=n(47),at=n.n(ct);var ot=Object(s.b)((function(e){return{canvas:e.canvas,filter:e.viewModel.filter}}))((function(e){var t=e.canvas,n="",r=0;e.filter?(n=e.filter.color,r=e.filter.opacity):(n=t.filter.color,r=t.filter.opacity);var c={background:n,opacity:r};return Object(h.jsx)("div",{className:at.a.filter,style:c,id:"filter"})})),it=n(48),lt=n.n(it);var ut=Object(s.b)((function(e){return{deleteArea:e.canvas.deleteArea}}))((function(e){if(e.deleteArea===[])return null;var t=[];return e.deleteArea.forEach((function(e,n){var r={width:e.width,height:e.height,left:e.x,top:e.y};t.push(Object(h.jsx)("div",{className:lt.a.deleteArea,style:r},n))})),Object(h.jsx)(h.Fragment,{children:t})})),st=n(49),dt=n.n(st);function ft(e,t){return{type:"SET_CANVAS_SIZE",width:e,height:t}}function bt(e,t,n){return{type:"SET_BACKGROUND_IMG",src:e,width:t,height:n}}function vt(e,t,n){return{type:"INPUT_BACKGROUND_IMG",src:e,width:t,height:n}}function jt(e,t,n,r){return{type:"AREA_SELECTION",x:e,y:t,width:n,height:r}}var _t=Object(c.forwardRef)((function(e,t){var n=Object(c.useRef)(null);if(function(e,t,n,r){Object(c.useEffect)((function(){var c,a,o=e.current,i=t.current,l=document.createElement("div");function u(e){e.defaultPrevented||e.target!==o||(c={x:e.pageX,y:e.pageY},a={x:e.offsetX,y:e.offsetY},document.addEventListener("mousemove",s),document.addEventListener("mouseup",d),l.style.border="1px dashed red",l.style.width="0px",l.style.height="0px",l.style.left="".concat(e.offsetX,"px"),l.style.top="".concat(e.offsetY,"px"),o&&o.appendChild(l))}function s(e){if(!e.defaultPrevented){var t={x:Math.abs(e.pageX-c.x),y:Math.abs(e.pageY-c.y)},n={x:0,y:0};c.x>=e.pageX&&c.y>=e.pageY?n={x:-t.x,y:-t.y}:c.x<=e.pageX&&c.y>=e.pageY?n={x:0,y:-t.y}:c.x>=e.pageX&&c.y<=e.pageY&&(n={x:-t.x,y:0}),l.style.width="".concat(t.x,"px"),l.style.height="".concat(t.y,"px"),l.style.left="".concat(a.x+n.x,"px"),l.style.top="".concat(a.y+n.y,"px")}}function d(){l.offsetWidth>2&&l.offsetHeight>2&&n(l.offsetLeft,l.offsetTop,l.offsetWidth,l.offsetHeight),l.remove(),document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",d)}function f(e){!e.defaultPrevented&&t.current&&(e.preventDefault(),t.current!==e.target&&r())}function b(e){e.preventDefault()}return l.style.position="absolute",l.style.zIndex="1",l.style.pointerEvents="none",I(o).addEventListener("mousedown",u),i&&i.addEventListener("mousedown",b),document.addEventListener("mousedown",f),function(){o&&o.removeEventListener("mousedown",u),i&&i.removeEventListener("mousedown",b),document.removeEventListener("mousedown",f)}}),[e,t,n,r])}(t,n,e.areaSelection,e.resetAreaSelection),Ue(n,{x:e.area?e.area.x:0,y:e.area?e.area.y:0},e.setPositionAreaSelection),!e.area)return null;var r={left:e.area.x,top:e.area.y,width:e.area.width-2,height:e.area.height-2};return Object(h.jsx)(h.Fragment,{children:e.area&&Object(h.jsx)("div",{className:dt.a.areaSelection,style:r,ref:n})})})),pt=Object(s.b)((function(e){return{area:e.viewModel.areaSelection}}),(function(e){return{areaSelection:function(t,n,r,c){return e(jt(t,n,r,c))},resetAreaSelection:function(){return e({type:"RESET_AREA_SELECTION"})},setPositionAreaSelection:function(t,n){return e(function(e,t){return{type:"SET_POSITION_AREA_SELECTION",x:e,y:t}}(t,n))}}}),null,{forwardRef:!0})(_t);var mt=Object(s.b)((function(e){return{canvas:e.canvas,area:e.viewModel.areaSelection,bgColor:e.viewModel.bgColor,canvasSize:e.viewModel.canvasSize}}),(function(e){return{areaSelection:function(t,n,r,c){return e(jt(t,n,r,c))},resetAreaSelection:function(){return e({type:"RESET_AREA_SELECTION"})}}}))((function(e){var t=function(e,t,n){var r="#fff",c="";t?r=t:e.background.color?r=e.background.color:e.background.src&&(c="url(".concat(e.background.src,")"));var a=0,o=0;n?(a=n.width,o=n.height):(a=e.width,o=e.height);var i=e.background.width,l=e.background.height,u=null;i&&l&&(u=me(i,l,a,o));return{width:a,height:o,backgroundColor:r,backgroundImage:c,backgroundSize:u?"".concat(u.width,"px ").concat(u.height,"px"):""}}(e.canvas,e.bgColor,e.canvasSize),n=function(e){var t=[];return e.forEach((function(e){switch(e.type){case r.text:t.push(Object(h.jsx)(et,{text:e},e.id));break;case r.img:t.push(Object(h.jsx)(qe,{img:e},e.id));break;case r.artObj:t.push(Object(h.jsx)(rt,{artObj:e},e.id))}})),t}(e.canvas.listBlock),a=Object(c.useRef)(null);return Object(h.jsxs)("div",{id:"canvas",className:Me.a.canvas,style:t,ref:a,children:[Object(h.jsx)(pt,{ref:a}),Object(h.jsx)(ut,{}),Object(h.jsx)(ot,{}),n]})}));var ht=n(50),Ot=n.n(ht),xt=n(23),gt=n.n(xt),Et=n(36),yt=n.n(Et);var Tt=Object(s.b)()((function(e){var t=Object(c.useRef)(null);return function(e,t,n,r){Object(c.useEffect)((function(){var c=e.current;function a(e){null!==t?(n(!t),e.preventDefault()):r||n(!0)}return I(c).addEventListener("click",a),function(){c&&c.removeEventListener("click",a)}}),[e,n,t,r])}(t,e.enabled,e.modifyFn,e.param),Object(h.jsx)("button",{className:"".concat(yt.a.button," ").concat(e.enabled?yt.a.active:""),ref:t,children:Object(h.jsx)(m.a,{icon:e.icon})})})),wt=n(51),St=n.n(wt);var kt=Object(s.b)((function(e){return{color:e.viewModel.text.color}}),(function(e){return{setColorText:function(t){return e(function(e){return{type:"SET_COLOR_TEXT",id:ie.getState().selectBlock,color:e}}(t))},inputColorText:function(t){return e(function(e){return{type:"INPUT_COLOR_TEXT",color:e}}(t))}}}))((function(e){var t=Object(c.useRef)(null);return function(e,t,n,r){Object(c.useEffect)((function(){var c=t.current;function a(e){var t=e.target;r(t.value)}function o(e){var t=e.target;n(t.value)}function i(e){e.stopImmediatePropagation()}return I(c).value=e||"#000000",I(c).addEventListener("input",a),I(c).addEventListener("change",o),I(c).addEventListener("click",i),function(){c&&(c.removeEventListener("input",a),c.removeEventListener("change",o),c.removeEventListener("click",i))}}),[e,t,n,r])}(e.color,t,e.setColorText,e.inputColorText),Object(h.jsx)("input",{type:"color",ref:t,className:St.a.input})})),Lt=n(52),Nt=n.n(Lt);var Bt=Object(s.b)((function(e){return{size:e.viewModel.text.size,tempSize:e.viewModel.text.tempSize}}),(function(e){return{setSizeText:function(t){return e(function(e){return{type:"SET_SIZE_TEXT",id:ie.getState().selectBlock,size:e}}(t))},inputSizeText:function(t){return e(function(e){return{type:"INPUT_SIZE_TEXT",size:e}}(t))}}}))((function(e){var t,n,r,a,o=Object(c.useRef)(null);return t=e.size,n=o,r=e.setSizeText,a=e.inputSizeText,Object(c.useEffect)((function(){var e=n.current;function c(e){var t=e.target;Number(t.value)>10?a(Number(t.value)):a(10)}function o(e){var t=e.target;Number(t.value)>10?r(Number(t.value)):r(10)}function i(e){e.preventDefault()}return I(e).value=t?String(t):"".concat(10),I(e).addEventListener("input",c),I(e).addEventListener("blur",o),I(e).addEventListener("click",i),function(){e&&(e.removeEventListener("input",c),e.removeEventListener("blur",o),e.removeEventListener("click",i))}}),[t,n,r,a]),Object(h.jsx)("input",{type:"number",ref:o,className:Nt.a.input__number,min:10,max:150,step:1})})),Ct=n(10),Rt=n.n(Ct);var It=Object(s.b)((function(e){return{fontFamily:e.viewModel.text.fontFamily}}),(function(e){return{setFontFamilyText:function(t){return e(function(e){return{type:"SET_FONT_FAMILY_TEXT",id:ie.getState().selectBlock,fontFamily:e}}(t))}}}))((function(e){var t=Object(c.useRef)(null);!function(e,t){Object(c.useEffect)((function(){var n=e.current;function r(e){e.preventDefault()}function c(e){var n=e.target;t(n.value)}return I(n).addEventListener("click",r),I(n).addEventListener("change",c),function(){n&&(n.removeEventListener("click",r),n.removeEventListener("change",c))}}),[e,t])}(t,e.setFontFamilyText);var n=[{value:"Roboto Slab",class:Rt.a.robotoSlab},{value:"Fantazyor",class:Rt.a.fantazyor},{value:"Piroucyrillic",class:Rt.a.piroucyrillic},{value:"Phenomena",class:Rt.a.phenomena},{value:"Sunday",class:Rt.a.sunday},{value:"Kurale",class:Rt.a.kurale},{value:"Sensei",class:Rt.a.sensei},{value:"Borsok",class:Rt.a.borsok},{value:"Summer",class:Rt.a.summer},{value:"Underdog",class:Rt.a.underdog},{value:"Montserrat",class:Rt.a.montserrat},{value:"OpenSans",class:Rt.a.openSans},{value:"Comfortaa",class:Rt.a.comfortaa},{value:"Rubik",class:Rt.a.rubik},{value:"Marta",class:Rt.a.marta}].map((function(e,t){return Object(h.jsx)("option",{className:e.class,value:e.value,children:e.value},t)})),r=n[0].props.className;return n=n.map((function(t){return t.props.value===e.fontFamily?(r=t.props.className,Object(B.a)(Object(B.a)({},t),{},{props:Object(B.a)(Object(B.a)({},t.props),{},{selected:!0})})):t})),Object(h.jsx)("select",{name:"",id:"",className:"".concat(Rt.a.select," ").concat(r),ref:t,children:n})}));var Ft=Object(s.b)((function(e){return{bold:e.viewModel.text.bold,italic:e.viewModel.text.italic,underline:e.viewModel.text.underline}}),(function(e){return{createTextBlock:function(){return e({type:"CREATE_TEXT_BLOCK",x:ie.getState().canvas.width/2,y:ie.getState().canvas.height/2})},setBoldText:function(t){return e(Ve(t))},setItalicText:function(t){return e(Qe(t))},setUnderlineText:function(t){return e($e(t))}}}))((function(e){return Object(h.jsxs)("div",{className:gt.a.toolbar,children:[Object(h.jsxs)("div",{className:gt.a.toolbar__row,children:[Object(h.jsx)(It,{}),Object(h.jsx)(Tt,{icon:j.i,enabled:null,modifyFn:e.createTextBlock,param:!1})]}),Object(h.jsxs)("div",{className:gt.a.toolbar__row,children:[Object(h.jsx)(Bt,{}),Object(h.jsx)(Tt,{icon:j.c,enabled:e.bold,modifyFn:e.setBoldText,param:!0}),Object(h.jsx)(Tt,{icon:j.l,enabled:e.italic,modifyFn:e.setItalicText,param:!0}),Object(h.jsx)(Tt,{icon:j.r,enabled:e.underline,modifyFn:e.setUnderlineText,param:!0}),Object(h.jsx)("div",{className:gt.a.colorPickerBox,children:Object(h.jsx)(kt,{})})]})]})})),At=n(37),Dt=n.n(At),Mt=n(24),Kt=n.n(Mt),Pt=Object(c.forwardRef)((function(e,t){return Object(h.jsxs)("button",{className:Kt.a.button,children:[Object(h.jsx)("label",{htmlFor:"input-file-img",className:Kt.a.icon,children:Object(h.jsx)(m.a,{icon:e.icon})}),Object(h.jsx)("input",{className:Kt.a.inputFile,type:"file",accept:".png,.jpg,.jfif,.jpe,.jpeg",ref:t,id:"input-file-img"}),Object(h.jsx)("label",{className:Kt.a.buttonText,htmlFor:"input-file-img",children:e.label})]})})),zt=Object(s.b)(null,null,null,{forwardRef:!0})(Pt),Ut=n(53),Xt=n.n(Ut);var Ht=Object(s.b)(null,(function(e){return{createArtObjBlock:function(t){return e(function(e){return{type:"CREATE_ART_OBJ_BLOCK",src:e,x:ie.getState().canvas.width/2-75,y:ie.getState().canvas.height/2-75}}(t))}}}))((function(e){var t,n,r,a=Object(c.useRef)(null);return t=a,n=e.src,r=e.createArtObjBlock,Object(c.useEffect)((function(){var e=t.current;function c(){r(n)}return I(e).addEventListener("click",c),function(){e&&e.removeEventListener("click",c)}}),[t,n,r]),Object(h.jsx)("img",{src:e.src,alt:"",ref:a,className:Xt.a.sticker})}));function Gt(e,t,n){return{type:"CREATE_IMG_BLOCK",src:e,width:t,height:n,x:ie.getState().canvas.width/2-t/2,y:ie.getState().canvas.height/2-n/2}}var Yt=n(38),Wt=n.n(Yt),qt=n(12),Jt=n.n(qt);function Zt(e){return Vt.apply(this,arguments)}function Vt(){return Vt=Object(k.a)(S.a.mark((function e(t){var n,r,c=arguments;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:null,""===t.split(" ").join("")){e.next=8;break}return e.next=4,fetch(n||"https://api.pexels.com/v1/search?per_page=20&locale=ru-RU&query="+t,{headers:{"Content-Type":"application/json","User-Agent":"Pexels/JavaScript",Authorization:"563492ad6f91700001000001cbbc3b7fe6c14a5faa262d8d356ad945"}});case 4:return r=e.sent,e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)}))),Vt.apply(this,arguments)}var Qt=Object(s.b)()((function(e){var t=Object(c.useRef)(null);return e.useImg(t,e.baseSrc,e.setModal),Object(h.jsx)("img",{src:e.src,width:375,loading:"lazy",ref:t,alt:""},e.src)})),$t=n(54),en=n.n($t),tn=Object(c.forwardRef)((function(e,t){return Object(h.jsx)("div",{className:en.a.cssloadSpinBox,ref:t})})),nn=Object(s.b)(null,null,null,{forwardRef:!0})(tn),rn=Object(s.b)()((function(e){var t=e.visible,n=void 0!==t&&t,r=e.setModal,a=e.useImg,o=e.onClose;Object(c.useEffect)((function(){var e=function(e){if("Escape"===e.key)o()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[o]);var i=Object(c.useRef)(null),l=Object(c.useRef)(null),u=Object(c.useRef)(null),s=Object(c.useRef)(null),d=Object(c.useRef)(null),f=Object(c.useRef)(null),b=Object(c.useState)([]),v=Object(le.a)(b,2),_=v[0],p=v[1],O=Object(c.useState)(null),x=Object(le.a)(O,2),g=x[0],E=x[1],y=Object(c.useState)(null),T=Object(le.a)(y,2),w=T[0],L=T[1];if(function(e,t,n,r,a,o,i,l,u,s,d){Object(c.useEffect)((function(){var c=e.current,f=t.current,b=n.current;function v(){return j.apply(this,arguments)}function j(){return(j=Object(k.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.current){e.next=18;break}return a.current&&(a.current.style.display="block"),e.prev=2,e.next=5,Zt(r.current.value);case 5:if(m((t=e.sent).photos),t.next_page?s(t.next_page):l&&s(null),u&&d(null),t.photos.length>0&&o.current&&(o.current.innerText=""),0!==t.photos.length||!o.current){e.next=12;break}throw new Error;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),o.current&&(o.current.innerText="\u041f\u043e \u0434\u0430\u043d\u043d\u043e\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e");case 17:a.current&&(a.current.style.display="none");case 18:case"end":return e.stop()}}),e,null,[[2,14]])})))).apply(this,arguments)}function _(e){return p.apply(this,arguments)}function p(){return(p=Object(k.a)(S.a.mark((function e(n){var c,i;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c=n.target===t.current?l:u,!r.current){e.next=16;break}return a.current&&(a.current.style.display="block"),e.prev=3,e.next=6,Zt(r.current.value,c);case 6:i=e.sent,a.current&&(a.current.style.display="none"),m(i.photos),i.next_page?s(i.next_page):l&&s(null),i.prev_page?d(i.prev_page):u&&d(null),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),o.current&&(o.current.innerText="\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0435\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u0430");case 16:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function m(e){var t,n=[],r=Object(ve.a)(e);try{for(r.s();!(t=r.n()).done;){var c=t.value;n.push(c.src.large)}}catch(a){r.e(a)}finally{r.f()}i(n)}return l&&t.current?t.current.style.visibility="visible":t.current&&(t.current.style.visibility="hidden"),u&&n.current?n.current.style.visibility="visible":n.current&&(n.current.style.visibility="hidden"),c&&c.addEventListener("click",v),f&&f.addEventListener("click",_),b&&b.addEventListener("click",_),function(){c&&c.removeEventListener("click",v),f&&f.removeEventListener("click",_),b&&b.removeEventListener("click",_)}}))}(i,l,u,s,d,f,p,g,w,E,L),Object(c.useEffect)((function(){n||(p([]),E(null),L(null))}),[n]),!n)return null;var N=Object(K.a)(_),B=N.splice(N.length/2),C=function(){o(),p([]),E(null),L(null)};return Object(h.jsx)("div",{className:Jt.a.modal,onClick:C,children:Object(h.jsxs)("div",{className:Jt.a.modalDialog,onClick:function(e){return e.stopPropagation()},children:[Object(h.jsxs)("div",{className:Jt.a.modalHeader,children:[Object(h.jsx)("h3",{className:Jt.a.modalTitle,children:"\u041f\u043e\u0438\u0441\u043a \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0439"}),Object(h.jsx)("span",{className:Jt.a.modalClose,onClick:C,children:Object(h.jsx)(m.a,{icon:j.p})})]}),Object(h.jsxs)("div",{className:Jt.a.modalHeader,children:[Object(h.jsxs)("div",{className:Jt.a.searchBox,children:[Object(h.jsx)("input",{type:"text",ref:s}),Object(h.jsx)("button",{ref:i,children:"\u041f\u043e\u0438\u0441\u043a"}),Object(h.jsx)(nn,{ref:d})]}),Object(h.jsxs)("div",{className:Jt.a.navBox,children:[Object(h.jsx)("button",{ref:u,children:"\u041d\u0430\u0437\u0430\u0434"}),Object(h.jsx)("button",{ref:l,children:"\u0412\u043f\u0435\u0440\u0435\u0434"})]})]}),Object(h.jsx)("div",{className:Jt.a.modalBody,children:Object(h.jsxs)("div",{className:Jt.a.modalContent,children:[Object(h.jsx)("div",{className:Jt.a.information,ref:f,children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0438\u0441\u043a\u043e\u0432\u043e\u0439 \u0437\u0430\u043f\u0440\u043e\u0441"}),Object(h.jsx)("div",{style:{display:"inline-block"},children:N.map((function(e){return Object(h.jsx)(Qt,{setModal:r,useImg:a,src:e,baseSrc:e},e)}))}),Object(h.jsx)("div",{style:{display:"inline-block"},children:B.map((function(e){return Object(h.jsx)(Qt,{setModal:r,useImg:a,src:e,baseSrc:e},e)}))})]})}),Object(h.jsx)("div",{className:Jt.a.modalFooter})]})})}));function cn(e,t,n){Object(c.useEffect)((function(){var r=e.current;function c(){return a.apply(this,arguments)}function a(){return(a=Object(k.a)(S.a.mark((function e(){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new Image).src=t,e.next=4,r.decode();case 4:ie.dispatch(Gt(r.src,r.width,r.height)),n(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r&&r.addEventListener("click",c),function(){r&&r.removeEventListener("click",c)}}),[e,t,n])}var an=Object(c.forwardRef)((function(e,t){var n=Object(c.useState)(!1),r=Object(le.a)(n,2),a=r[0],o=r[1];return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("button",{onClick:function(){return o(!0)},ref:t,className:Wt.a.button,children:[Object(h.jsx)(m.a,{icon:e.icon}),Object(h.jsx)("span",{className:Wt.a.buttonText,children:e.label})]}),Object(h.jsx)(rn,{visible:a,onClose:function(){return o(!1)},setModal:o,useImg:cn})]})})),on=Object(s.b)(null,(function(e){return{createImgBlock:function(t,n,r){return e(Gt(t,n,r))}}}),null,{forwardRef:!0})(an);var ln=Object(s.b)(null,(function(e){return{createImgBlock:function(t,n,r){return e(Gt(t,n,r))}}}))((function(e){var t=Object.values(A),n=[];t.forEach((function(e,t){n.push(Object(h.jsx)(Ht,{src:e},t))}));var r=Object(c.useRef)(null);return function(e,t){Object(c.useEffect)((function(){var n=e.current;function r(){return c.apply(this,arguments)}function c(){return(c=Object(k.a)(S.a.mark((function e(){var r,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=14;break}if(r=n.files,e.prev=2,!r){e.next=8;break}return e.next=6,L(r[0]);case 6:c=e.sent,t(c.src,c.width,c.height);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0438\u043c\u043f\u043e\u0440\u0442\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0439 \u0444\u0430\u0439\u043b \u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443");case 13:n.value="";case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}return I(n).addEventListener("change",r),function(){n&&n.removeEventListener("change",r)}}),[e,t])}(r,e.createImgBlock),Object(h.jsx)("div",{className:Dt.a.toolbar,children:Object(h.jsxs)("div",{className:Dt.a.button_box,children:[Object(h.jsx)(zt,{label:"C \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u0430",icon:j.e,ref:r}),Object(h.jsx)(on,{label:"\u0418\u0437 Pixels",icon:j.j}),Object(h.jsx)(Be,{minWidth:200,label:"\u0421\u0442\u0438\u043a\u0435\u0440\u044b",icon:j.o,children:n})]})})})),un=n(25),sn=n.n(un),dn=n(55),fn=n.n(dn),bn=Object(c.forwardRef)((function(e,t){return Object(h.jsx)("input",{type:"color",ref:t,className:fn.a.input__color})})),vn=Object(s.b)(null,null,null,{forwardRef:!0})(bn);var jn=Object(s.b)((function(e){return{filter:e.canvas.filter}}),(function(e){return{inputFilter:function(t,n){return e(function(e,t){return{type:"INPUT_FILTER",color:e,opacity:t}}(t,n))},setFilter:function(t,n){return e(function(e,t){return{type:"SET_FILTER",color:e,opacity:t}}(t,n))}}}))((function(e){var t=Object(c.useRef)(null),n=Object(c.useRef)(null);return function(e,t,n,r,a){Object(c.useEffect)((function(){var c=e.current,o=t.current;function i(){if(o&&c){var e=c.value,t=Number(o.value);n(e,t)}}function l(){if(o&&c){var e=Number(o.value),t=c.value;r(t,e)}}return I(c).value=a.color,I(o).value=String(a.opacity),I(c).addEventListener("input",i),I(c).addEventListener("change",l),I(o).addEventListener("input",i),I(o).addEventListener("change",l),function(){c&&(c.removeEventListener("input",i),c.removeEventListener("change",l)),o&&(o.removeEventListener("input",i),o.removeEventListener("change",l))}}),[e,t,n,r,a])}(t,n,e.inputFilter,e.setFilter,e.filter),Object(h.jsx)(h.Fragment,{children:Object(h.jsxs)("div",{className:sn.a.toolbar,children:[Object(h.jsxs)("div",{className:sn.a.row,children:[Object(h.jsx)("label",{className:sn.a.label,children:"\u0426\u0432\u0435\u0442 \u0444\u0438\u043b\u044c\u0442\u0440\u0430:"}),Object(h.jsx)(vn,{ref:t})]}),Object(h.jsx)("input",{type:"range",min:"0",max:"0.5",step:"0.025",className:sn.a.inputRange,ref:n})]})})})),_n=n(26),pn=n.n(_n),mn=n(27),hn=n.n(mn);var On=Object(s.b)((function(e){return{viewModelBgImg:e.viewModel.bgImg}}),(function(e){return{inputBackgroundImg:function(t,n,r){return e(vt(t,n,r))},setBackgroundImg:function(t,n,r){return e(bt(t,n,r))},setCanvasSize:function(t,n){return e(ft(t,n))}}}))((function(e){var t,n=Object(c.useRef)(null),r=Object(c.useState)(!1),a=Object(le.a)(r,2),o=a[0],i=a[1],l=function(){return i(!1)};!function(e,t,n,r){Object(c.useEffect)((function(){var c=ie.getState().canvas.width,a=ie.getState().canvas.height,o=e.current;function i(){return l.apply(this,arguments)}function l(){return(l=Object(k.a)(S.a.mark((function e(){var i,l;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=14;break}if(i=o.files,e.prev=2,!i){e.next=8;break}return e.next=6,L(i[0]);case 6:l=e.sent,c<l.width||a<l.height?(n(l.src,l.width,l.height),r(!0)):t(l.src,l.width,l.height);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0438\u043c\u043f\u043e\u0440\u0442\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0439 \u0444\u0430\u0439\u043b \u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443");case 13:o.value="";case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}return I(o).addEventListener("change",i),function(){o&&o.removeEventListener("change",i)}}),[e,t,n,r])}(n,e.setBackgroundImg,e.inputBackgroundImg,i);var u=null!==(t=e.viewModelBgImg)&&void 0!==t?t:{width:0,height:0,src:""},s=Object(h.jsx)("p",{children:"\u0418\u0441\u0445\u043e\u0434\u043d\u043e\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u0440\u0430\u0437\u043c\u0435\u0440\u0430 \u0445\u043e\u043b\u0441\u0442\u0430"}),d=Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){e.setBackgroundImg(u.src,u.width,u.height),e.setCanvasSize(u.width,u.height),l()},children:"\u0420\u0430\u0441\u0442\u044f\u043d\u0443\u0442\u044c \u0445\u043e\u043b\u0441\u0442"}),Object(h.jsx)("button",{onClick:function(){e.setBackgroundImg(u.src,u.width,u.height),l()},children:"\u041e\u0431\u0440\u0435\u0437\u0430\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"}),Object(h.jsx)("button",{onClick:l,children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]});return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)(fe,{visible:o,title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435",content:s,footer:d,onClose:l}),Object(h.jsxs)("button",{className:hn.a.button,children:[Object(h.jsx)("label",{htmlFor:"input-file-bg-img",className:hn.a.icon,children:Object(h.jsx)(m.a,{icon:e.icon})}),Object(h.jsx)("input",{className:hn.a.inputFile,type:"file",accept:".png,.jpg,.jfif,.jpe,.jpeg",id:"input-file-bg-img",ref:n}),Object(h.jsx)("label",{className:hn.a.buttonText,htmlFor:"input-file-bg-img",children:e.label})]})]})}));var xn=n(39),gn=n.n(xn);function En(e,t,n){Object(c.useEffect)((function(){var r=e.current;function c(){return a.apply(this,arguments)}function a(){return(a=Object(k.a)(S.a.mark((function e(){var r;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(r=new Image).src=t,e.next=5,r.decode();case 5:ie.getState().canvas.width<r.width||ie.getState().canvas.height<r.height?(ie.dispatch(vt(r.src,r.width,r.height)),n(!0)):ie.dispatch(bt(r.src,r.width,r.height)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0438\u043c\u043f\u043e\u0440\u0442\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f.");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return r&&r.addEventListener("click",c),function(){r&&r.removeEventListener("click",c)}}),[e,n,t])}var yn=Object(c.forwardRef)((function(e,t){var n,r=Object(c.useState)(!1),a=Object(le.a)(r,2),o=a[0],i=a[1],l=function(){return i(!1)},u=Object(c.useState)(!1),s=Object(le.a)(u,2),d=s[0],f=s[1],b=function(){return f(!1)},v=null!==(n=e.viewModelBgImg)&&void 0!==n?n:{width:0,height:0,src:""},j=Object(h.jsx)("p",{children:"\u0418\u0441\u0445\u043e\u0434\u043d\u043e\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u0440\u0430\u0437\u043c\u0435\u0440\u0430 \u0445\u043e\u043b\u0441\u0442\u0430"}),_=Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("button",{onClick:function(){e.setBackgroundImg(v.src,v.width,v.height),e.setCanvasSize(v.width,v.height),b(),l()},children:"\u0420\u0430\u0441\u0442\u044f\u043d\u0443\u0442\u044c \u0445\u043e\u043b\u0441\u0442"}),Object(h.jsx)("button",{onClick:function(){e.setBackgroundImg(v.src,v.width,v.height),b(),l()},children:"\u041e\u0431\u0440\u0435\u0437\u0430\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"}),Object(h.jsx)("button",{onClick:b,children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]});return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("button",{onClick:function(){return i(!0)},className:gn.a.button,ref:t,children:[Object(h.jsx)(m.a,{icon:e.icon}),Object(h.jsx)("span",{className:gn.a.button_text,children:e.label})]}),Object(h.jsx)(rn,{visible:o,onClose:l,setModal:f,useImg:En}),Object(h.jsx)(fe,{visible:d,title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435",content:j,footer:_,onClose:b})]})})),Tn=Object(s.b)((function(e){return{viewModelBgImg:e.viewModel.bgImg}}),(function(e){return{inputBackgroundImg:function(t,n,r){return e(vt(t,n,r))},setBackgroundImg:function(t,n,r){return e(bt(t,n,r))},setCanvasSize:function(t,n){return e(ft(t,n))}}}),null,{forwardRef:!0})(yn);var wn=Object(s.b)((function(e){return{background:e.canvas.background}}),(function(e){return{resetBackground:function(){return e({type:"RESET_BACKGROUND"})},inputBackgroundColor:function(t){return e(function(e){return{type:"INPUT_BACKGROUND_COLOR",color:e}}(t))},setBackgroundColor:function(t){return e(function(e){return{type:"SET_BACKGROUND_COLOR",color:e}}(t))}}}))((function(e){var t=Object(c.useRef)(null),n=Object(c.useRef)(null);return function(e,t,n,r,a,o){Object(c.useEffect)((function(){var r=a.current,c=o.current;function i(){e()}function l(e){var n=e.target;t(n.value)}function u(e){var t=e.target.value;n(t)}return I(r).addEventListener("input",l),I(r).addEventListener("change",u),I(c).addEventListener("click",i),function(){r&&(r.removeEventListener("input",l),r.removeEventListener("change",u)),c&&c.removeEventListener("click",i)}}),[e,t,n,r,a,o]),Object(c.useEffect)((function(){I(a.current).value=r.color?r.color:"#ffffff"}),[a,r])}(e.resetBackground,e.inputBackgroundColor,e.setBackgroundColor,e.background,t,n),Object(h.jsxs)("div",{className:pn.a.toolbar,children:[Object(h.jsx)(On,{label:"C \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u0430",icon:j.e}),Object(h.jsx)(Tn,{label:"\u0418\u0437 Pixels",icon:j.j}),Object(h.jsxs)("div",{className:pn.a.row,children:[Object(h.jsx)("label",{className:pn.a.label,children:"\u0426\u0432\u0435\u0442 \u0444\u043e\u043d\u0430:"}),Object(h.jsx)(vn,{ref:t}),Object(h.jsx)("button",{ref:n,className:pn.a.reset,children:Object(h.jsx)(m.a,{icon:j.n})})]})]})})),Sn=n(56),kn=n.n(Sn),Ln=n(40),Nn=n.n(Ln),Bn=Object(c.forwardRef)((function(e,t){return Object(h.jsxs)("button",{className:Nn.a.button,ref:t,children:[Object(h.jsx)(m.a,{icon:e.icon}),Object(h.jsx)("span",{className:Nn.a.buttonText,children:e.label})]})})),Cn=Object(s.b)(null,null,null,{forwardRef:!0})(Bn);var Rn=Object(s.b)(null,(function(e){return{shiftUpBlock:function(){return e({type:"SHIFT_UP_BLOCK",id:ie.getState().selectBlock})},shiftDownBlock:function(){return e({type:"SHIFT_DOWN_BLOCK",id:ie.getState().selectBlock})},deleteBlock:function(){return e(Ye())}}}))((function(e){var t=Object(c.useRef)(null),n=Object(c.useRef)(null),r=Object(c.useRef)(null);return function(e,t,n,r){Object(c.useEffect)((function(){var c=e.current,a=t.current;function o(e){e.preventDefault(),n()}function i(e){e.preventDefault(),r()}return I(c).addEventListener("click",o),I(a).addEventListener("click",i),function(){c&&c.removeEventListener("click",o),a&&a.removeEventListener("click",i)}}),[e,t,n,r])}(t,n,e.shiftUpBlock,e.shiftDownBlock),function(e,t){Object(c.useEffect)((function(){var n=e.current;function r(){t()}function c(e){"Delete"===e.code&&(e.defaultPrevented||t())}return I(n).addEventListener("click",r),document.addEventListener("keydown",c),function(){n&&n.removeEventListener("click",r),document.removeEventListener("keydown",c)}}),[e,t])}(r,e.deleteBlock),Object(h.jsxs)("div",{className:kn.a.toolbar,children:[Object(h.jsx)(Cn,{ref:t,label:"\u041d\u0430 \u0441\u043b\u043e\u0439 \u0432\u0432\u0435\u0440\u0445",icon:j.b}),Object(h.jsx)(Cn,{ref:n,label:"\u041d\u0430 \u0441\u043b\u043e\u0439 \u0432\u043d\u0438\u0437",icon:j.a}),Object(h.jsx)(Cn,{ref:r,label:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",icon:j.q})]})})),In=n(13),Fn=n.n(In);var An=Object(s.b)((function(e){return{width:e.canvas.width,height:e.canvas.height}}),(function(e){return{inputCanvasSize:function(t,n){return e(function(e,t){return{type:"INPUT_CANVAS_SIZE",width:e,height:t}}(t,n))},setCanvasSize:function(t,n){return e(ft(t,n))},deleteAreaSelection:function(){return e({type:"DELETE_AREA_SELECTION",area:ie.getState().viewModel.areaSelection})},resetAreaSelection:function(){return e({type:"RESET_AREA_SELECTION"})}}}))((function(e){var t=Object(c.useRef)(null),n=Object(c.useRef)(null);!function(e,t,n,r,a,o){Object(c.useEffect)((function(){var c=e.current,i=t.current;function l(){if(c&&i){var e=Number(c.value),t=Number(i.value);n(e,t)}}function u(){if(c&&i){var e=Number(c.value),t=Number(i.value);r(e,t)}}return I(c).value=String(a),I(i).value=String(o),I(c).addEventListener("change",l),I(c).addEventListener("blur",u),I(i).addEventListener("change",l),I(i).addEventListener("blur",u),function(){c&&(c.removeEventListener("change",l),c.removeEventListener("blur",u)),i&&(i.removeEventListener("change",l),i.removeEventListener("blur",u))}}),[e,t,n,r,a,o])}(t,n,e.inputCanvasSize,e.setCanvasSize,e.width,e.height);var r=Object(c.useRef)(null);return function(e,t,n){Object(c.useEffect)((function(){var r=e.current;function c(){t(),n()}function a(e){e.preventDefault()}return I(r).addEventListener("click",c),I(r).addEventListener("mousedown",a),function(){r&&r.removeEventListener("click",c),r&&r.removeEventListener("mousedown",a)}}),[e,t,n])}(r,e.deleteAreaSelection,e.resetAreaSelection),Object(h.jsxs)("div",{className:Fn.a.toolbar,children:[Object(h.jsxs)("div",{className:Fn.a.row,children:[Object(h.jsx)("label",{className:Fn.a.label,children:"\u0428\u0438\u0440\u0438\u043d\u0430:"}),Object(h.jsx)("input",{type:"number",className:Fn.a.inputNumber,min:"0",ref:t}),Object(h.jsx)("span",{className:Fn.a.unitsLabel,children:"px"})]}),Object(h.jsxs)("div",{className:Fn.a.row,children:[Object(h.jsx)("label",{className:Fn.a.label,children:"\u0412\u044b\u0441\u043e\u0442\u0430:"}),Object(h.jsx)("input",{type:"number",className:Fn.a.inputNumber,min:"0",ref:n}),Object(h.jsx)("span",{className:Fn.a.unitsLabel,children:"px"})]}),Object(h.jsx)(Cn,{ref:r,label:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043e\u0431\u043b\u0430\u0441\u0442\u044c",icon:j.f})]})}));var Dn=Object(s.b)()((function(){return Object(h.jsxs)("div",{className:Ot.a.toolbar,children:[Object(h.jsx)("label",{children:"\u0422\u0435\u043a\u0441\u0442"}),Object(h.jsx)(Ft,{}),Object(h.jsx)("label",{children:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f"}),Object(h.jsx)(ln,{}),Object(h.jsx)("label",{children:"\u0424\u043e\u043d"}),Object(h.jsx)(wn,{}),Object(h.jsx)("label",{children:"\u0424\u0438\u043b\u044c\u0442\u0440"}),Object(h.jsx)(jn,{}),Object(h.jsx)("label",{children:"\u041e\u0431\u044a\u0435\u043a\u0442\u044b"}),Object(h.jsx)(Rn,{}),Object(h.jsx)("label",{children:"\u0425\u043e\u043b\u0441\u0442"}),Object(h.jsx)(An,{})]})}));var Mn=Object(s.b)()((function(){return Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("main",{className:u.a.main,children:Object(h.jsx)(mt,{})}),Object(h.jsx)(Ae,{}),Object(h.jsx)(Dn,{})]})}));window.addEventListener("beforeunload",(function(e){return e.returnValue=!1})),i.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(s.a,{store:ie,children:Object(h.jsx)(Mn,{})})}),document.getElementById("root"))}],[[72,1,2]]]);
//# sourceMappingURL=main.1e8f9242.chunk.js.map