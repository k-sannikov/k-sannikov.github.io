{"version":3,"sources":["cardMaker/header/toolbar/toolbarText/selectFontFamily/SelectFontFamily.module.css","cardMaker/modal/Modal.module.css","cardMaker/header/toolbar/toolbarBackground/ToolbarBackground.module.css","cardMaker/canvas/img/Img.module.css","cardMaker/canvas/artObj/ArtObj.module.css","cardMaker/header/toolbar/toolbarCanvas/ToolbarCanvas.module.css","cardMaker/header/toolbar/toolbarText/ToolbarText.module.css","cardMaker/header/toolbar/toolbarObject/ToolbarObject.module.css","cardMaker/header/navbar/navButton/NavFileButton/NavFileButton.module.css","cardMaker/dropdownMenu/DropdownMenu.module.css","cardMaker/header/toolbar/toolbarImg/addImgButtonFile/AddImgButtonFile.module.css","cardMaker/header/toolbar/toolbarFilter/ToolbarFilter.module.css","cardMaker/header/toolbar/toolbarBackground/FileImgButton/FileImgButton.module.css","cardMaker/header/toolbar/toolbarImg/ToolbarImg.module.css","cardMaker/header/Header.module.css","cardMaker/header/navbar/navButton/NavButton/NavButton.module.css","cardMaker/header/navbar/previewTemplate/PreviewTemplate.module.css","cardMaker/header/toolbar/toolbarText/buttonEditText/ButtonEditText.module.css","cardMaker/header/toolbar/toolbarImg/addImgButton/AddImgButton.module.css","cardMaker/header/toolbar/button/Button.module.css","cardMaker/header/toolbar/toolbarArea/ToolbarArea.module.css","cardMaker/canvas/text/Text.module.css","cardMaker/CardMaker.module.css","cardMaker/header/navbar/Navbar.module.css","cardMaker/header/toolbar/Toolbar.module.css","cardMaker/header/toolbar/toolbarText/colorPicker/ColorPicker.module.css","cardMaker/header/toolbar/toolbarText/inputNumber/InputNumber.module.css","cardMaker/header/toolbar/toolbarImg/previewArtObj/PreviewArtObj.module.css","cardMaker/header/toolbar/colorPicker/ColorPicker.module.css","cardMaker/canvas/Canvas.module.css","cardMaker/canvas/filter/Filter.module.css","cardMaker/canvas/deleteArea/DeleteArea.module.css","cardMaker/canvas/areaSelection/AreaSelection.module.css","cardMaker/header/navbar/navButton/NavButton/NavButton.tsx","cardMaker/header/navbar/navButton/NavFileButton/NavFileButton.tsx","utils/files.ts","store/types.ts","utils/elementList.ts","utils/permisions.ts","store/actionCreators/cardMakerActionCreators.ts","store/reducers/BackgroundReducer.ts","store/reducers/FilterReducer.ts","store/reducers/HeightCanvasReducer.ts","utils/guid.ts","store/reducers/ListBlockReducer.ts","store/reducers/WidthCanvasReducer.ts","store/reducers/CanvasReducer.ts","store/reducers/SelectBlockReducer.ts","store/reducers/HistoryReducer.ts","store/reducers/ViewModelReducer.ts","store/initialState.ts","store/store.ts","store/reducers/CardMakerReducer.ts","store/actionCreators/historyActionCreators.ts","cardMaker/modal/Modal.tsx","cardMaker/header/navbar/navButton/NewProjectButton/NewProjectButton.tsx","utils/exportImg.ts","cardMaker/header/navbar/navButton/ExportImgButton/ExportImgButton.tsx","cardMaker/dropdownMenu/DropdownMenu.tsx","cardMaker/header/navbar/previewTemplate/PreviewTemplate.tsx","cardMaker/header/navbar/Navbar.tsx","cardMaker/header/navbar/useStateHistory.ts","cardMaker/header/navbar/useExportFileProject.ts","cardMaker/header/navbar/useImportFileProject.ts","store/actionCreators/textBlockActionCreators.ts","cardMaker/header/toolbar/toolbarText/buttonEditText/ButtonEditText.tsx","cardMaker/header/toolbar/toolbarText/buttonEditText/useEditStateText.ts","cardMaker/header/toolbar/toolbarText/colorPicker/ColorPicker.tsx","cardMaker/header/toolbar/toolbarText/colorPicker/useEditColorText.ts","cardMaker/header/toolbar/toolbarText/inputNumber/InputNumber.tsx","cardMaker/header/toolbar/toolbarText/inputNumber/useEditFontSize.ts","cardMaker/header/toolbar/toolbarText/selectFontFamily/SelectFontFamily.tsx","cardMaker/header/toolbar/toolbarText/selectFontFamily/useSelectFont.ts","cardMaker/header/toolbar/toolbarText/ToolbarText.tsx","cardMaker/header/toolbar/toolbarImg/addImgButton/AddImgButton.tsx","cardMaker/header/toolbar/toolbarImg/addImgButtonFile/AddImgButtonFile.tsx","cardMaker/header/toolbar/toolbarImg/previewArtObj/PreviewArtObj.tsx","store/actionCreators/artObjBlockActionCreators.ts","cardMaker/header/toolbar/toolbarImg/previewArtObj/useCreateArtObj.ts","cardMaker/header/toolbar/toolbarImg/ToolbarImg.tsx","store/actionCreators/imgBlockActionCreators.ts","cardMaker/header/toolbar/toolbarImg/useCreateImg.ts","cardMaker/header/toolbar/colorPicker/ColorPicker.tsx","store/actionCreators/canvasActionCreators.ts","cardMaker/header/toolbar/toolbarFilter/ToolbarFilter.tsx","cardMaker/header/toolbar/toolbarFilter/useStateFilter.ts","cardMaker/header/toolbar/toolbarBackground/FileImgButton/FileImgButton.tsx","cardMaker/header/toolbar/toolbarBackground/useBackgroungImg.ts","cardMaker/header/toolbar/button/Button.tsx","cardMaker/header/toolbar/toolbarBackground/ToolbarBackground.tsx","cardMaker/header/toolbar/toolbarBackground/useBackgroungColor.ts","cardMaker/header/toolbar/toolbarArea/ToolbarArea.tsx","cardMaker/header/toolbar/toolbarArea/useDeleteArea.ts","store/actionCreators/blockActionCreators.ts","cardMaker/header/toolbar/toolbarObject/ToolbarObject.tsx","cardMaker/header/toolbar/toolbarObject/useBlockLevel.ts","cardMaker/header/toolbar/toolbarObject/useBlockDelete.ts","cardMaker/header/toolbar/toolbarCanvas/ToolbarCanvas.tsx","cardMaker/header/toolbar/toolbarCanvas/useStateCanvasSize.ts","cardMaker/header/toolbar/Toolbar.tsx","cardMaker/header/Header.tsx","cardMaker/canvas/useStateBlock.ts","cardMaker/canvas/useDragAndDrop.ts","cardMaker/canvas/useResize.ts","cardMaker/canvas/img/Img.tsx","cardMaker/canvas/text/Text.tsx","cardMaker/canvas/text/useEditText.ts","cardMaker/canvas/artObj/ArtObj.tsx","cardMaker/canvas/filter/Filter.tsx","cardMaker/canvas/deleteArea/DeleteArea.tsx","cardMaker/canvas/areaSelection/AreaSelection.tsx","cardMaker/canvas/Canvas.tsx","cardMaker/canvas/useAreaSelection.ts","cardMaker/CardMaker.tsx","index.tsx"],"names":["module","exports","NavButton","forwardRef","props","ref","onClick","className","styles","button","icon","label","button__text","connect","NavFileButton","htmlFor","inputFile","type","accept","id","getImgInformationFromFile","fileImg","a","fileImgPromise","Promise","resolve","reject","reader","FileReader","readAsDataURL","onload","result","onerror","img","Image","src","decode","width","height","getProjectFromFile","file","filePromise","readAsText","json","JSON","parse","BlockTypes","setComponentFields","listBlock","modifiableFields","newlistBlock","forEach","component","push","getIndexById","foundIndex","block","index","verify","value","Error","applyFileProject","cardMaker","project","SetOfArtObject","templates","birthday_1","name","preview","birthday_2","february_23_1","march_8_1","march_8_2","new_year_1","new_year_2","new_year_3","september_1_1","background","action","color","filter","opacity","heightCanvas","createGUID","gen","join","count","out","i","Math","random","toString","substring","text","x","y","size","bold","italic","underline","fontFamily","isBold","isItalic","isUnderline","artObj","copyListBlock","Boolean","isSelectedBlock","splice","newListBlock","length","isShiftUpAvailable","flipValue","isShiftDownAvailable","widthCanvas","canvas","deleteArea","area","selectBlock","history","listState","currentIndex","newListState","newCanvas","newCurrentIndex","isUndoAvailable","isRedoAvailable","areaSelection","viewModel","bgColor","bgImg","canvasSize","list","defState","tempColor","tempSize","testArtObj","testCanvas","testCardMaker","exceptions","valid","store","createStore","initialState","applyMiddleware","next","oldState","getState","newState","includes","stringify","console","log","dispatch","visible","title","content","footer","onClose","useEffect","onKeydown","key","document","addEventListener","removeEventListener","modal","modalDialog","e","stopPropagation","modalHeader","modalTitle","modalClose","faTimes","modalBody","modalContent","modalFooter","newCardMaker","useState","isModal","setModal","faPiedPiperSquare","exportImg","elements","deleteAreas","createElement","ctx","getContext","crossOrigin","imgWidth","imgHeight","drawImage","fillStyle","fillRect","renderBlock","convertColor","r","g","b","element","dataURL","toDataURL","link","href","download","click","defShiftX","lineHeight","style","getStyle","textBlock","innerHTML","shift","Array","from","children","str","font","weight","family","fillText","innerText","textWidth","measureText","chars","rgbColor","parseInt","downloadImg","useRef","faImage","dropdown","dropbtn","sizeIcon","dropdown_text","dropdown_content","minWidth","template","onAccept","fetch","srcJson","response","srcImg","alt","undo","redo","buttonUndo","buttonRedo","btnUndo","current","btnRedo","handlerClickUndo","handlerClickRedo","handlerKeydown","event","code","ctrlKey","metaKey","useStateHistory","downloadButton","downloadFile","input","handlerChangeInputFile","target","files","alert","useImportFileProject","handlerClickSaveToJson","Blob","URL","createObjectURL","srcList","Object","values","previewList","tmp","navbar","faFolderOpen","faFileExport","faClone","faUndo","faRedo","setBoldText","setItalicText","setUnderlineText","enabled","modifyFn","param","btn","handleClickButton","preventDefault","useEditStateText","active","state","setColorText","inputColorText","colorPicker","inputColor","handleInput","handleChange","handleClick","stopImmediatePropagation","useEditColorText","setSizeText","inputSizeText","inputNumber","fieldSize","Number","handleBlur","String","input__number","min","max","step","setFontFamilyText","select","selectFontFamily","useSelectFont","fontFamilies","class","fantazyor","piroucyrillic","phenomena","sunday","kurale","sensei","borsok","summer","underdog","montserrat","openSans","comfortaa","rubik","marta","map","currentStyle","selected","createTextBlock","toolbar","toolbar__row","faFont","faBold","faItalic","faUnderline","colorPickerBox","toolbar__label","AddImgButton","createArtObjBlock","artObjPreview","handleClickArtObj","sticker","createImgBlock","imgList","fieldFile","handlerChangeInput","imgInfo","useCreateImg","button_box","AddImgButtonFile","faDownload","faGlobe","faStickyNote","ColorPicker","input__color","setCanvasSize","inputFilter","setFilter","inputRange","fieldColor","fieldRange","handleInputFilter","handleChangeFilter","useStateFilter","input_range","ViewModelBgImg","inputBackgroundImg","setBackgroundImg","handlerChange","useBackgroungImg","bg","Button","textAlign","button_text","resetBackground","inputBackgroundColor","setBackgroundColor","buttonReset","handlerClickResetColor","handlerInputColor","handleerChangeColor","useBackgroungColor","toolbar__col1","button_container","FileImgButton","toolbar__col2","faRetweet","deleteAreaSelection","resetAreaSelection","buttonDelete","handleMousedownButton","useDeleteArea","faEraser","setSelectedBlock","setSizeBlock","deleteBlock","setPositionBlock","shiftUpBlock","shiftDownBlock","buttonUp","buttonDown","btnUp","btnDown","handlerClickShiftUp","handlerClickShiftDown","useBlockLevel","handlerClickDelete","useBlockDelete","faArrowUp","faArrowDown","toolbar__col","faTrash","inputCanvasSize","inputWidth","inputHeight","fieldWidth","fieldHeight","handleChangeSize","handleBlurSize","useStateCanvasSize","input_number","header","panel","useStateBlock","blockId","resetSelectedBlock","currentBlock","handleMousedownBlock","setTimeout","handleClickDocument","isDefPrev","defaultPrevented","isSelectedID","useDragAndDrop","defPos","startPos","newPos","handleMousedown","pageX","pageY","handleMouseMove","handleMouseUp","delta","left","top","useResize","LT","RT","LB","RB","defSize","point","pointLT","pointRT","pointLB","pointRB","offsetX","offsetY","newWidth","newHeight","prevWidth","prevHeight","moving","calculateSize","imgStyle","imgBlock","onDragStart","pointTopLeft","pointTopRight","pointBottomLeft","pointBottomRight","setTextInTextBlock","clickOnText","handleClickBlock","handleDblclickBlock","setAttribute","focus","getAttribute","handlerPaste","clipboardData","getData","execCommand","handlerInput","textStyle","fontSize","fontWeight","textDecoration","fontStyle","contentEditable","suppressContentEditableWarning","dangerouslySetInnerHTML","__html","artObjBlock","artObjStyle","filterStyle","DeleteAreaStyle","AreaSelection","areaSelectionStyle","setPositionAreaSelection","canvasStyle","backgroundColor","backgroundImage","bgWidth","bgHeight","backgroundSize","getbackgroundSize","getListBlock","startOffsetPos","field","selectArea","div","border","appendChild","abs","offsetWidth","offsetHeight","offsetLeft","offsetTop","remove","handleMousedownDocument","handleMousedownArea","position","zIndex","pointerEvents","useAreaSelection","canvasWidth","canvasHeight","prevImgWidth","prevImgHeight","main","subscribe","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.2a0a8808.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"select\":\"SelectFontFamily_select__1Hv9D\",\"fantazyor\":\"SelectFontFamily_fantazyor__1YuH3\",\"piroucyrillic\":\"SelectFontFamily_piroucyrillic__2APyX\",\"phenomena\":\"SelectFontFamily_phenomena__3L0pA\",\"sunday\":\"SelectFontFamily_sunday__3-2n9\",\"kurale\":\"SelectFontFamily_kurale__-1mws\",\"sensei\":\"SelectFontFamily_sensei__1zzQ5\",\"borsok\":\"SelectFontFamily_borsok__2Wuhd\",\"summer\":\"SelectFontFamily_summer__1jEjL\",\"underdog\":\"SelectFontFamily_underdog__2MpfH\",\"montserrat\":\"SelectFontFamily_montserrat__3seoV\",\"openSans\":\"SelectFontFamily_openSans__tiuJF\",\"comfortaa\":\"SelectFontFamily_comfortaa__3IxgG\",\"rubik\":\"SelectFontFamily_rubik__3nd8M\",\"marta\":\"SelectFontFamily_marta__1T-z5\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"modal\":\"Modal_modal__3Ldwj\",\"appear\":\"Modal_appear__1oVsi\",\"modalDialog\":\"Modal_modalDialog__3Du5z\",\"animatetop\":\"Modal_animatetop__2MHhu\",\"slide-in\":\"Modal_slide-in__1_LpD\",\"modalHeader\":\"Modal_modalHeader__1ppBy\",\"modalFooter\":\"Modal_modalFooter__lSAfT\",\"modalClose\":\"Modal_modalClose__3GnIC\",\"modalBody\":\"Modal_modalBody__12nPW\",\"modalContent\":\"Modal_modalContent__35CCy\",\"modalTitle\":\"Modal_modalTitle__bNkET\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toolbar\":\"ToolbarBackground_toolbar__MQ_48\",\"toolbar__label\":\"ToolbarBackground_toolbar__label__1I8R8\",\"toolbar__col1\":\"ToolbarBackground_toolbar__col1__3BwVD\",\"toolbar__col2\":\"ToolbarBackground_toolbar__col2__12hzd\",\"toolbar__row\":\"ToolbarBackground_toolbar__row__3lf-3\",\"button_container\":\"ToolbarBackground_button_container__1ir_S\",\"colorPickerBox\":\"ToolbarBackground_colorPickerBox__2npIL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"block\":\"Img_block__r3fmB\",\"img\":\"Img_img__3Hans\",\"selected\":\"Img_selected__vEyvs\",\"pointBottomRight\":\"Img_pointBottomRight__1Z-pj\",\"pointTopLeft\":\"Img_pointTopLeft__3ZXB8\",\"pointTopRight\":\"Img_pointTopRight__2cXMJ\",\"pointBottomLeft\":\"Img_pointBottomLeft__x6rWq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"block\":\"ArtObj_block__1DyCD\",\"img\":\"ArtObj_img__3ltZN\",\"selected\":\"ArtObj_selected__1oJ2Z\",\"pointBottomRight\":\"ArtObj_pointBottomRight__3og1x\",\"pointTopLeft\":\"ArtObj_pointTopLeft__2iQK4\",\"pointTopRight\":\"ArtObj_pointTopRight__19xjD\",\"pointBottomLeft\":\"ArtObj_pointBottomLeft__1BMY1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toolbar\":\"ToolbarCanvas_toolbar__2lemH\",\"toolbar__button\":\"ToolbarCanvas_toolbar__button__2LRIf\",\"toolbar__label\":\"ToolbarCanvas_toolbar__label__1lbBA\",\"toolbar__button_text\":\"ToolbarCanvas_toolbar__button_text__Fo0b_\",\"input_number\":\"ToolbarCanvas_input_number__kQeBA\",\"toolbar__row\":\"ToolbarCanvas_toolbar__row__fR0UK\",\"input_range\":\"ToolbarCanvas_input_range__2BdY0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toolbar\":\"ToolbarText_toolbar__L36Xy\",\"toolbar__row\":\"ToolbarText_toolbar__row__1n6YO\",\"toolbar__label\":\"ToolbarText_toolbar__label__XASo7\",\"button\":\"ToolbarText_button__34F-S\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toolbar\":\"ToolbarObject_toolbar__1wNU-\",\"toolbar__label\":\"ToolbarObject_toolbar__label__GzSLz\",\"toolbar__col\":\"ToolbarObject_toolbar__col__33gVZ\",\"toolbar__row\":\"ToolbarObject_toolbar__row__3n9uD\",\"input__color\":\"ToolbarObject_input__color__3PxWa\",\"button_container\":\"ToolbarObject_button_container__2CKtQ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"NavFileButton_button__31bRb\",\"button__text\":\"NavFileButton_button__text__2WzyS\",\"inputFile\":\"NavFileButton_inputFile__3SOw7\",\"icon\":\"NavFileButton_icon__1R6pk\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"dropbtn\":\"DropdownMenu_dropbtn__2-JiC\",\"dropdown\":\"DropdownMenu_dropdown__2_ubm\",\"dropdown_content\":\"DropdownMenu_dropdown_content__iSef_\",\"dropdown_text\":\"DropdownMenu_dropdown_text__2gbo8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"AddImgButtonFile_button__2N8CC\",\"button__text\":\"AddImgButtonFile_button__text__34fFe\",\"inputFile\":\"AddImgButtonFile_inputFile__4uOdL\",\"icon\":\"AddImgButtonFile_icon__3xQsK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toolbar\":\"ToolbarFilter_toolbar__CEBoi\",\"toolbar__label\":\"ToolbarFilter_toolbar__label__3pgyB\",\"input_color\":\"ToolbarFilter_input_color__1hKXO\",\"input_range\":\"ToolbarFilter_input_range__2mQc9\",\"colorPickerBox\":\"ToolbarFilter_colorPickerBox__3-g1H\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"FileImgButton_button__2-G8o\",\"button__text\":\"FileImgButton_button__text__ilBCY\",\"inputFile\":\"FileImgButton_inputFile__nu7Na\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toolbar\":\"ToolbarImg_toolbar__1U8h2\",\"button_box\":\"ToolbarImg_button_box__1ADxG\",\"toolbar__label\":\"ToolbarImg_toolbar__label__3zwm8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__1rLmw\",\"panel\":\"Header_panel__29H5m\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"NavButton_button__UL2Cr\",\"button__text\":\"NavButton_button__text__C4Sqv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"preview\":\"PreviewTemplate_preview__IUSm5\",\"img\":\"PreviewTemplate_img__ajmyo\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"ButtonEditText_button__JsKq3\",\"active\":\"ButtonEditText_active__1z4H3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"AddImgButton_button__2zBC1\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__3s58t\",\"button_text\":\"Button_button_text__2xGDG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toolbar\":\"ToolbarArea_toolbar__17QU7\",\"toolbar__label\":\"ToolbarArea_toolbar__label__25frT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"block\":\"Text_block__Fvt_5\",\"selected\":\"Text_selected__2uNOO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"CardMaker_main__qNuoq\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navbar\":\"Navbar_navbar__2UjT7\",\"input\":\"Navbar_input__1lW6o\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"toolbar\":\"Toolbar_toolbar__hCIIv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input\":\"ColorPicker_input__Kiwid\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input__number\":\"InputNumber_input__number__2kkQW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"sticker\":\"PreviewArtObj_sticker__twuA7\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"input__color\":\"ColorPicker_input__color__3EGb4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"canvas\":\"Canvas_canvas__Ak89z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"filter\":\"Filter_filter__16erS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"deleteArea\":\"DeleteArea_deleteArea__2KQym\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"areaSelection\":\"AreaSelection_areaSelection__1Syux\"};","import styles from './NavButton.module.css';\nimport { IconDefinition } from '@fortawesome/fontawesome-svg-core';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { ForwardedRef, forwardRef } from 'react';\nimport { connect } from 'react-redux';\n\ntype NavButtonProps = {\n  label: string,\n  icon: IconDefinition,\n  onClick: null | (() => void),\n}\n\nconst NavButton = forwardRef((props: NavButtonProps, ref: ForwardedRef<HTMLButtonElement>) => {\n  return (\n    <button\n      onClick={props.onClick ? props.onClick : ()=>{}}\n      className={styles.button}\n      ref={ref}>\n      <FontAwesomeIcon icon={props.icon} />\n      {props.label !== '' &&\n        <span className={styles.button__text}>{props.label}</span>\n      }\n    </button>\n  )\n});\n\nexport default connect(null, null, null, { forwardRef: true })(NavButton);","import styles from './NavFileButton.module.css';\nimport { IconDefinition } from '@fortawesome/fontawesome-svg-core';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { ForwardedRef, forwardRef } from 'react';\nimport { connect } from 'react-redux';\n\ntype NavFileButtonProps = {\n  label: string,\n  icon: IconDefinition,\n}\n\nconst NavFileButton = forwardRef((props: NavFileButtonProps, ref: ForwardedRef<HTMLInputElement>) => (\n  <button className={styles.button}>\n    <label htmlFor=\"input-file\" className={styles.icon}>\n      <FontAwesomeIcon icon={props.icon} />\n    </label>\n    <input\n      className={styles.inputFile}\n      type=\"file\"\n      accept=\".json\"\n      ref={ref}\n      id=\"input-file\"\n    />\n    {props.label !== '' &&\n      <label className={styles.button__text}\n        htmlFor=\"input-file\">\n        {props.label}\n      </label>\n    }\n  </button>\n));\n\nexport default connect(null, null, null, { forwardRef: true })(NavFileButton);","import { CardMaker } from '../store/types';\n\n// конвертирование файла изображения в src стоку base64\ntype ImgInfo = {\n  width: number,\n  height: number,\n  src: string,\n}\n\nexport async function getImgInformationFromFile(fileImg: File): Promise<ImgInfo> {\n  const fileImgPromise = new Promise((resolve, reject) => {\n    let reader = new FileReader();\n    reader.readAsDataURL(fileImg);\n    reader.onload = () => resolve(reader.result);\n    reader.onerror = reject;\n  });\n\n  const img = new Image();\n\n  img.src = await fileImgPromise as string;\n  await img.decode();\n\n  return {\n    width: img.width,\n    height: img.height,\n    src: img.src,\n  }\n}\n\nexport async function getProjectFromFile(file: File): Promise<CardMaker> {\n  const filePromise = new Promise((resolve, reject) => {\n    let reader = new FileReader();\n    reader.readAsText(file);\n    reader.onload = () => resolve(reader.result);\n    reader.onerror = reject;\n  });\n  const json = await filePromise as string;\n  return await JSON.parse(json);\n}","export enum BlockTypes {\n  img,\n  artObj,\n  text\n}\n\nexport const templates = {\n  birthday_1: {\n    name: 'С днем рождения!',\n    json: './templates/birthday_1.json',\n    preview: './templates/birthday_1.png',\n  },\n  birthday_2: {\n    name: 'С днем рождения!',\n    json: './templates/birthday_2.json',\n    preview: './templates/birthday_2.png',\n  },\n  february_23_1: {\n    name: 'С 23 февраля!',\n    json: './templates/february_23_1.json',\n    preview: './templates/february_23_1.png',\n  },\n  march_8_1: {\n    name: 'С 8 марта!',\n    json: './templates/march_8_1.json',\n    preview: './templates/march_8_1.png',\n  },\n  march_8_2: {\n    name: 'С 8 марта!',\n    json: './templates/march_8_2.json',\n    preview: './templates/march_8_2.png',\n  },\n  new_year_1: {\n    name: 'С новым годом!',\n    json: './templates/new_year_1.json',\n    preview: './templates/new_year_1.png',\n  },\n  new_year_2: {\n    name: 'С новым годом!',\n    json: './templates/new_year_2.json',\n    preview: './templates/new_year_2.png',\n  },\n  new_year_3: {\n    name: 'С новым годом!',\n    json: './templates/new_year_3.json',\n    preview: './templates/new_year_3.png',\n  },\n  september_1_1: {\n    name: 'С 1 сентября!',\n    json: './templates/september_1_1.json',\n    preview: './templates/september_1_1.png',\n  },\n}\n\nexport enum SetOfArtObject {\n  boy = \"./img/artObj/boy.png\",\n  frog = \"./img/artObj/frog.png\",\n  girl = \"./img/artObj/girl.png\",\n  loupe = \"./img/artObj/loupe.png\",\n  palette = \"./img/artObj/palette.png\",\n  pencil = \"./img/artObj/pencil.png\",\n  rainbow = \"./img/artObj/rainbow.png\",\n  snail = \"./img/artObj/snail.png\",\n}\n\nexport type ActionHistory = Readonly<{\n  listState: Canvas[],\n  currentIndex: number,\n}>\n\nexport type Position = Readonly<{\n  x: number,\n  y: number,\n}>\n\nexport type UnifiedBlock = Readonly<{\n  id: string,\n  // type: string,\n}> & Position\n\nexport type ArtObj = Readonly<{\n  src: string,\n  type: BlockTypes.artObj\n}> & UnifiedBlock & Size\n\nexport type Img = Readonly<{\n  src: string,\n  type: BlockTypes.img\n}> & UnifiedBlock & Size\n\nexport type Text = Readonly<{\n  text: string,\n  color: string,\n  size: number,\n  bold: boolean,\n  italic: boolean,\n  underline: boolean,\n  fontFamily: string,\n  type: BlockTypes.text\n}> & UnifiedBlock\n\nexport type Block = Text | Img | ArtObj;\n\nexport type Background = Readonly<{\n  color: string | null,\n  src: string | null,\n  width: number | null,\n  height: number | null,\n}>\n\nexport type Filter = Readonly<{\n  color: string,\n  opacity: number,\n}>\n\nexport type Area = Readonly<{\n  x: number,\n  y: number,\n}> & Size\n\nexport type Canvas = Readonly<{\n  filter: Filter,\n  listBlock: Block[];\n  deleteArea: Area[],\n  background: Background,\n}> & Size\n\nexport type Size = Readonly<{\n  width: number,\n  height: number,\n}>\n\nexport type ViewModelText = {\n  color: string | null,\n  size: number | null,\n  bold: boolean | null,\n  italic: boolean | null,\n  underline: boolean | null,\n  fontFamily: string | null,\n  tempColor: string | null,\n  tempSize: number | null,\n}\n\nexport type ViewModelBgImg = {\n  width: number,\n  height: number,\n  src: string,\n}\n\nexport type ViewModel = Readonly<{\n  bgColor: string | null,\n  bgImg: ViewModelBgImg | null,\n  canvasSize: Size | null,\n  filter: Filter | null,\n  text: ViewModelText,\n  areaSelection: Area | null,\n}>\n\nexport type CardMaker = Readonly<{\n  canvas: Canvas,\n  selectBlock: string | null,\n  history: ActionHistory,\n  viewModel: ViewModel,\n}>\n","import { Block } from '../store/types';\n\n// проверка выделен ли блок\nexport function isSelectedBlock(id: string | null): boolean {\n  return Boolean(id)\n}\n\n// установка значений полю/полям одного элемента из списка элементов\nexport function setComponentFields(listBlock: Block[], id: string, modifiableFields: object): Block[] {\n  let newlistBlock: Block[] = [];\n  listBlock.forEach((component: Block) => {\n    if (component.id === id) {\n      newlistBlock.push({\n        ...component,\n        ...modifiableFields,\n      });\n    } else {\n      newlistBlock.push(component);\n    }\n  });\n  return newlistBlock;\n}\n\n// получить индекс элемента по id\nexport function getIndexById(listBlock: Block[], id: string): number {\n  let foundIndex: number = -1;\n  listBlock.forEach((block: Block, index: number) => {\n    if (block.id === id) {\n      foundIndex = index;\n    }\n  });\n  return foundIndex;\n}\n\n\n\n","import { ActionHistory, Block } from '../store/types';\nimport { getIndexById } from './elementList';\n\n// провера доступности операции undo\nexport function isUndoAvailable(history: ActionHistory): boolean {\n  let length = history.listState.length;\n  let index = history.currentIndex;\n  return length > 1 && index > 0;\n}\n\n// проверка доступности операции redo\nexport function isRedoAvailable(history: ActionHistory): boolean {\n  let length = history.listState.length;\n  let index = history.currentIndex;\n  return index + 1 < length;\n}\n\n// проверка доступности операции перемещения слоя вверх\nexport function isShiftUpAvailable(id: string | null, listBlock: Block[]): boolean {\n  const length: number = listBlock.length;\n  return Boolean(id && getIndexById(listBlock, id) < length - 1)\n}\n\n// проверка доступности операции перемещения слоя вниз\nexport function isShiftDownAvailable(id: string | null, listBlock: Block[]): boolean {\n  return Boolean(id && getIndexById(listBlock, id) > 0)\n}\n\n// проверка на !null значение\nexport function verify<T>(value: T | null | undefined): T {\n  if (!value) {\n    throw new Error('Assertion failed');\n  }\n  return value;\n}","import { CardMaker } from '../types';\n\nexport function newCardMaker() {\n  return {\n    type: 'NEW_CARD_MAKER',\n  }\n}\n\nexport function applyFileProject(cardMaker: CardMaker) {\n  return {\n    type: 'APPLY_FILE_PROJECT',\n    project: cardMaker,\n  }\n}\n","import { Background } from '../types';\n\nexport type BackgroundAction = {\n  type: 'NEW_CARD_MAKER',\n} | {\n  type: 'RESET_BACKGROUND',\n} | {\n  type: 'SET_BACKGROUND_COLOR',\n  color: string,\n} | {\n  type: 'SET_BACKGROUND_IMG',\n  src: string,\n  width: number,\n  height: number,\n}\n\nfunction background(background: Background, action: BackgroundAction): Background {\n  switch (action.type) {\n\n    case 'NEW_CARD_MAKER':\n      return {\n        color: '#ffffff',\n        src: null,\n        width: null,\n        height: null,\n      };\n\n    case 'RESET_BACKGROUND':\n      return {\n        color: '#ffffff',\n        src: null,\n        width: null,\n        height: null,\n      };\n\n    case 'SET_BACKGROUND_COLOR':\n      return {\n        color: action.color,\n        src: null,\n        width: null,\n        height: null,\n      };\n\n    case 'SET_BACKGROUND_IMG':\n      return {\n        color: null,\n        src: action.src,\n        width: action.width,\n        height: action.height,\n      };\n\n    default:\n      return background;\n  }\n}\n\nexport default background;","import { Filter } from '../types';\n\nexport type FilterAction = {\n  type: 'NEW_CARD_MAKER',\n} | {\n  type: 'SET_FILTER',\n  color: string,\n  opacity: number,\n}\n\nfunction filter(filter: Filter, action: FilterAction): Filter {\n  switch (action.type) {\n\n    case 'NEW_CARD_MAKER':\n      return {\n        color: '#ffffff',\n        opacity: 0,\n      };\n\n    case 'SET_FILTER':\n      return {\n        color: action.color,\n        opacity: action.opacity,\n      };\n\n    default:\n      return filter;\n  }\n}\n\nexport default filter;","export type HeightAction = {\n  type: 'NEW_CARD_MAKER',\n} | {\n  type: 'SET_CANVAS_SIZE',\n  height: number,\n}\n\nfunction heightCanvas(height: number, action: HeightAction): number {\n  switch (action.type) {\n\n    case 'NEW_CARD_MAKER':\n      return 600;\n\n    case 'SET_CANVAS_SIZE':\n      return action.height;\n\n    default:\n      return height;\n  }\n}\n\nexport default heightCanvas;","export function createGUID() {\n  return [gen(2), gen(1), gen(1), gen(1), gen(3)].join(\"-\");\n}\n\nfunction gen(count: number) {\n  let out = \"\";\n  for (let i: number = 0; i < count; i++) {\n    out += (((1 + Math.random()) * 0x10000) | 0).toString(16).substring(1);\n  }\n  return out;\n}","import { Block, BlockTypes } from '../types';\nimport { setComponentFields, getIndexById, isSelectedBlock } from '../../utils/elementList'\nimport { isShiftUpAvailable, isShiftDownAvailable } from '../../utils/permisions'\nimport { createGUID } from '../../utils/guid';\n\nexport type ListBlockAction = {\n  type: 'NEW_CARD_MAKER',\n} | {\n  type: 'CREATE_TEXT_BLOCK',\n  x: number,\n  y: number,\n} | {\n  type: 'SET_SIZE_BLOCK',\n  id: string,\n  width: number,\n  height: number,\n} | {\n  type: 'SET_TEXT_IN_TEXT_BLOCK',\n  id: string,\n  text: string,\n} | {\n  type: 'SET_FONT_FAMILY_TEXT',\n  id: string,\n  fontFamily: string,\n} | {\n  type: 'SET_BOLD_TEXT',\n  id: string,\n  isBold: boolean,\n} | {\n  type: 'SET_ITALIC_TEXT',\n  id: string,\n  isItalic: boolean,\n} | {\n  type: 'SET_UNDERLINE_TEXT',\n  id: string,\n  isUnderline: boolean,\n} | {\n  type: 'SET_SIZE_TEXT',\n  id: string,\n  size: number,\n} | {\n  type: 'SET_COLOR_TEXT',\n  id: string,\n  color: string,\n} | {\n  type: 'CREATE_IMG_BLOCK',\n  width: number,\n  height: number,\n  src: string,\n  x: number,\n  y: number,\n} | {\n  type: 'CREATE_ART_OBJ_BLOCK',\n  src: string,\n  x: number,\n  y: number,\n} | {\n  type: 'DELETE_BLOCK',\n  id: string,\n} | {\n  type: 'SET_POSITION_BLOCK',\n  id: string,\n  x: number,\n  y: number,\n} | {\n  type: 'SHIFT_UP_BLOCK',\n  id: string,\n} | {\n  type: 'SHIFT_DOWN_BLOCK',\n  id: string,\n}\n\nfunction listBlock(listBlock: Block[], action: ListBlockAction): Block[] {\n  switch (action.type) {\n\n    case 'NEW_CARD_MAKER':\n      return [];\n\n    case 'CREATE_TEXT_BLOCK':\n      return [\n        ...listBlock,\n        {\n          id: createGUID(),\n          type: BlockTypes.text,\n          color: '#898989',\n          x: action.x - 45,\n          y: action.y - 25,\n          text: '<div>Текст<br></div>',\n          size: 50,\n          bold: false,\n          italic: false,\n          underline: false,\n          fontFamily: 'OpenSans',\n        }\n      ];\n\n    case 'SET_SIZE_BLOCK':\n      return setComponentFields(listBlock, action.id, {\n        width: action.width,\n        height: action.height,\n      });\n\n    case 'SET_TEXT_IN_TEXT_BLOCK':\n      return setComponentFields(listBlock, action.id, {\n        text: action.text,\n      });\n\n    case 'SET_FONT_FAMILY_TEXT':\n      return setComponentFields(listBlock, action.id, {\n        fontFamily: action.fontFamily,\n      });\n\n    case 'SET_BOLD_TEXT':\n      return setComponentFields(listBlock, action.id, {\n        bold: action.isBold,\n      });\n\n    case 'SET_ITALIC_TEXT':\n      return setComponentFields(listBlock, action.id, {\n        italic: action.isItalic,\n      });\n\n    case 'SET_UNDERLINE_TEXT':\n      return setComponentFields(listBlock, action.id, {\n        underline: action.isUnderline,\n      });\n\n    case 'SET_SIZE_TEXT':\n      return setComponentFields(listBlock, action.id, {\n        size: action.size,\n      });\n\n    case 'SET_COLOR_TEXT':\n      return setComponentFields(listBlock, action.id, {\n        color: action.color,\n      });\n\n    case 'CREATE_IMG_BLOCK':\n      return [\n        ...listBlock,\n        {\n          id: createGUID(),\n          type: BlockTypes.img,\n          width: action.width,\n          height: action.height,\n          x: action.x,\n          y: action.y,\n          src: action.src,\n        }\n      ];\n\n    case 'CREATE_ART_OBJ_BLOCK':\n      return [\n        ...listBlock,\n        {\n          id: createGUID(),\n          type: BlockTypes.artObj,\n          width: 150,\n          height: 150,\n          x: action.x,\n          y: action.y,\n          src: action.src,\n        }\n      ];\n\n    case 'DELETE_BLOCK':\n      let copyListBlock: Block[] = [...listBlock];\n      if (isSelectedBlock(action.id)) {\n        copyListBlock.forEach((component, index) => {\n          if (component.id === action.id) {\n            copyListBlock.splice(index, 1);\n            return false;\n          }\n        });\n      }\n      return copyListBlock;\n\n    case 'SET_POSITION_BLOCK':\n      return setComponentFields(listBlock, action.id, {\n        x: action.x,\n        y: action.y,\n      });\n\n    case 'SHIFT_UP_BLOCK':\n      {\n        let newListBlock: Block[] = [...listBlock];\n        if (isShiftUpAvailable(action.id, listBlock)) {\n          const id: string = action.id as string;\n          const index: number = getIndexById(newListBlock, id);\n          const flipValue: Block[] = [newListBlock[index + 1], newListBlock[index]];\n          newListBlock.splice(index, 2, ...flipValue);\n        }\n        return newListBlock;\n      }\n\n    case 'SHIFT_DOWN_BLOCK':\n      {\n        let newListBlock: Block[] = [...listBlock];\n        if (isShiftDownAvailable(action.id, listBlock)) {\n          const id: string = action.id as string;\n          const index: number = getIndexById(newListBlock, id);\n          const flipValue: Block[] = [newListBlock[index], newListBlock[index - 1]];\n          newListBlock.splice(index - 1, 2, ...flipValue);\n        }\n        return newListBlock;\n      }\n\n    default:\n      return listBlock;\n  }\n}\n\nexport default listBlock;","export type WidthAction = {\n  type: 'NEW_CARD_MAKER',\n} | {\n  type: 'SET_CANVAS_SIZE',\n  width: number,\n}\n\nfunction widthCanvas(width: number, action: WidthAction): number {\n  switch (action.type) {\n\n    case 'NEW_CARD_MAKER':\n      return 800;\n\n    case 'SET_CANVAS_SIZE':\n      return action.width;\n\n    default:\n      return width;\n  }\n}\nexport default widthCanvas;","import { Canvas, Area } from '../types';\nimport background, { BackgroundAction } from './BackgroundReducer';\nimport filter, { FilterAction } from './FilterReducer';\nimport heightCanvas, { HeightAction } from './HeightCanvasReducer';\nimport listBlock, { ListBlockAction } from './ListBlockReducer';\nimport widthCanvas, { WidthAction } from './WidthCanvasReducer';\n\nexport type CanvasAction = WidthAction | HeightAction | FilterAction | ListBlockAction | BackgroundAction | DeleteAreaAction;\n\nfunction canvas(canvas: Canvas, action: CanvasAction): Canvas {\n  return {\n    width: widthCanvas(canvas.width, action as WidthAction),\n    height: heightCanvas(canvas.height, action as HeightAction),\n    filter: filter(canvas.filter, action as FilterAction),\n    listBlock: listBlock(canvas.listBlock, action as ListBlockAction),\n    background: background(canvas.background, action as BackgroundAction),\n    deleteArea: deleteArea(canvas.deleteArea, action as DeleteAreaAction),\n  };\n}\n\nexport default canvas;\n\ntype DeleteAreaAction = {\n  type: 'DELETE_AREA_SELECTION',\n  area: Area | null\n} | {\n  type: 'NEW_CARD_MAKER',\n}\n\nfunction deleteArea(deleteArea: Area[], action: DeleteAreaAction): Area[] {\n  switch (action.type) {\n    case 'DELETE_AREA_SELECTION':\n      if (action.area) {\n        return [\n          ...deleteArea,\n          action.area as Area,\n        ];\n      } else {\n        return deleteArea;\n      }\n    case 'NEW_CARD_MAKER':\n      return [];\n  \n    default:\n      return deleteArea;\n  }\n}","export type SelectBlockAction = {\n  type: 'NEW_CARD_MAKER',\n} | {\n  type: 'RESET_SELECTED_BLOCK',\n  width: number,\n} | {\n  type: 'SET_SELECTED_BLOCK',\n  id: string,\n}\n\nfunction selectBlock(selectBlock: null | string, action: SelectBlockAction): string | null {\n  switch (action.type) {\n\n    case 'NEW_CARD_MAKER':\n      return null;\n\n    case 'RESET_SELECTED_BLOCK':\n      return null;\n\n    case 'SET_SELECTED_BLOCK':\n      return action.id;\n\n    default:\n      return selectBlock;\n  }\n}\n\nexport default selectBlock;","import { Canvas as CanvasType, ActionHistory as ActionHistoryType } from '../types';\nimport { isUndoAvailable, isRedoAvailable } from '../../utils/permisions'\nimport canvas from './CanvasReducer';\n\nexport type HistoryAction = {\n  type: 'NEW_CARD_MAKER',\n} | {\n  type: 'ADD_HISTORY',\n  newCanvas: CanvasType,\n} | {\n  type: 'UNDO',\n} | {\n  type: 'REDO',\n}\n\nfunction history(history: ActionHistoryType, action: HistoryAction): ActionHistoryType {\n  switch (action.type) {\n\n    case 'NEW_CARD_MAKER':\n      return {\n        listState: [canvas({} as CanvasType, action)],\n        currentIndex: 0,\n      };\n\n    case 'ADD_HISTORY':\n      {\n        const listState: CanvasType[] = history.listState;\n        const currentIndex: number = history.currentIndex;\n        let newListState: CanvasType[] = [...history.listState];\n        if (currentIndex !== listState.length - 1) {\n          newListState.splice(currentIndex + 1, listState.length - currentIndex + 1);\n        }\n        newListState.push(action.newCanvas);\n        return {\n          currentIndex: currentIndex + 1,\n          listState: newListState,\n        };\n      }\n\n    case 'UNDO':\n      {\n        const currentIndex: number = history.currentIndex;\n        const newCurrentIndex: number = isUndoAvailable(history) ? currentIndex - 1 : currentIndex;\n        return {\n          ...history,\n          currentIndex: newCurrentIndex,\n        }\n      }\n\n    case 'REDO':\n      {\n        const currentIndex: number = history.currentIndex;\n        const newCurrentIndex: number = isRedoAvailable(history) ? currentIndex + 1 : currentIndex;\n        return {\n          ...history,\n          currentIndex: newCurrentIndex,\n        }\n      }\n\n    default:\n      return history;\n  }\n}\n\nexport default history;","import { CardMaker, Size, Filter, ViewModelText, Block, Text, Area } from \"../types\";\nimport { getIndexById } from '../../utils/elementList';\n\nexport type ViewModelAction = { type: 'NEW_CARD_MAKER' } | BgColorAction | BgImgAction | CanvasSizeAction | FilterAction | TextAction;\n\nfunction viewModel(cardMaker: CardMaker = {} as CardMaker, action: ViewModelAction) {\n  if (action.type === 'NEW_CARD_MAKER') {\n    return {\n      bgColor: null,\n      bgImg: null,\n      canvasSize: null,\n      filter: null,\n      text: {\n        color: null,\n        size: null,\n        bold: null,\n        italic: null,\n        underline: null,\n        fontFamily: null,\n        tempColor: null,\n        tempSize: null,\n      },\n      areaSelection: null,\n    }\n  }\n  return {\n    bgColor: bgColor(cardMaker, action as BgColorAction),\n    bgImg: bgImg(cardMaker, action as BgImgAction),\n    canvasSize: canvasSize(cardMaker, action as CanvasSizeAction),\n    filter: filter(cardMaker, action as FilterAction),\n    text: text(cardMaker, action as TextAction),\n    areaSelection: areaSelection(cardMaker, action as AreaSelectionAction),\n  }\n}\n\ntype AreaSelectionAction = {\n  type: 'AREA_SELECTION',\n  x: number,\n  y: number,\n  width: number,\n  height: number,\n} | {\n  type: 'RESET_AREA_SELECTION',\n} | {\n  type: 'SET_POSITION_AREA_SELECTION',\n  x: number,\n  y: number,\n} | {\n  type: 'UNDO',\n} | {\n  type: 'REDO'\n}\n\nfunction areaSelection(cardMaker: CardMaker, action: AreaSelectionAction): Area | null {\n  switch (action.type) {\n    case 'AREA_SELECTION':\n      return {\n        x: action.x,\n        y: action.y,\n        width: action.width,\n        height: action.height,\n      }\n    case 'SET_POSITION_AREA_SELECTION':\n      return {\n        ...cardMaker.viewModel.areaSelection as Area,\n        x: action.x,\n        y: action.y,\n      };\n    case 'RESET_AREA_SELECTION': return null;\n    case 'UNDO': return null;\n    case 'REDO': return null;\n    default: return cardMaker.viewModel.areaSelection;\n  }\n}\n\ntype BgColorAction = {\n  type: 'INPUT_BACKGROUND_COLOR',\n  color: string,\n} | {\n  type: 'UNDO',\n} | {\n  type: 'REDO'\n}\n\nfunction bgColor(cardMaker: CardMaker, action: BgColorAction): string | null {\n  switch (action.type) {\n    case 'INPUT_BACKGROUND_COLOR': return action.color;\n    case 'UNDO': return null;\n    case 'REDO': return null;\n    default: return cardMaker.canvas.background.color;\n  }\n}\n\ntype BgImgAction = {\n  type: 'INPUT_BACKGROUND_IMG',\n  width: number,\n  height: number,\n  src: string,\n} | {\n  type: 'UNDO',\n} | {\n  type: 'REDO'\n}\n\nfunction bgImg(cardMaker: CardMaker, action: BgImgAction): Size & { src: string } | null {\n  switch (action.type) {\n    case 'INPUT_BACKGROUND_IMG':\n      return {\n        width: action.width,\n        height: action.height,\n        src: action.src,\n      };\n    case 'UNDO': return null;\n    case 'REDO': return null;\n    default: return null;\n  }\n}\n\ntype CanvasSizeAction = {\n  type: 'INPUT_CANVAS_SIZE',\n  width: number,\n  height: number,\n} | {\n  type: 'UNDO',\n} | {\n  type: 'REDO'\n}\n\nfunction canvasSize(cardMaker: CardMaker, action: CanvasSizeAction): Size | null {\n  switch (action.type) {\n    case 'INPUT_CANVAS_SIZE':\n      return {\n        width: action.width,\n        height: action.height,\n      };\n    case 'UNDO': return null;\n    case 'REDO': return null;\n    default:\n      return cardMaker.viewModel.canvasSize\n  }\n}\n\ntype FilterAction = {\n  type: 'INPUT_FILTER',\n  color: string,\n  opacity: number,\n} | {\n  type: 'UNDO',\n} | {\n  type: 'REDO'\n}\n\nfunction filter(cardMaker: CardMaker, action: FilterAction): Filter | null {\n  switch (action.type) {\n    case 'INPUT_FILTER':\n      return {\n        color: action.color,\n        opacity: action.opacity,\n      };\n    case 'UNDO': return null;\n    case 'REDO': return null;\n    default:\n      return cardMaker.viewModel.filter\n  }\n}\n\ntype TextAction = {\n  type: 'CLICK_ON_TEXT',\n  id: string,\n} | {\n  type: 'RESET_SELECTED_BLOCK',\n} | {\n  type: 'SET_SELECTED_BLOCK',\n  id: string,\n} | {\n  type: 'SET_FONT_FAMILY_TEXT',\n  id: string,\n  fontFamily: string,\n} | {\n  type: 'INPUT_COLOR_TEXT',\n  color: string,\n} | {\n  type: 'INPUT_SIZE_TEXT',\n  size: number,\n} | {\n  type: 'SET_BOLD_TEXT',\n  id: string,\n  isBold: boolean,\n} | {\n  type: 'SET_ITALIC_TEXT',\n  id: string,\n  isItalic: boolean,\n} | {\n  type: 'SET_UNDERLINE_TEXT',\n  id: string,\n  isUnderline: boolean,\n} | {\n  type: 'UNDO',\n} | {\n  type: 'REDO'\n}\n\nfunction text(cardMaker: CardMaker, action: TextAction): ViewModelText {\n  const defState: ViewModelText = {\n    color: null,\n    size: null,\n    bold: null,\n    italic: null,\n    underline: null,\n    fontFamily: null,\n    tempColor: null,\n    tempSize: null,\n  }\n\n  let list: Block[]\n  switch (action.type) {\n\n    case 'CLICK_ON_TEXT':\n      list = cardMaker.canvas.listBlock;\n      const { color, size, bold, italic, underline, fontFamily } = list[getIndexById(list, action.id)] as Text;\n      return { color, tempColor: null, tempSize: null, size, bold, italic, underline, fontFamily }\n\n    case 'SET_FONT_FAMILY_TEXT':\n      return {\n        ...cardMaker.viewModel.text,\n        fontFamily: action.fontFamily\n      } as ViewModelText;\n\n    case 'INPUT_COLOR_TEXT':\n      return {\n        ...cardMaker.viewModel.text,\n        tempColor: action.color\n      } as ViewModelText;\n\n    case 'INPUT_SIZE_TEXT':\n      return {\n        ...cardMaker.viewModel.text,\n        tempSize: action.size\n      } as ViewModelText;\n\n    case 'SET_BOLD_TEXT':\n      return {\n        ...cardMaker.viewModel.text,\n        bold: action.isBold\n      } as ViewModelText;\n\n    case 'SET_ITALIC_TEXT':\n      return {\n        ...cardMaker.viewModel.text,\n        italic: action.isItalic\n      } as ViewModelText;\n\n    case 'SET_UNDERLINE_TEXT':\n      return {\n        ...cardMaker.viewModel.text,\n        underline: action.isUnderline\n      } as ViewModelText;\n\n    case 'SET_SELECTED_BLOCK': return defState;\n    case 'RESET_SELECTED_BLOCK': return defState;\n\n    case 'UNDO': return defState;\n\n    case 'REDO': return defState;\n\n    default:\n      return cardMaker.viewModel.text\n  }\n}\n\nexport default viewModel;","import {\n  ActionHistory,\n  ArtObj,\n  Img,\n  Text,\n  Background,\n  Filter,\n  Canvas,\n  CardMaker,\n  ViewModel,\n  BlockTypes,\n  Area\n} from \"./types\";\n\n\nconst testSetOfArtObject = {\n  boy: \"img/artObj/boy.png\",\n  frog: \"img/artObj/frog.png\",\n  girl: \"img/artObj/girl.png\",\n  loupe: \"img/artObj/loupe.png\",\n  palette: \"img/artObj/palette.png\",\n  pencil: \"img/artObj/pencil.png\",\n  rainbow: \"img/artObj/rainbow.png\",\n  snail: \"img/artObj/snail.png\",\n}\n\nconst testArtObj: ArtObj = {\n  id: \"d3df27cd-3053-21a6-4abe-9db51cda7c17\",\n  type: BlockTypes.artObj,\n  width: 150,\n  height: 150,\n  x: 20,\n  y: 280,\n  src: testSetOfArtObject.girl,\n}\n\nconst testImg: Img = {\n  id: \"4f406201-6f2f-b9ce-575e-438b1a7d1456\",\n  type: BlockTypes.img,\n  width: 320,\n  height: 238,\n  x: 100,\n  y: 270,\n  src: \"https://images.pexels.com/photos/3337209/pexels-photo-3337209.jpeg?cs=srgb&dl=pexels-mo-3337209.jpg&fm=jpg\",\n}\n\nconst testText: Text = {\n  id: \"9a13a85a-59ee-7ba3-1c64-fcad25650fc1\",\n  type: BlockTypes.text,\n  x: 200,\n  y: 280,\n  text: \"<div>Это</div><div>закат!!!</div>\",\n  size: 40,\n  bold: true,\n  italic: true,\n  underline: true,\n  color: \"#ffffff\",\n  fontFamily: \"Sensei\",\n}\n\nconst testBackground: Background = {\n  color: null,\n  src: \"https://images.pexels.com/photos/8175462/pexels-photo-8175462.jpeg?auto=compress&cs=tinysrgb&h=650&w=940\",\n  width: 867,\n  height: 650,\n}\n\nconst testFilter: Filter = {\n  color: \"#c1e319\",\n  opacity: 0.05,\n}\n\nconst deleteArea: Area[] = [\n  {\n    width: 100,\n    height: 50,\n    x: 150,\n    y: 200,\n  },\n  {\n    width: 70,\n    height: 50,\n    x: 350,\n    y: 175,\n  }\n];\n\n\nconst testCanvas: Canvas = {\n  width: 800,\n  height: 800,\n  filter: testFilter,\n  listBlock: [\n    testImg,\n    testArtObj,\n    testText\n  ],\n  deleteArea: deleteArea,\n  background: testBackground,\n}\n\nconst testActionHistory: ActionHistory = {\n  listState:\n    [\n      testCanvas,\n    ],\n  currentIndex: 0,\n}\n\nconst viewModel: ViewModel = {\n  bgColor: null,\n  bgImg: null,\n  canvasSize: null,\n  filter: null,\n  text: {\n    color: null,\n    size: null,\n    bold: null,\n    italic: null,\n    underline: null,\n    fontFamily: null,\n    tempColor: null,\n    tempSize: null,\n  },\n  areaSelection: null,\n}\n\nexport const testCardMaker: CardMaker = {\n  canvas: testCanvas,\n  selectBlock: null,\n  history: testActionHistory,\n  viewModel: viewModel,\n}","import { createStore, applyMiddleware, Store, MiddlewareAPI, Dispatch, AnyAction } from 'redux';\nimport { cardMakerReducer } from './reducers/CardMakerReducer';\nimport { testCardMaker as initialState } from './initialState';\nimport { CardMaker } from './types';\n\nimport { addHistory, afterChangeHistory } from './actionCreators/historyActionCreators';\n\n\nconst exceptions: string[] = [\n  'NEW_CARD_MAKER',\n  'ADD_HISTORY',\n  'AFTER_CHANGE_HISTORY',\n  'UNDO',\n  'REDO',\n  'SET_SELECTED_BLOCK',\n  'RESET_SELECTED_BLOCK',\n  'INPUT_SIZE_TEXT',\n  'INPUT_COLOR_TEXT',\n  'SET_SIZE_TEXT',\n  'SET_POSITION_AREA_SELECTION',\n  'RESET_AREA_SELECTION',\n  'AREA_SELECTION',\n  'INPUT_FILTER',\n  'INPUT_CANVAS_SIZE',\n  'INPUT_BACKGROUND_IMG',\n  'INPUT_BACKGROUND_COLOR',\n];\n\nconst storeHistory = (store: MiddlewareAPI<Dispatch<AnyAction>, CardMaker>) =>\n  (next: AppDispatch) => (action: AnyAction) => {\n    const oldState = store.getState();\n    const result = next(action)\n    const newState = store.getState();\n\n    if (!exceptions.includes(action.type)) {\n      if (JSON.stringify(oldState.canvas) !== JSON.stringify(newState.canvas)) {\n        console.log('сохранение истории');\n        store.dispatch(addHistory(newState.canvas));\n      }\n    }\n    return result\n  }\n\nconst valid: string[] = [\n  'UNDO',\n  'REDO',\n];\n\nconst movingHistory = (store: MiddlewareAPI<Dispatch<AnyAction>, CardMaker>) =>\n  (next: AppDispatch) => (action: AnyAction) => {\n    const result = next(action)\n\n    if ((valid.includes(action.type)) && (action.type !== 'AFTER_CHANGE_HISTORY')) {\n      const canvas = store.getState().history.listState[store.getState().history.currentIndex];\n      const newState = {\n        ...store.getState(),\n        canvas,\n      }\n      store.dispatch(afterChangeHistory(newState));\n    }\n    return result\n  }\n\nexport const store: Store<CardMaker> = createStore(\n  cardMakerReducer,\n  initialState,\n  applyMiddleware(storeHistory, movingHistory)\n);\n\nexport type RootState = ReturnType<typeof store.getState>\nexport type AppDispatch = typeof store.dispatch","import { CardMaker } from '../types';\nimport canvas, { CanvasAction } from './CanvasReducer';\nimport selectBlock, { SelectBlockAction } from './SelectBlockReducer';\nimport history, { HistoryAction } from './HistoryReducer';\nimport viewModel, { ViewModelAction } from './ViewModelReducer';\n\nexport type CardMakerReducerAction = {\n  type: 'AFTER_CHANGE_HISTORY',\n  cardMaker: CardMaker,\n} | {\n  type: 'APPLY_FILE_PROJECT',\n  project: CardMaker,\n} | CanvasAction | SelectBlockAction | HistoryAction | ViewModelAction;\n\nexport function cardMakerReducer(cardMaker: CardMaker = {} as CardMaker, action: CardMakerReducerAction): CardMaker {\n  switch (action.type) {\n\n    case 'AFTER_CHANGE_HISTORY':\n      return action.cardMaker;\n\n    case 'APPLY_FILE_PROJECT':\n      return action.project;\n\n    default:\n      return {\n        canvas: canvas(cardMaker.canvas, action as CanvasAction),\n        selectBlock: selectBlock(cardMaker.selectBlock, action as SelectBlockAction),\n        history: history(cardMaker.history, action as HistoryAction),\n        viewModel: viewModel(cardMaker, action as ViewModelAction)\n      }\n  }\n}\n\n","import { Canvas, CardMaker } from '../types';\n\nexport function addHistory(newCanvas: Canvas) {\n  return {\n    type: 'ADD_HISTORY',\n    newCanvas: newCanvas,\n  }\n}\n\nexport function undo() {\n  return {\n    type: 'UNDO',\n  }\n}\n\nexport function redo() {\n  return {\n    type: 'REDO',\n  }\n}\n\nexport function afterChangeHistory(cardMaker: CardMaker) {\n  return {\n    type: 'AFTER_CHANGE_HISTORY',\n    cardMaker: cardMaker,\n  }\n}","import { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTimes } from '@fortawesome/free-solid-svg-icons'\nimport { ReactElement, useEffect } from \"react\"\nimport { connect } from \"react-redux\"\nimport styles from './Modal.module.css';\n\n// интерфейс для пропсов\ntype ModalProps = {\n  visible: boolean\n  title: string\n  content: ReactElement | string\n  footer: ReactElement | string\n  onClose: () => void\n}\n\nconst Modal = ({\n  visible = false,\n  title = '',\n  content = '',\n  footer = '',\n  onClose,\n}: ModalProps) => {\n\n  // c помощью useEffect цепляем обработчик к нажатию клавиш\n  useEffect(() => {\n    // создаем обработчик нажатия клавиши Esc\n    const onKeydown = ({ key }: KeyboardEvent) => {\n      switch (key) {\n        case 'Escape':\n          onClose()\n          break\n      }\n    }\n    document.addEventListener('keydown', onKeydown)\n    return () => document.removeEventListener('keydown', onKeydown)\n  }, [onClose])\n\n  // если компонент невидим, то не отображаем его\n  if (!visible) {\n    return null;\n  }\n\n  // или возвращаем верстку модального окна\n  return <div className={styles.modal} onClick={onClose}>\n    <div className={styles.modalDialog} onClick={e => e.stopPropagation()}>\n      <div className={styles.modalHeader}>\n        <h3 className={styles.modalTitle}>{title}</h3>\n        <span className={styles.modalClose} onClick={onClose}>\n        <FontAwesomeIcon icon={faTimes} />\n        </span>\n      </div>\n      <div className={styles.modalBody}>\n        <div className={styles.modalContent}>{content}</div>\n      </div>\n      {footer && <div className={styles.modalFooter}>{footer}</div>}\n    </div>\n  </div>\n}\n\nexport default connect()(Modal)","import { faPiedPiperSquare } from '@fortawesome/free-brands-svg-icons'\nimport { connect } from 'react-redux';\nimport { useState } from 'react';\nimport { AppDispatch } from '../../../../../store/store';\nimport { newCardMaker } from '../../../../../store/actionCreators/cardMakerActionCreators';\nimport NavButton from '../NavButton/NavButton';\nimport Modal from '../../../../modal/Modal';\n\ntype NewProjectButtonProps = {\n  newCardMaker: () => void,\n}\n\nfunction NewProjectButton(props: NewProjectButtonProps) {\n  const [isModal, setModal] = useState(false)\n  const onClose = () => setModal(false)\n  const onAccept = () => {\n    props.newCardMaker();\n    onClose()\n  }\n\n  const content =\n    <>\n      <p>Несохраненные изменения будут потеряны</p>\n      <p>Вы хотите продолжить ?</p>\n    </>\n\n  const footer =\n    <>\n      <button onClick={onAccept}>Да</button>\n      <button onClick={onClose}>Нет</button>\n    </>\n\n\n  return (\n    <>\n      <NavButton label=\"Новая\" icon={faPiedPiperSquare} onClick={() => setModal(true)} />\n      <Modal\n        visible={isModal}\n        title=\"Новая открытка\"\n        content={content}\n        footer={footer}\n        onClose={onClose}\n      />\n    </>\n  );\n}\n\nconst mapDispatchToProps = (dispatch: AppDispatch) => {\n  return {\n    newCardMaker: () => dispatch(newCardMaker()),\n  }\n}\n\nexport default connect(null, mapDispatchToProps)(NewProjectButton);","\nimport { store } from \"../store/store\";\nimport { Text, Block, BlockTypes } from \"../store/types\";\n\nexport async function exportImg(type: string): Promise<void> {\n\n  const elements = store.getState().canvas.listBlock;\n  const deleteAreas = store.getState().canvas.deleteArea;\n\n  const width = store.getState().canvas.width;\n  const height = store.getState().canvas.height;\n  const background = store.getState().canvas.background;\n  const filter = store.getState().canvas.filter;\n\n  const canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  const ctx = canvas.getContext('2d') as CanvasRenderingContext2D;\n\n  // рендер фона\n  if (background.src) {\n    const img = new Image();\n    img.crossOrigin = 'anonymous'\n    img.src = background.src;\n    await img.decode();\n\n    let imgWidth = img.width;\n    let imgHeight = img.height;\n    \n    if (img.width < width) {\n      imgHeight = (img.height * width) / img.width;\n      imgWidth = (img.width * imgHeight) / img.height;\n    }\n\n    if (img.height < height) {\n      imgWidth = (img.width * height) / img.height;\n      imgHeight = (img.height * imgWidth) / img.width;\n    }\n    \n    ctx.drawImage(img, 0, 0, imgWidth, imgHeight);\n  } else if (background.color) {\n    ctx.fillStyle = background.color;\n    ctx.fillRect(0, 0, width, height);\n  }\n\n  // рендер блоков\n  for (let index = 0; index < elements.length; index++) {\n    await renderBlock(elements[index], ctx);\n  }\n\n  // рендер фильтра\n  const color = convertColor(filter.color);\n  ctx.fillStyle = `rgba(${color.r}, ${color.g}, ${color.b}, ${filter.opacity})`;\n  ctx.fillRect(0, 0, width, height);\n\n\n  ctx.fillStyle = '#ffffff';\n  deleteAreas.forEach(element => {\n    ctx.fillRect(element.x, element.y, element.width, element.height);\n  });\n\n  const dataURL = canvas.toDataURL(type);\n  const link = document.createElement(\"a\");\n  link.href = dataURL;\n  link.download = \"new-image\";\n  link.click();\n}\n\nasync function renderBlock(element: Block, ctx: CanvasRenderingContext2D) {\n  \n  // стандартный сдвиг объекта\n  const defShiftX = 5\n\n  // высота строки\n  const lineHeight = 1.2;\n\n  switch (element.type) {\n\n    // рендер текста\n    case BlockTypes.text:\n      const style = getStyle(element);\n      const textBlock = document.createElement('div');\n      textBlock.innerHTML = element.text;\n      // сдивг строки\n      let shift = 0;\n\n      // отрисовка строк\n      for (let str of Array.from(textBlock.children) as HTMLDivElement[]) {\n\n        ctx.fillStyle = style.color;\n        ctx.font = style.italic + ' ' + style.weight + ' ' + style.size + 'px ' + style.family;\n        ctx.fillText(str.innerText, element.x + defShiftX, element.y + shift + style.size);\n        // подчеркивание\n        if (element.underline) {\n          const textWidth = ctx.measureText(str.innerText).width;\n          let chars = 0;\n          let underline = '';\n          while (str.innerText.length > chars) {\n            underline += '_';\n            chars++;\n          }\n          ctx.font = `700 ${style.size}px openSans`;\n          ctx.fillText(underline, element.x + defShiftX, element.y + shift + style.size, textWidth);\n        }\n        shift += element.size * lineHeight;\n      }\n\n      break;\n\n    // рендер изображения\n    case BlockTypes.img:\n      const img = new Image();\n      img.crossOrigin = 'anonymous'\n      img.src = element.src;\n\n      await img.decode();\n      ctx.drawImage(img, element.x, element.y, element.width, element.height);\n      break;\n\n    // рендер арт-объекта\n    case BlockTypes.artObj:\n      const artObj = new Image();\n      artObj.crossOrigin = 'anonymous'\n      artObj.src = element.src;\n\n      await artObj.decode();\n      ctx.drawImage(artObj, element.x, element.y, element.width, element.height)\n      break;\n  }\n}\n\n// формирование стилей для текстового блока\nfunction getStyle(text: Text) {\n  return {\n    x: text.x,\n    y: text.y,\n    color: text.color,\n    size: text.size,\n    weight: text.bold ? '700' : '',\n    italic: text.italic ? 'italic' : '',\n    family: text.fontFamily,\n  };\n}\n\nexport type RGB = {\n  r: number,\n  g: number,\n  b: number\n}\n\n// конвертирование hex в rgb\nfunction convertColor(color: string): RGB {\n  if (color.substring(0, 1) === '#') {\n    color = color.substring(1);\n  }\n  const rgbColor: RGB = {\n    r: 255,\n    g: 255,\n    b: 255,\n  };\n  rgbColor.r = parseInt(color.substring(0, 2), 16);\n  rgbColor.g = parseInt(color.substring(2, 4), 16);\n  rgbColor.b = parseInt(color.substring(4), 16);\n  return rgbColor;\n}","import { faImage } from '@fortawesome/free-solid-svg-icons'\nimport { connect } from 'react-redux';\nimport { useRef, useState } from 'react';\nimport NavButton from '../NavButton/NavButton';\nimport Modal from '../../../../modal/Modal';\nimport { exportImg } from \"../../../../../utils/exportImg\";\n\nfunction ExportImgButton() {\n\n  const downloadImg = useRef<HTMLButtonElement>(null);\n\n  const [isModal, setModal] = useState(false)\n  const onClose = () => setModal(false)\n\n  const onAcceptJpg = () => {\n    exportImg('image/jpeg');\n    onClose();\n  }\n\n  const onAcceptPng = () => {\n    exportImg('image/png');\n    onClose();\n  }\n\n  const content =\n    <>\n      <p>Выберите формат сохраняемого файла</p>\n    </>\n\n  const footer =\n    <>\n      <button onClick={onAcceptJpg}>jpg</button>\n      <button onClick={onAcceptPng}>png</button>\n      <button onClick={onClose}>Отмена</button>\n    </>\n\n\n  return (\n    <>\n      <NavButton label=\"В jpg/png\" icon={faImage} onClick={() => setModal(true)} ref={downloadImg} />\n      <Modal\n        visible={isModal}\n        title=\"Сохранить как...\"\n        content={content}\n        footer={footer}\n        onClose={onClose}\n      />\n    </>\n  );\n}\n\nexport default connect()(ExportImgButton);","import styles from './DropdownMenu.module.css';\nimport { IconDefinition, SizeProp } from '@fortawesome/fontawesome-svg-core';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { connect } from 'react-redux';\n\ntype DropdownMenuProps = {\n  minWidth: number,\n  label: string,\n  icon: IconDefinition,\n  sizeIcon: SizeProp,\n  children: React.ReactElement[],\n}\nfunction DropdownMenu(props: DropdownMenuProps) {\n  return (\n    <div className={styles.dropdown}>\n      <button className={styles.dropbtn}>\n        <FontAwesomeIcon icon={props.icon} size={props.sizeIcon} />\n        {props.label !== '' &&\n          <span className={styles.dropdown_text}>{props.label}</span>\n        }\n      </button>\n      <div className={styles.dropdown_content} style={{minWidth: props.minWidth}}>\n        {props.children}\n      </div>\n    </div>\n  );\n}\n\nexport default connect()(DropdownMenu);\n","import styles from './PreviewTemplate.module.css';\nimport { useRef, useState } from 'react';\nimport { connect } from 'react-redux';\nimport { AppDispatch } from '../../../../store/store';\nimport Modal from '../../../modal/Modal';\nimport { CardMaker as CardMakerType } from '../../../../store/types';\nimport { applyFileProject } from '../../../../store/actionCreators/cardMakerActionCreators';\n\ntype PreviewTemplateProps = {\n  name: string,\n  srcImg: string,\n  srcJson: string,\n  applyFileProject: (tepmlate: CardMakerType) => void,\n}\n\nfunction PreviewTemplate(props: PreviewTemplateProps) {\n\n  const [isModal, setModal] = useState(false)\n  const onClose = () => setModal(false)\n  \n  const onAccept = async () => {\n    const response = await fetch(props.srcJson);\n    props.applyFileProject(await response.json());\n    onClose()\n  }\n\n  const content =\n    <>\n      <p>Несохраненные изменения будут потеряны</p>\n      <p>Вы хотите продолжить ?</p>\n    </>\n\n  const footer =\n    <>\n      <button onClick={onAccept}>Да</button>\n      <button onClick={onClose}>Нет</button>\n    </>\n\n\n  const img = useRef<HTMLImageElement>(null);\n  return (\n    <>\n      <div className={styles.preview} onClick={() => setModal(true)}>\n        <img src={props.srcImg} alt='' ref={img} className={styles.img} />\n        <p>{props.name}</p>\n      </div>\n      <Modal\n        visible={isModal}\n        title=\"Применение шаблона\"\n        content={content}\n        footer={footer}\n        onClose={onClose}\n      />\n    </>\n  );\n}\n\nconst mapDispatchToProps = (dispatch: AppDispatch) => {\n  return {\n    applyFileProject: (template: CardMakerType) => dispatch(applyFileProject(template)),\n  }\n}\n\nexport default connect(null, mapDispatchToProps)(PreviewTemplate);","import styles from './Navbar.module.css';\nimport { faClone, faUndo, faRedo, faFileExport, faFolderOpen } from '@fortawesome/free-solid-svg-icons'\nimport NavButton from './navButton/NavButton/NavButton';\nimport NavFileButton from './navButton/NavFileButton/NavFileButton';\nimport { ReactElement, useRef } from 'react';\nimport { useImportFileProject } from './useImportFileProject';\nimport { useStateHistory } from './useStateHistory';\nimport { connect } from 'react-redux';\nimport { undo, redo } from '../../../store/actionCreators/historyActionCreators';\nimport { applyFileProject } from '../../../store/actionCreators/cardMakerActionCreators';\nimport { CardMaker as CardMakerType, templates } from '../../../store/types';\nimport { AppDispatch } from '../../../store/store';\nimport { useExportFileProject } from './useExportFileProject';\nimport NewProjectButton from './navButton/NewProjectButton/NewProjectButton';\nimport ExportImgButton from './navButton/ExportImgButton/ExportImgButton';\nimport DropdownMenu from '../../dropdownMenu/DropdownMenu';\nimport PreviewTemplate from './previewTemplate/PreviewTemplate';\n\ntype NavbarProps = {\n  undo: () => void,\n  redo: () => void,\n  applyFileProject: (file: CardMakerType) => void,\n}\n\nfunction Navbar(props: NavbarProps) {\n  const buttonUndo = useRef<HTMLButtonElement>(null);\n  const buttonRedo = useRef<HTMLButtonElement>(null);\n  useStateHistory(\n    buttonUndo,\n    buttonRedo,\n    props.undo,\n    props.redo,\n  );\n\n  const inputFile = useRef<HTMLInputElement>(null);\n  const downloadFile = useRef<HTMLButtonElement>(null);\n\n  useImportFileProject(inputFile, props.applyFileProject);\n  useExportFileProject(downloadFile);\n\n\n  // формирование списка стикеров\n  let srcList = Object.values(templates);\n  let previewList: ReactElement[] = [];\n  srcList.forEach((tmp, index) => {\n    previewList.push(<PreviewTemplate name={tmp.name} srcImg={tmp.preview} srcJson={tmp.json} key={index} />);\n  });\n\n\n  return (\n    <>\n      <nav className={styles.navbar}>\n        <NavFileButton label=\"Открыть\" icon={faFolderOpen} ref={inputFile} />\n        <NewProjectButton />\n        <ExportImgButton />\n        <NavButton label=\"в json\" icon={faFileExport} ref={downloadFile} onClick={null} />\n        <DropdownMenu minWidth={450} label=\"Шаблоны\" icon={faClone} sizeIcon='1x'>\n          {previewList}\n        </DropdownMenu>\n        <NavButton label=\"\" icon={faUndo} ref={buttonUndo} onClick={null} />\n        <NavButton label=\"\" icon={faRedo} ref={buttonRedo} onClick={null} />\n      </nav>\n    </>\n  );\n}\nconst mapDispatchToProps = (dispatch: AppDispatch) => {\n  return {\n    undo: () => dispatch(undo()),\n    redo: () => dispatch(redo()),\n    applyFileProject: (file: CardMakerType) => dispatch(applyFileProject(file)),\n  }\n}\n\nexport default connect(null, mapDispatchToProps)(Navbar);\n","import { RefObject, useEffect } from 'react';\nimport { verify } from '../../../utils/permisions';\n\nexport function useStateHistory(\n  buttonUndo: RefObject<HTMLButtonElement>,\n  buttonRedo: RefObject<HTMLButtonElement>,\n  undo: () => void,\n  redo: () => void,\n): void {\n\n\n  useEffect(() => {\n\n    const btnUndo = buttonUndo.current;\n    const btnRedo = buttonRedo.current;\n\n    function handlerClickUndo(): void {\n      undo();\n    }\n  \n    function handlerClickRedo(): void {\n      redo();\n    }\n  \n    function handlerKeydown(event: KeyboardEvent): void {\n      if (event.code === 'KeyZ' && (event.ctrlKey || event.metaKey)) {\n        undo();\n      }\n      if (event.code === 'KeyY' && (event.ctrlKey || event.metaKey)) {\n        redo();\n      }\n    }\n    \n    \n    verify(btnUndo).addEventListener(\"click\", handlerClickUndo);\n    verify(btnRedo).addEventListener(\"click\", handlerClickRedo);\n    document.addEventListener(\"keydown\", handlerKeydown);\n    return () => {\n      if (btnUndo) btnUndo.removeEventListener(\"click\", handlerClickUndo);\n      if (btnRedo) btnRedo.removeEventListener(\"click\", handlerClickRedo);\n      document.removeEventListener(\"keydown\", handlerKeydown);\n    };\n  }, [buttonUndo, buttonRedo, undo, redo]);\n}","import { RefObject, useEffect } from 'react';\nimport { store } from '../../../store/store';\nimport { verify } from '../../../utils/permisions';\n\nexport function useExportFileProject(downloadButton: RefObject<HTMLButtonElement>): void {\n\n  useEffect(() => {\n\n    const button = downloadButton.current;\n\n    function handlerClickSaveToJson(event: Event): void {\n      const cardMaker = store.getState();\n      const json = JSON.stringify({\n        ...cardMaker,\n        history: {\n          listState: [cardMaker.canvas],\n          currentIndex: 0,\n        }\n      });\n      const file = new Blob([json], { type: 'application/json' });\n      let link = document.createElement(\"a\");\n      link.href = URL.createObjectURL(file);\n      link.download = \"Новый проект.json\";\n      link.click();\n    }\n\n    \n    verify(button).addEventListener(\"click\", handlerClickSaveToJson);\n    return () => {\n      if (button) button.removeEventListener(\"click\", handlerClickSaveToJson);\n    };\n  }, [downloadButton]);\n}","import { getProjectFromFile } from '../../../utils/files';\nimport { RefObject, useEffect } from 'react';\nimport { CardMaker as CardMakerType } from '../../../store/types';\nimport { verify } from '../../../utils/permisions';\n\nexport function useImportFileProject(\n  inputFile: RefObject<HTMLInputElement>,\n  applyFileProject: (file: CardMakerType) => void): void {\n\n  useEffect(() => {\n\n    const input = inputFile.current;\n\n    async function handlerChangeInputFile(event: Event): Promise<void> {\n      const target = event.target as HTMLInputElement;\n      const files = target.files as FileList;\n      // applyFileProject(await getProjectFromFile(files[0]))\n      try {\n        applyFileProject(await getProjectFromFile(files[0]))\n      } catch {\n        alert('Текст ошибки')\n      }\n\n      target.value = '';\n    }\n\n    \n    verify(input).addEventListener(\"change\", handlerChangeInputFile);\n    return () => {\n      if (input) input.removeEventListener(\"change\", handlerChangeInputFile);\n    };\n  }, [inputFile, applyFileProject]);\n}","import { store } from '../store';\n\nexport function createTextBlock() {\n  return {\n    type: 'CREATE_TEXT_BLOCK',\n    x: store.getState().canvas.width / 2,\n    y: store.getState().canvas.height / 2,\n  }\n}\n\nexport function setTextInTextBlock(text: string) {\n  return {\n    type: 'SET_TEXT_IN_TEXT_BLOCK',\n    id: store.getState().selectBlock,\n    text: text,\n  }\n}\n\nexport function setFontFamilyText(fontFamily: string) {\n  return {\n    type: 'SET_FONT_FAMILY_TEXT',\n    id: store.getState().selectBlock,\n    fontFamily: fontFamily,\n  }\n}\n\nexport function setBoldText(isBold: boolean) {\n  return {\n    type: 'SET_BOLD_TEXT',\n    id: store.getState().selectBlock,\n    isBold: isBold,\n  }\n}\n\nexport function setItalicText(isItalic: boolean) {\n  return {\n    type: 'SET_ITALIC_TEXT',\n    id: store.getState().selectBlock,\n    isItalic: isItalic,\n  }\n}\n\nexport function setUnderlineText(isUnderline: boolean) {\n  return {\n    type: 'SET_UNDERLINE_TEXT',\n    id: store.getState().selectBlock,\n    isUnderline: isUnderline,\n  }\n}\n\nexport function setSizeText(size: number) {\n  return {\n    type: 'SET_SIZE_TEXT',\n    id: store.getState().selectBlock,\n    size: size,\n  }\n}\n\nexport function inputColorText(color: string) {\n  return {\n    type: 'INPUT_COLOR_TEXT',\n    color: color,\n  }\n}\n\nexport function inputSizeText(size: number) {\n  return {\n    type: 'INPUT_SIZE_TEXT',\n    size: size,\n  }\n}\n\nexport function setColorText(color: string) {\n  return {\n    type: 'SET_COLOR_TEXT',\n    id: store.getState().selectBlock,\n    color: color,\n  }\n}","import styles from './ButtonEditText.module.css';\nimport { IconDefinition } from '@fortawesome/fontawesome-svg-core';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { useRef } from 'react';\nimport { connect } from 'react-redux';\nimport { useEditStateText } from './useEditStateText';\n\ntype ButtonEditTextProps = {\n  icon: IconDefinition,\n  enabled: boolean | null,\n  modifyFn: ((enabled: boolean) => void) | (() => void),\n  param: boolean,\n}\n\nfunction ButtonEditText(props: ButtonEditTextProps) {\n  const button = useRef<HTMLButtonElement>(null);\n\n  useEditStateText(button, props.enabled,  props.modifyFn, props.param);\n\n  return (\n    <button className={styles.button + ' ' + (props.enabled ? styles.active : '')} ref={button}>\n      <FontAwesomeIcon icon={props.icon} />\n    </button>\n  );\n};\n\n\nexport default connect()(ButtonEditText);","import { RefObject, useEffect } from \"react\";\nimport { verify } from \"../../../../../utils/permisions\";\n\nexport function useEditStateText(\n  button: RefObject<HTMLButtonElement>,\n  enabled: boolean | null,\n  modifyFn: (() => void) | ((enabled: boolean) => void),\n  param: boolean) {\n\n  useEffect(() => {\n\n    const btn = button.current;\n\n    function handleClickButton(event: Event) {\n      if (enabled !== null) {\n        modifyFn(!enabled)\n        event.preventDefault();\n      } else if (!param) {\n        modifyFn(true)\n      }\n    }\n\n\n    verify(btn).addEventListener(\"click\", handleClickButton);\n    return () => {\n      if (btn) btn.removeEventListener(\"click\", handleClickButton);\n    };\n  }, [button, modifyFn, enabled, param]);\n}","import styles from './ColorPicker.module.css';\nimport { useRef } from 'react';\nimport { connect } from 'react-redux';\nimport { AppDispatch, RootState } from '../../../../../store/store';\nimport { inputColorText, setColorText } from '../../../../../store/actionCreators/textBlockActionCreators';\nimport { useEditColorText } from './useEditColorText';\n\ntype ColorPickerProps = {\n  setColorText: (color: string) => void,\n  inputColorText: (color: string) => void,\n  color: string | null\n}\n\nfunction ColorPicker(props: ColorPickerProps) {\n  const colorPicker = useRef<HTMLInputElement>(null);\n  useEditColorText(props.color, colorPicker, props.setColorText, props.inputColorText);\n  return (\n    <input type=\"color\"\n      ref={colorPicker}\n      className={styles.input}\n    />\n  );\n}\n\nfunction mapStateToProps(state: RootState) {\n  return {\n    color: state.viewModel.text.color,\n  }\n};\n\nconst mapDispatchToProps = (dispatch: AppDispatch) => {\n  return {\n    setColorText: (color: string) => dispatch(setColorText(color)),\n    inputColorText: (color: string) => dispatch(inputColorText(color)),\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ColorPicker);\n","import { RefObject, useEffect } from \"react\";\nimport { verify } from \"../../../../../utils/permisions\";\n\nexport function useEditColorText(\n  color: string | null,\n  colorPicker: RefObject<HTMLInputElement>,\n  setColorText: (color: string) => void,\n  inputColorText: (color: string) => void) {\n\n  useEffect(() => {\n\n    const inputColor = colorPicker.current;\n\n    verify(inputColor).value = color ? color : '#000000';\n\n    function handleInput(event: Event) {\n      const target = event.target as HTMLOptionElement;\n      inputColorText(target.value);\n    }\n  \n    function handleChange(event: Event) {\n      const target = event.target as HTMLOptionElement;\n      setColorText(target.value);\n    }\n    \n    function handleClick(event: Event) {\n      event.stopImmediatePropagation();\n    }\n\n\n    verify(inputColor).addEventListener(\"input\", handleInput);\n    verify(inputColor).addEventListener(\"change\", handleChange);\n    verify(inputColor).addEventListener(\"click\", handleClick);\n    return () => {\n      if (inputColor) {\n        inputColor.removeEventListener(\"input\", handleInput);\n        inputColor.removeEventListener(\"change\", handleChange);\n        inputColor.removeEventListener(\"click\", handleClick);\n      }\n    };\n  }, [color, colorPicker, setColorText, inputColorText]);\n}","import styles from './InputNumber.module.css';\nimport { connect } from 'react-redux';\nimport { useEditFontSize } from './useEditFontSize';\nimport { useRef } from 'react';\nimport { AppDispatch, RootState } from '../../../../../store/store';\nimport { inputSizeText, setSizeText } from '../../../../../store/actionCreators/textBlockActionCreators';\n\ntype InputNumberProps = {\n  size: number | null,\n  tempSize: number | null,\n  setSizeText: (size: number) => void,\n  inputSizeText: (size: number) => void,\n}\n\nfunction InputNumber(props: InputNumberProps) {\n  const inputNumber = useRef<HTMLInputElement>(null);\n  useEditFontSize(props.size, inputNumber, props.setSizeText, props.inputSizeText);\n  \n\n  return (\n    <input type=\"number\"\n      ref={inputNumber}\n      className={styles.input__number}\n      min={10}\n      max={150}\n      step={1}\n    />\n  )\n}\n\nfunction mapStateToProps(state: RootState) {\n  return {\n    size: state.viewModel.text.size,\n    tempSize: state.viewModel.text.tempSize,\n  }\n};\n\nconst mapDispatchToProps = (dispatch: AppDispatch) => {\n  return {\n    setSizeText: (size: number) => dispatch(setSizeText(size)),\n    inputSizeText: (size: number) => dispatch(inputSizeText(size))\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(InputNumber);\n","import { RefObject, useEffect } from \"react\";\nimport { verify } from \"../../../../../utils/permisions\";\n\nexport function useEditFontSize(\n  size: number | null,\n  input: RefObject<HTMLInputElement>,\n  setSizeText: (size: number) => void,\n  inputSizeText: (size: number) => void) {\n\n  useEffect(() => {\n\n    const fieldSize = input.current;\n\n    verify(fieldSize).value = size ? String(size) : \"10\";\n\n    function handleInput(event: Event) {\n      const target = event.target as HTMLOptionElement;\n      inputSizeText(Number(target.value));\n    }\n  \n    function handleBlur(event: Event) {\n      const target = event.target as HTMLOptionElement;\n      setSizeText(Number(target.value));\n    }\n    \n    function handleClick(event: Event) {\n      event.stopImmediatePropagation();\n    }\n\n\n    verify(fieldSize).addEventListener(\"input\", handleInput);\n    verify(fieldSize).addEventListener(\"blur\", handleBlur);\n    verify(fieldSize).addEventListener(\"click\", handleClick);\n    return () => {\n      if (fieldSize) {\n        fieldSize.removeEventListener(\"input\", handleInput);\n        fieldSize.removeEventListener(\"blur\", handleBlur);\n        fieldSize.removeEventListener(\"click\", handleClick);\n      }\n    };\n  }, [size, input, setSizeText, inputSizeText]);\n}","import { connect } from 'react-redux';\nimport { AppDispatch, RootState } from '../../../../../store/store';\nimport styles from './SelectFontFamily.module.css';\nimport { useRef } from 'react';\nimport { useSelectFont } from './useSelectFont';\nimport { setFontFamilyText } from '../../../../../store/actionCreators/textBlockActionCreators';\n\ntype SelectFontFamilyProps = {\n  fontFamily: string | null\n  setFontFamilyText: (fontFamily: string) => void,\n}\n\nfunction SelectFontFamily(props: SelectFontFamilyProps) {\n  const select = useRef<HTMLSelectElement>(null);\n\n  useSelectFont(select, props.setFontFamilyText);\n\n  const listParameters = [\n    { value: 'Fantazyor', class: styles.fantazyor },\n    { value: 'Piroucyrillic', class: styles.piroucyrillic },\n    { value: 'Phenomena', class: styles.phenomena },\n    { value: 'Sunday', class: styles.sunday },\n    { value: 'Kurale', class: styles.kurale },\n    { value: 'Sensei', class: styles.sensei },\n    { value: 'Borsok', class: styles.borsok },\n    { value: 'Summer', class: styles.summer },\n    { value: 'Underdog', class: styles.underdog },\n    { value: 'Montserrat', class: styles.montserrat },\n    { value: 'OpenSans', class: styles.openSans },\n    { value: 'Comfortaa', class: styles.comfortaa },\n    { value: 'Rubik', class: styles.rubik },\n    { value: 'Marta', class: styles.marta },\n  ]\n\n  let fontFamilies: JSX.Element[] = listParameters.map((element, index) => {\n    return <option key={index} className={element.class} value={element.value}>{element.value}</option>\n  })\n\n  let currentStyle: string = fontFamilies[0].props.className;\n\n  fontFamilies = fontFamilies.map((element: JSX.Element) => {\n    if (element.props.value === props.fontFamily) {\n      currentStyle = element.props.className;\n      return {\n        ...element,\n        props: {\n          ...element.props,\n          selected: true\n        }\n      }\n    } else {\n      return element\n    }\n  });\n\n  return (\n    <select name=\"\" id=\"\" className={styles.select + ' ' + currentStyle} ref={select}>\n      {fontFamilies}\n    </select>\n  );\n}\n\nfunction mapStateToProps(state: RootState) {\n  let fontFamily: string | null = null;\n  if (state.viewModel.text?.fontFamily) {\n    fontFamily = state.viewModel.text.fontFamily;\n  }\n  return {\n    fontFamily: fontFamily\n  }\n};\n\nconst mapDispatchToProps = (dispatch: AppDispatch) => {\n  return {\n    setFontFamilyText: (fontFamily: string) => dispatch(setFontFamilyText(fontFamily)),\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(SelectFontFamily);","import { RefObject, useEffect } from \"react\";\nimport { verify } from \"../../../../../utils/permisions\";\n\nexport function useSelectFont(\n  select: RefObject<HTMLSelectElement>,\n  setFontFamilyText: (fontFamily: string) => void) {\n\n  useEffect(() => {\n\n    const selectFontFamily = select.current;\n    \n    function handleClick(event: Event) {\n      event.stopImmediatePropagation();\n    }\n\n    function handleChange(event: Event) {\n      const target = event.target as HTMLOptionElement;\n      setFontFamilyText(target.value);\n    }\n\n    \n    verify(selectFontFamily).addEventListener(\"click\", handleClick);\n    verify(selectFontFamily).addEventListener(\"change\", handleChange);\n    return () => {\n      if (selectFontFamily) {\n        selectFontFamily.removeEventListener(\"click\", handleClick);\n        selectFontFamily.removeEventListener(\"change\", handleChange);\n      }\n    };\n  }, [select, setFontFamilyText]);\n}","import styles from './ToolbarText.module.css';\nimport { faBold, faItalic, faUnderline, faFont } from '@fortawesome/free-solid-svg-icons'\nimport { connect } from 'react-redux';\nimport { AppDispatch, RootState } from '../../../../store/store';\nimport { createTextBlock, setBoldText, setItalicText, setUnderlineText } from '../../../../store/actionCreators/textBlockActionCreators';\nimport ButtonEditText from './buttonEditText/ButtonEditText';\nimport ColorPicker from './colorPicker/ColorPicker';\nimport InputNumber from './inputNumber/InputNumber';\nimport SelectFontFamily from './selectFontFamily/SelectFontFamily';\n\n\ntype ToolbarTextProps = {\n  createTextBlock: () => void,\n  setBoldText: (isBold: boolean) => void,\n  setItalicText: (isItalic: boolean) => void,\n  setUnderlineText: (isUnderline: boolean) => void,\n  bold: boolean | null,\n  italic: boolean | null,\n  underline: boolean | null,\n}\n\nfunction ToolbarText(props: ToolbarTextProps) {\n  return (\n    <div className={styles.toolbar}>\n\n      <div className={styles.toolbar__row}>\n        <SelectFontFamily />\n        <ButtonEditText icon={faFont} enabled={null} modifyFn={props.createTextBlock} param={false} />\n      </div>\n\n      <div className={styles.toolbar__row}>\n        <InputNumber />\n\n        <ButtonEditText icon={faBold} enabled={props.bold} modifyFn={props.setBoldText}  param={true}/>\n        <ButtonEditText icon={faItalic} enabled={props.italic} modifyFn={props.setItalicText}  param={true}/>\n        <ButtonEditText icon={faUnderline} enabled={props.underline} modifyFn={props.setUnderlineText}  param={true}/>\n        <div className={styles.colorPickerBox}>\n          <ColorPicker />\n        </div>\n      </div>\n\n      <label className={styles.toolbar__label}>Текст</label>\n    </div>\n  );\n}\n\nfunction mapStateToProps(state: RootState) {\n  return {\n    bold: state.viewModel.text.bold,\n    italic: state.viewModel.text.italic,\n    underline: state.viewModel.text.underline,\n  }\n};\n\nconst mapDispatchToProps = (dispatch: AppDispatch) => {\n  return {\n    createTextBlock: () => dispatch(createTextBlock()),\n    setBoldText: (isBold: boolean) => dispatch(setBoldText(isBold)),\n    setItalicText: (isItalic: boolean) => dispatch(setItalicText(isItalic)),\n    setUnderlineText: (isUnderline: boolean) => dispatch(setUnderlineText(isUnderline)),\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(ToolbarText);\n","import styles from './AddImgButton.module.css';\nimport { IconDefinition } from '@fortawesome/fontawesome-svg-core';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { ForwardedRef, forwardRef } from 'react';\nimport { connect } from 'react-redux';\n\ntype NavButtonProps = {\n  label: string,\n  title: string,\n  icon: IconDefinition,\n}\n\nconst AddImgButton = forwardRef((props: NavButtonProps, ref: ForwardedRef<HTMLButtonElement>) => (\n  <button\n    ref={ref}\n    className={styles.button}\n    title={props.title}>\n    <FontAwesomeIcon icon={props.icon} size=\"lg\" />\n    {props.label !== '' &&\n      <span className={styles.button__text}>{props.label}</span>\n    }\n  </button>\n));\n\nexport default connect(null, null, null, { forwardRef: true })(AddImgButton);","import styles from './AddImgButtonFile.module.css';\nimport { IconDefinition } from '@fortawesome/fontawesome-svg-core';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { ForwardedRef, forwardRef } from 'react';\nimport { connect } from 'react-redux';\n\ntype NavButtonProps = {\n  label: string,\n  title: string,\n  icon: IconDefinition,\n}\n\nconst AddImgButton = forwardRef((props: NavButtonProps, ref: ForwardedRef<HTMLInputElement>) => (\n  <button className={styles.button}>\n    <label htmlFor=\"input-file-img\" className={styles.icon}>\n      <FontAwesomeIcon icon={props.icon} size=\"lg\" />\n    </label>\n    <input\n      className={styles.inputFile}\n      type=\"file\"\n      accept=\".png,.jpg,.jfif,.jpe,.jpeg\"\n      ref={ref}\n      id=\"input-file-img\"\n    />\n    {props.label !== '' &&\n      <label className={styles.button__text}\n        htmlFor=\"input-file-img\">\n        {props.label}\n      </label>\n    }\n  </button>\n));\n\nexport default connect(null, null, null, { forwardRef: true })(AddImgButton);","import styles from './PreviewArtObj.module.css';\nimport { useCreateArtObj } from './useCreateArtObj';\nimport { useRef } from 'react';\nimport { connect } from 'react-redux';\nimport { AppDispatch } from '../../../../../store/store';\nimport { createArtObjBlock } from '../../../../../store/actionCreators/artObjBlockActionCreators';\n\ntype PreviewArtObjProps = {\n  src: string,\n  createArtObjBlock: (src: string) => void,\n}\n\nfunction PreviewArtObj(props: PreviewArtObjProps) {\n\n  const img = useRef<HTMLImageElement>(null);\n  useCreateArtObj(img, props.src, props.createArtObjBlock);\n  return (\n    <img src={props.src} alt='' ref={img} className={styles.sticker} />\n  );\n}\n\nconst mapDispatchToProps = (dispatch: AppDispatch) => {\n  return {\n    createArtObjBlock: (src: string) => dispatch(createArtObjBlock(src)),\n  }\n}\n\nexport default connect(null, mapDispatchToProps)(PreviewArtObj);","import { store } from \"../store\";\n\nexport function createArtObjBlock(src: string) {\n  return {\n    type: 'CREATE_ART_OBJ_BLOCK',\n    src: src,\n    x: (store.getState().canvas.width / 2) - 75,\n    y: (store.getState().canvas.height / 2) - 75,\n  }\n}\n","import { RefObject, useEffect } from \"react\";\nimport { verify } from \"../../../../../utils/permisions\";\n\nexport function useCreateArtObj(\n  artObj: RefObject<HTMLElement>,\n  src: string,\n  createArtObjBlock: (src: string) => void) {\n\n  useEffect(() => {\n\n    const artObjPreview = artObj.current;\n\n    function handleClickArtObj() {\n      createArtObjBlock(src);\n    }\n\n\n    verify(artObjPreview).addEventListener(\"click\", handleClickArtObj);\n    return () => {\n      if (artObjPreview) artObjPreview.removeEventListener(\"click\", handleClickArtObj);\n    };\n  }, [artObj, src, createArtObjBlock]);\n}","import styles from './ToolbarImg.module.css';\nimport { faDownload, faGlobe, faStickyNote } from '@fortawesome/free-solid-svg-icons'\nimport DropdownMenu from '../../../dropdownMenu/DropdownMenu';\nimport AddImgButton from './addImgButton/AddImgButton';\nimport AddImgButtonFile from './addImgButtonFile/AddImgButtonFile';\nimport PreviewArtObj from './previewArtObj/PreviewArtObj';\nimport { SetOfArtObject } from '../../../../store/types';\nimport { useCreateImg } from './useCreateImg';\nimport { ReactElement } from 'react';\nimport { useRef } from 'react';\nimport { connect } from 'react-redux';\nimport { AppDispatch } from '../../../../store/store';\nimport { createImgBlock } from '../../../../store/actionCreators/imgBlockActionCreators';\n\ntype ToolbarImgProps = {\n  createImgBlock: (src: string, width: number, height: number) => void,\n}\n\nfunction ToolbarImg(props: ToolbarImgProps) {\n\n  // формирование списка стикеров\n  let srcList: SetOfArtObject[] = Object.values(SetOfArtObject);\n  let imgList: ReactElement[] = [];\n  srcList.forEach((src, index) => {\n    imgList.push(<PreviewArtObj src={src} key={index} />);\n  });\n\n  const inputFile = useRef<HTMLInputElement>(null);\n\n  useCreateImg(inputFile, props.createImgBlock);\n  return (\n    <div className={styles.toolbar}>\n      <div className={styles.button_box}>\n        <AddImgButtonFile label=\"\" title=\"C компьютера\" icon={faDownload} ref={inputFile} />\n        <AddImgButton label=\"\" title=\"Из Pixels\" icon={faGlobe} />\n        <DropdownMenu minWidth={200} label=\"\" icon={faStickyNote} sizeIcon='lg'>\n          {imgList}\n        </DropdownMenu>\n      </div>\n      <label className={styles.toolbar__label}>Изображения</label>\n    </div>\n  );\n}\n\nconst mapDispatchToProps = (dispatch: AppDispatch) => {\n  return {\n    createImgBlock: (src: string, width: number, height: number) => dispatch(createImgBlock(src, width, height)),\n  }\n}\n\nexport default connect(null, mapDispatchToProps)(ToolbarImg);\n","import { store } from \"../store\"\nexport function createImgBlock(src: string, width: number, height: number) {\n  return {\n    type: 'CREATE_IMG_BLOCK',\n    src: src,\n    width: width,\n    height: height,\n    x: (store.getState().canvas.width / 2) - (width / 2),\n    y: (store.getState().canvas.height / 2) - (height / 2),\n  }\n}","import { RefObject, useEffect } from \"react\";\nimport { getImgInformationFromFile } from '../../../../utils/files';\nimport { verify } from \"../../../../utils/permisions\";\n\nexport function useCreateImg(\n  inputFile: RefObject<HTMLElement>,\n  createImgBlock: (src: string, width: number, height: number) => void) {\n\n  useEffect(() => {\n\n    const fieldFile = inputFile.current;\n\n    async function handlerChangeInput(event: Event): Promise<void> {\n      const target = event.target as HTMLInputElement;\n      const files = target.files as FileList;\n\n      try {\n        const imgInfo = await getImgInformationFromFile(files[0]);\n        createImgBlock(imgInfo.src, imgInfo.width, imgInfo.height);\n      } catch {\n        alert('Текст ошибки')\n      }\n      \n      target.value = '';\n    }\n\n\n    verify(fieldFile).addEventListener(\"change\", handlerChangeInput);\n    return () => {\n      if (fieldFile) fieldFile.removeEventListener(\"change\", handlerChangeInput);\n    };\n  }, [inputFile, createImgBlock]);\n}","import styles from './ColorPicker.module.css';\nimport { ForwardedRef, forwardRef } from 'react';\nimport { connect } from 'react-redux';\n\nconst ColorPicker = forwardRef((props: {}, ref: ForwardedRef<HTMLInputElement>) => (\n  <input type=\"color\"\n    ref={ref}\n    className={styles.input__color}\n  />\n));\n\nexport default connect(null, null, null, { forwardRef: true })(ColorPicker);\n","import { store } from \"../store\"\n\nexport function setCanvasSize(width: number, height: number) {\n  return {\n    type: 'SET_CANVAS_SIZE',\n    width: width,\n    height: height,\n  }\n}\n\nexport function setFilter(color: string, opacity: number) {\n  return {\n    type: 'SET_FILTER',\n    color: color,\n    opacity: opacity,\n  }\n}\n\nexport function setBackgroundColor(color: string) {\n  return {\n    type: 'SET_BACKGROUND_COLOR',\n    color: color,\n  }\n}\n\nexport function setBackgroundImg(src: string, width: number, height: number) {\n  return {\n    type: 'SET_BACKGROUND_IMG',\n    src: src,\n    width: width,\n    height: height,\n  }\n}\n\nexport function resetBackground() {\n  return {\n    type: 'RESET_BACKGROUND',\n  }\n}\n\nexport function inputBackgroundColor(color: string) {\n  return {\n    type: 'INPUT_BACKGROUND_COLOR',\n    color: color,\n  }\n}\n\nexport function inputBackgroundImg(src: string, width: number, height: number) {\n  return {\n    type: 'INPUT_BACKGROUND_IMG',\n    src: src,\n    width: width,\n    height: height,\n  }\n}\n\nexport function inputCanvasSize(width: number, height: number) {\n  return {\n    type: 'INPUT_CANVAS_SIZE',\n    width: width,\n    height: height,\n  }\n}\n\nexport function inputFilter(color: string, opacity: number) {\n  return {\n    type: 'INPUT_FILTER',\n    color: color,\n    opacity: opacity,\n  }\n}\n\nexport function areaSelection(x: number, y: number, width: number, height: number) {\n  return {\n    type: 'AREA_SELECTION',\n    x: x,\n    y: y,\n    width: width,\n    height: height,\n  }\n}\n\nexport function resetAreaSelection() {\n  return {\n    type: 'RESET_AREA_SELECTION',\n  }\n}\n\nexport function setPositionAreaSelection(x: number, y: number) {\n  return {\n    type: 'SET_POSITION_AREA_SELECTION',\n    x: x,\n    y: y,\n  }\n}\n\nexport function deleteAreaSelection() {\n  return {\n    type: 'DELETE_AREA_SELECTION',\n    area: store.getState().viewModel.areaSelection,\n  }\n}\n","import styles from './ToolbarFilter.module.css';\r\nimport ColorPicker from '../colorPicker/ColorPicker';\r\nimport { RefObject, useRef } from 'react';\r\nimport { useStateFilter } from './useStateFilter';\r\nimport { AppDispatch, RootState } from '../../../../store/store';\r\nimport { inputFilter, setFilter } from '../../../../store/actionCreators/canvasActionCreators';\r\nimport { connect } from 'react-redux';\r\nimport { Filter as FilterType } from '../../../../store/types';\r\n\r\ntype ToolbarFilterProps = {\r\n  inputFilter: (color: string, opacity: number) => void,\r\n  setFilter: (color: string, opacity: number) => void,\r\n  filter: FilterType,\r\n}\r\n\r\nfunction ToolbarFilter(props: ToolbarFilterProps) {\r\n  const inputColor = useRef<HTMLInputElement>(null);\r\n  const inputRange = useRef<HTMLInputElement>(null);\r\n  useStateFilter(\r\n    inputColor,\r\n    inputRange,\r\n    props.inputFilter,\r\n    props.setFilter,\r\n    props.filter\r\n  );\r\n  return (\r\n    <div className={styles.toolbar}>\r\n      <div className={styles.colorPickerBox}>\r\n        <ColorPicker ref={inputColor as RefObject<HTMLInputElement>} />\r\n      </div>\r\n      <input type=\"range\" min=\"0\" max=\"0.2\" step=\"0.025\" className={styles.input_range}\r\n        ref={inputRange}\r\n      />\r\n      <label className={styles.toolbar__label}>Фильтр</label>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n  filter: state.canvas.filter,\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch: AppDispatch) => {\r\n  return {\r\n    inputFilter: (color: string, opacity: number) => dispatch(inputFilter(color, opacity)),\r\n    setFilter: (color: string, opacity: number) => dispatch(setFilter(color, opacity)),\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ToolbarFilter);\r\n","import { Filter as FilterType } from '../../../../store/types';\nimport { RefObject, useEffect } from 'react';\nimport { verify } from '../../../../utils/permisions';\n\nexport function useStateFilter(\n  inputColor: RefObject<HTMLInputElement>,\n  inputRange: RefObject<HTMLInputElement>,\n  inputFilter: (color: string, opacity: number) => void,\n  setFilter: (color: string, opacity: number) => void,\n  filter: FilterType): void {\n\n  useEffect(() => {\n\n    const fieldColor = inputColor.current;\n    const fieldRange = inputRange.current;\n\n    verify(fieldColor).value = filter.color;\n    verify(fieldRange).value = String(filter.opacity);\n\n    function handleInputFilter(): void {\n      if (fieldRange && fieldColor) {\n        const color: string = fieldColor.value;\n        const opacity: number = Number(fieldRange.value);\n        inputFilter(color, opacity);\n      }\n    }\n\n    function handleChangeFilter(): void {\n      if (fieldRange && fieldColor) {\n        const opacity: number = Number(fieldRange.value);\n        const color: string = fieldColor.value;\n        setFilter(color, opacity);\n      }\n    }\n\n    verify(fieldColor).addEventListener(\"input\", handleInputFilter);\n    verify(fieldColor).addEventListener(\"change\", handleChangeFilter);\n    verify(fieldRange).addEventListener(\"input\", handleInputFilter);\n    verify(fieldRange).addEventListener(\"change\", handleChangeFilter);\n    return () => {\n      if (fieldColor) {\n        fieldColor.removeEventListener(\"input\", handleInputFilter);\n        fieldColor.removeEventListener(\"change\", handleChangeFilter);\n      }\n      if (fieldRange) {\n        fieldRange.removeEventListener(\"input\", handleInputFilter);\n        fieldRange.removeEventListener(\"change\", handleChangeFilter);\n      }\n    };\n  }, [inputColor, inputRange, inputFilter, setFilter, filter]);\n}","import styles from './FileImgButton.module.css';\nimport { IconDefinition } from '@fortawesome/fontawesome-svg-core';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { useRef, useState } from 'react';\nimport { connect } from 'react-redux';\nimport Modal from '../../../../modal/Modal';\nimport { useBackgroungImg } from '../useBackgroungImg';\nimport { AppDispatch, RootState } from '../../../../../store/store';\nimport {\n  inputBackgroundImg,\n  setBackgroundImg,\n  setCanvasSize\n} from '../../../../../store/actionCreators/canvasActionCreators';\nimport { ViewModelBgImg } from '../../../../../store/types';\n\ntype NavButtonProps = {\n  label: string,\n  title: string,\n  icon: IconDefinition,\n  inputBackgroundImg: (src: string, width: number, height: number) => void,\n  setBackgroundImg: (src: string, width: number, height: number) => void,\n  setCanvasSize: (width: number, height: number) => void,\n  ViewModelBgImg: ViewModelBgImg | null,\n}\n\nfunction AddImgButton(props: NavButtonProps): any {\n\n  const inputFile = useRef<HTMLInputElement>(null);\n\n  let [isModal, setModal] = useState(false);\n  const onClose = () => setModal(false);\n\n  useBackgroungImg(inputFile, props.setBackgroundImg, props.inputBackgroundImg, setModal);\n\n  const bg = props.ViewModelBgImg ?? {\n    width: 0,\n    height: 0,\n    src: '',\n  }\n\n  const onAcceptStretch = () => {\n    props.setBackgroundImg(bg.src, bg.width, bg.height);\n    props.setCanvasSize(bg.width, bg.height);\n    onClose();\n  }\n  const onAcceptCrop = () => {\n    props.setBackgroundImg(bg.src, bg.width, bg.height);\n    onClose();\n  }\n\n  const content =\n    <>\n      <p>Исходное изображение больше размера холста</p>\n    </>\n\n  const footer =\n    <>\n      <button onClick={onAcceptStretch}>Растянуть холст</button>\n      <button onClick={onAcceptCrop}>Обрезать изображение</button>\n      <button onClick={onClose}>Отмена</button>\n    </>\n\n  return (\n    <>\n      <Modal\n        visible={isModal}\n        title=\"Выберите действие\"\n        content={content}\n        footer={footer}\n        onClose={onClose}\n      />\n      <button className={styles.button} title={props.title}>\n        <label htmlFor=\"input-file-bg-img\" className={styles.icon}>\n          <FontAwesomeIcon icon={props.icon} />\n        </label>\n        <input\n          className={styles.inputFile}\n          type=\"file\"\n          accept=\".png,.jpg,.jfif,.jpe,.jpeg\"\n          id=\"input-file-bg-img\"\n          ref={inputFile}\n        />\n        {props.label !== '' &&\n          <label className={styles.button__text}\n            htmlFor=\"input-file-bg-img\">\n            {props.label}\n          </label>\n        }\n      </button>\n    </>\n  );\n};\n\nconst mapStateToProps = (state: RootState) => ({\n  ViewModelBgImg: state.viewModel.bgImg,\n})\n\nconst mapDispatchToProps = (dispatch: AppDispatch) => {\n  return {\n    inputBackgroundImg: (src: string, width: number, height: number) => dispatch(inputBackgroundImg(src, width, height, )),\n    setBackgroundImg: (src: string, width: number, height: number) => dispatch(setBackgroundImg(src, width, height)),\n    setCanvasSize: (width: number, height: number) => dispatch(setCanvasSize(width, height)),\n  }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(AddImgButton);","import { RefObject, useEffect } from \"react\";\r\nimport { getImgInformationFromFile } from '../../../../utils/files';\r\nimport { verify } from \"../../../../utils/permisions\";\r\nimport { store } from \"../../../../store/store\";\r\nimport { Size } from \"../../../../store/types\";\r\n\r\nexport function useBackgroungImg(\r\n  inputFile: RefObject<HTMLElement>,\r\n  setBackgroundImg: (src: string, width: number, height: number) => void,\r\n  inputBackgroundImg: (src: string, width: number, height: number) => void,\r\n  setModal: (state: boolean) => void\r\n) {\r\n\r\n  useEffect(() => {\r\n\r\n    const canvasSize: Size = {\r\n      width: store.getState().canvas.width,\r\n      height: store.getState().canvas.height,\r\n    };\r\n\r\n    const fieldFile = inputFile.current;\r\n    async function handlerChange(event: Event): Promise<void> {\r\n      const target = event.target as HTMLInputElement;\r\n      const files = target.files as FileList;\r\n\r\n      try {\r\n        const imgInfo = await getImgInformationFromFile(files[0]);\r\n        if ((canvasSize.width < imgInfo.width) || (canvasSize.height < imgInfo.height)) {\r\n          inputBackgroundImg(imgInfo.src, imgInfo.width, imgInfo.height)\r\n          setModal(true);\r\n        } else {\r\n          setBackgroundImg(imgInfo.src, imgInfo.width, imgInfo.height);\r\n        }\r\n      } catch {\r\n        alert('Текст ошибки')\r\n      }\r\n      \r\n      target.value = '';\r\n    }\r\n\r\n\r\n    verify(fieldFile).addEventListener(\"change\", handlerChange);\r\n    return () => {\r\n      if (fieldFile) fieldFile.removeEventListener(\"change\", handlerChange);\r\n    };\r\n  }, [inputFile, setBackgroundImg, inputBackgroundImg, setModal]);\r\n}","import styles from './Button.module.css';\nimport { IconDefinition } from '@fortawesome/fontawesome-svg-core';\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\nimport { ForwardedRef, forwardRef } from 'react';\nimport { connect } from 'react-redux';\n\ntype ButtonProps = {\n  label: string,\n  title: string,\n  icon: IconDefinition,\n}\n\nconst Button = forwardRef((props: ButtonProps, ref: ForwardedRef<HTMLButtonElement>) => (\n  <button\n    className={styles.button}\n    ref={ref}\n    title={props.title}\n    style={{ textAlign: props.label === '' ? 'center' : 'left' }}\n  >\n    <FontAwesomeIcon icon={props.icon} />\n    {props.label !== '' &&\n      <span className={styles.button_text}>{props.label}</span>\n    }\n  </button>\n));\n\nexport default connect(null, null, null, { forwardRef: true })(Button);","import styles from './ToolbarBackground.module.css';\r\nimport { faDownload, faGlobe, faRetweet } from '@fortawesome/free-solid-svg-icons'\r\nimport ColorPicker from '../colorPicker/ColorPicker';\r\nimport FileImgButton from './FileImgButton/FileImgButton';\r\nimport Button from '../button/Button';\r\nimport { RefObject, useRef } from 'react';\r\nimport { useBackgroungColor } from './useBackgroungColor';\r\nimport { AppDispatch, RootState } from '../../../../store/store';\r\nimport { inputBackgroundColor, resetBackground, setBackgroundColor } from '../../../../store/actionCreators/canvasActionCreators';\r\nimport { connect } from 'react-redux';\r\nimport { Background as BackgroundType } from '../../../../store/types';\r\n\r\ntype ToolbarBackgroundProps = {\r\n  resetBackground: () => void,\r\n  inputBackgroundColor: (color: string) => void,\r\n  setBackgroundColor: (color: string) => void,\r\n  background: BackgroundType,\r\n}\r\n\r\nfunction ToolbarBackground(props: ToolbarBackgroundProps) {\r\n\r\n  const inputColor = useRef<HTMLInputElement>(null);\r\n  const buttonReset = useRef<HTMLButtonElement>(null);\r\n\r\n  useBackgroungColor(\r\n    props.resetBackground,\r\n    props.inputBackgroundColor,\r\n    props.setBackgroundColor,\r\n    props.background,\r\n    inputColor,\r\n    buttonReset\r\n  );\r\n\r\n  return (\r\n    <div className={styles.toolbar}>\r\n      <div className={styles.toolbar__row}>\r\n        <div className={styles.toolbar__col1}>\r\n          <div className={styles.button_container}>\r\n            <FileImgButton\r\n              label=\"C компьютера\"\r\n              title=\"C компьютера\"\r\n              icon={faDownload}\r\n            />\r\n            <Button\r\n              label=\"Из Pixels\"\r\n              title=\"Из Pixels\"\r\n              icon={faGlobe}\r\n            />\r\n          </div>\r\n        </div>\r\n        <div className={styles.toolbar__col2}>\r\n          <div className={styles.colorPickerBox}>\r\n            <ColorPicker ref={inputColor as RefObject<HTMLInputElement>} />\r\n          </div>\r\n          <Button\r\n            label=\"Сброс\"\r\n            title=\"Сброс\"\r\n            icon={faRetweet}\r\n            ref={buttonReset as RefObject<HTMLButtonElement>}\r\n          />\r\n        </div>\r\n      </div>\r\n      <label className={styles.toolbar__label}>Фон</label>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n  background: state.canvas.background,\r\n})\r\n\r\n\r\nconst mapDispatchToProps = (dispatch: AppDispatch) => {\r\n  return {\r\n    resetBackground: () => dispatch(resetBackground()),\r\n    inputBackgroundColor: (color: string) => dispatch(inputBackgroundColor(color)),\r\n    setBackgroundColor: (color: string) => dispatch(setBackgroundColor(color)),\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ToolbarBackground);\r\n","import { useEffect, RefObject } from 'react';\r\nimport { Background as BackgroundType } from '../../../../store/types';\r\nimport { verify } from '../../../../utils/permisions';\r\n\r\nexport function useBackgroungColor(\r\n  resetBackground: () => void,\r\n  inputBackgroundColor: (color: string) => void,\r\n  setBackgroundColor: (color: string) => void,\r\n  background: BackgroundType,\r\n  inputColor: RefObject<HTMLInputElement>,\r\n  buttonReset: RefObject<HTMLButtonElement>): void {\r\n\r\n  useEffect(() => {\r\n\r\n    const input = inputColor.current;\r\n    const button = buttonReset.current;\r\n\r\n    function handlerClickResetColor(): void {\r\n      resetBackground();\r\n    }\r\n  \r\n    function handlerInputColor(event: Event): void {\r\n      const inputColor = event.target as HTMLInputElement;\r\n      inputBackgroundColor(inputColor.value);\r\n    }\r\n  \r\n    function handleerChangeColor(event: Event): void {\r\n      const inputColor = event.target as HTMLInputElement;\r\n      const color: string = inputColor.value;\r\n      setBackgroundColor(color);\r\n    }\r\n\r\n\r\n    verify(input).addEventListener(\"input\", handlerInputColor);\r\n    verify(input).addEventListener(\"change\", handleerChangeColor);\r\n    verify(button).addEventListener(\"click\", handlerClickResetColor);\r\n    return () => {\r\n      if (input) {\r\n        input.removeEventListener(\"input\", handlerInputColor);\r\n        input.removeEventListener(\"change\", handleerChangeColor);\r\n      }\r\n      if (button) button.removeEventListener(\"click\", handlerClickResetColor);\r\n\r\n    };\r\n  }, [resetBackground, inputBackgroundColor, setBackgroundColor, background, inputColor, buttonReset]);\r\n\r\n  // изменение цвета input на белый при сбросе фона\r\n  useEffect(() => {\r\n    const input = inputColor.current;\r\n    verify(input).value = background.color ? background.color : '#ffffff';\r\n  }, [inputColor, background]);\r\n\r\n\r\n}","import styles from './ToolbarArea.module.css';\nimport { faEraser } from '@fortawesome/free-solid-svg-icons'\nimport Button from '../button/Button';\nimport { connect } from 'react-redux';\nimport { AppDispatch } from '../../../../store/store';\nimport { deleteAreaSelection, resetAreaSelection } from '../../../../store/actionCreators/canvasActionCreators';\nimport { useDeleteArea } from './useDeleteArea';\nimport { useRef } from 'react';\n\ntype ToolbarAreaProps = {\n  deleteAreaSelection: () => void,\n  resetAreaSelection: () => void,\n}\n\nfunction ToolbarArea(props: ToolbarAreaProps) {\n\n  let buttonDelete = useRef<HTMLButtonElement>(null); \n\n  useDeleteArea(buttonDelete, props.deleteAreaSelection, props.resetAreaSelection);\n\n  return (\n    <div className={styles.toolbar}>\n      {/* <Button\n        label=\"Выделение\"\n        title=\"Выделение\"\n        icon={faVectorSquare}\n      /> */}\n      <Button\n        ref={buttonDelete}\n        label=\"Удаление\"\n        title=\"Удаление\"\n        icon={faEraser}\n      />\n\n      {/* <button onClick={() => {\n        props.deleteAreaSelection();\n        props.resetAreaSelection();\n      }}>УДАЛИТЬ</button> */}\n      <label className={styles.toolbar__label}>Область</label>\n    </div>\n  );\n}\n\nconst mapDispatchToProps = (dispatch: AppDispatch) => {\n  return {\n    deleteAreaSelection: () => dispatch(deleteAreaSelection()),\n    resetAreaSelection: () => dispatch(resetAreaSelection()),\n  }\n}\n\nexport default connect(null, mapDispatchToProps)(ToolbarArea);\n","import { RefObject, useEffect } from \"react\"\nimport { verify } from \"../../../../utils/permisions\";\n\nexport function useDeleteArea(\n  buttonDelete: RefObject<HTMLButtonElement>,\n  deleteAreaSelection: () => void,\n  resetAreaSelection: () => void) {\n\n    useEffect(() => {\n\n      const button = buttonDelete.current;\n\n      function handleClickButton() {\n        deleteAreaSelection();\n        resetAreaSelection();\n      }\n      function handleMousedownButton(event: MouseEvent) {\n        event.preventDefault();\n      }\n  \n  \n      verify(button).addEventListener(\"click\", handleClickButton);\n      verify(button).addEventListener(\"mousedown\", handleMousedownButton);\n      return () => {\n        if (button) button.removeEventListener(\"click\", handleClickButton);\n        if (button) button.removeEventListener(\"mousedown\", handleMousedownButton);\n      };\n    }, [buttonDelete, deleteAreaSelection, resetAreaSelection]);\n  }","import { store } from '../store';\n\nexport function setSelectedBlock(id: string) {\n  return {\n    type: 'SET_SELECTED_BLOCK',\n    id: id,\n  }\n}\n\nexport function resetSelectedBlock() {\n  return {\n    type: 'RESET_SELECTED_BLOCK',\n  }\n}\n\nexport function setSizeBlock(width: number, height: number) {\n  return {\n    type: 'SET_SIZE_BLOCK',\n    id: store.getState().selectBlock,\n    width: width,\n    height: height,\n  }\n}\n\nexport function deleteBlock() {\n  return {\n    type: 'DELETE_BLOCK',\n    id: store.getState().selectBlock,\n  }\n}\n\nexport function setPositionBlock(x: number, y: number) {\n  return {\n    type: 'SET_POSITION_BLOCK',\n    id: store.getState().selectBlock,\n    x: x,\n    y: y,\n  }\n}\n\nexport function shiftUpBlock() {\n  return {\n    type: 'SHIFT_UP_BLOCK',\n    id: store.getState().selectBlock,\n  }\n}\n\nexport function shiftDownBlock() {\n  return {\n    type: 'SHIFT_DOWN_BLOCK',\n    id: store.getState().selectBlock,\n  }\n}\n\nexport function clickOnText() {\n  return {\n    type: 'CLICK_ON_TEXT',\n    id: store.getState().selectBlock,\n  }\n}\n\nexport function blurOnText() {\n  return {\n    type: 'BLUR_ON_TEXT',\n  }\n}\n","import styles from './ToolbarObject.module.css';\nimport { faArrowUp, faArrowDown, faTrash } from '@fortawesome/free-solid-svg-icons'\nimport Button from '../button/Button';\nimport { useBlockLevel } from './useBlockLevel';\nimport { useBlockDelete } from './useBlockDelete';\nimport { RefObject, useRef } from 'react';\nimport { connect } from 'react-redux';\nimport { AppDispatch } from '../../../../store/store';\nimport { deleteBlock, shiftDownBlock, shiftUpBlock } from '../../../../store/actionCreators/blockActionCreators';\n\ntype ToolbarObjectProps = {\n  shiftUpBlock: () => void,\n  shiftDownBlock: () => void,\n  deleteBlock: () => void,\n}\n\nfunction ToolbarObject(props: ToolbarObjectProps) {\n  const buttonUp = useRef<HTMLButtonElement>(null);\n  const buttonDown = useRef<HTMLButtonElement>(null);\n  const buttonDelete = useRef<HTMLButtonElement>(null);\n  useBlockLevel(buttonUp, buttonDown, props.shiftUpBlock, props.shiftDownBlock);\n  useBlockDelete(buttonDelete, props.deleteBlock);\n  return (\n    <div className={styles.toolbar}>\n      <div className={styles.toolbar__row}>\n        <div>\n          <div className={styles.button_container}>\n            <Button\n              ref={buttonUp as RefObject<HTMLButtonElement>}\n              label=\"\"\n              title=\"Переместить вперед\"\n              icon={faArrowUp}\n            />\n            <Button\n              ref={buttonDown as RefObject<HTMLButtonElement>}\n              label=\"\"\n              title=\"Переместить назад\"\n              icon={faArrowDown}\n            />\n          </div>\n        </div>\n        <div className={styles.toolbar__col}>\n          <Button\n            ref={buttonDelete as RefObject<HTMLButtonElement>}\n            label=\"Удалить\"\n            title=\"Удалить\"\n            icon={faTrash}\n          />\n        </div>\n      </div>\n      <label className={styles.toolbar__label}>Объекты</label>\n    </div>\n  );\n}\n\nconst mapDispatchToProps = (dispatch: AppDispatch) => {\n  return {\n    shiftUpBlock: () => dispatch(shiftUpBlock()),\n    shiftDownBlock: () => dispatch(shiftDownBlock()),\n    deleteBlock: () => dispatch(deleteBlock()),\n  }\n}\n\nexport default connect(null, mapDispatchToProps)(ToolbarObject);\n","import { RefObject, useEffect } from 'react';\nimport { verify } from '../../../../utils/permisions';\n\nexport function useBlockLevel(\n  buttonUp: RefObject<HTMLButtonElement>,\n  buttonDown: RefObject<HTMLButtonElement>,\n  shiftUpBlock: () => void,\n  shiftDownBlock: () => void): void {\n\n  useEffect(() => {\n\n    const btnUp = buttonUp.current;\n    const btnDown = buttonDown.current;\n\n    function handlerClickShiftUp(event: Event): void {\n      event.preventDefault();\n      shiftUpBlock();\n    }\n  \n    function handlerClickShiftDown(event: Event): void {\n      event.preventDefault();\n      shiftDownBlock();\n    }\n\n\n    verify(btnUp).addEventListener(\"click\", handlerClickShiftUp);\n    verify(btnDown).addEventListener(\"click\", handlerClickShiftDown);\n    return () => {\n      if (btnUp) btnUp.removeEventListener(\"click\", handlerClickShiftUp);\n      if (btnDown) btnDown.removeEventListener(\"click\", handlerClickShiftDown);\n    };\n  }, [buttonUp, buttonDown, shiftUpBlock, shiftDownBlock]);\n}\n\n\n","import { RefObject, useEffect } from 'react';\r\nimport { verify } from '../../../../utils/permisions';\r\n\r\nexport function useBlockDelete(buttonDelete: RefObject<HTMLButtonElement>, deleteBlock: () => void): void {\r\n\r\n  useEffect(() => {\r\n\r\n    const button = buttonDelete.current;\r\n\r\n    function handlerClickDelete(): void {\r\n      deleteBlock();\r\n    }\r\n\r\n    function handlerKeydown(event: KeyboardEvent): void {\r\n      if (event.code === 'Delete') {\r\n        deleteBlock();\r\n      }\r\n    }\r\n\r\n    \r\n    verify(button).addEventListener(\"click\", handlerClickDelete);\r\n    document.addEventListener(\"keydown\", handlerKeydown);\r\n    return () => {\r\n      if (button) button.removeEventListener(\"click\", handlerClickDelete);\r\n      document.removeEventListener(\"keydown\", handlerKeydown);\r\n    };\r\n  }, [buttonDelete, deleteBlock]);\r\n}\r\n\r\n\r\n","import styles from './ToolbarCanvas.module.css';\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\nimport { faTimes } from '@fortawesome/free-solid-svg-icons'\r\nimport { useRef } from 'react';\r\nimport { useStateCanvasSize } from './useStateCanvasSize';\r\nimport { connect } from 'react-redux';\r\nimport { inputCanvasSize, setCanvasSize } from '../../../../store/actionCreators/canvasActionCreators';\r\nimport { AppDispatch, RootState } from '../../../../store/store';\r\n\r\ntype ToolbarCanvasProps = {\r\n  inputCanvasSize: (width: number, height: number) => void,\r\n  setCanvasSize: (width: number, height: number) => void,\r\n  width: number,\r\n  height: number,\r\n}\r\n\r\nfunction ToolbarCanvas(props: ToolbarCanvasProps) {\r\n\r\n  const inputWidth = useRef<HTMLInputElement>(null);\r\n  const inputHeight = useRef<HTMLInputElement>(null);\r\n  useStateCanvasSize(\r\n    inputWidth,\r\n    inputHeight,\r\n    props.inputCanvasSize,\r\n    props.setCanvasSize,\r\n    props.width,\r\n    props.height,\r\n  );\r\n\r\n  return (\r\n    <div className={styles.toolbar}>\r\n      <div className={styles.toolbar__row}>\r\n        <input type=\"number\" className={styles.input_number} min=\"0\"\r\n          ref={inputWidth}\r\n        />\r\n        <FontAwesomeIcon icon={faTimes} className={styles.label} />\r\n        <input type=\"number\" className={styles.input_number} min=\"0\"\r\n          ref={inputHeight}\r\n        />\r\n      </div>\r\n\r\n      <label className={styles.toolbar__label}>Холст</label>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n  width: state.canvas.width,\r\n  height: state.canvas.height,\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch: AppDispatch) => {\r\n  return {\r\n    inputCanvasSize: (width: number, height: number) => dispatch(inputCanvasSize(width, height)),\r\n    setCanvasSize: (width: number, height: number) => dispatch(setCanvasSize(width, height)),\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ToolbarCanvas);\r\n","import { RefObject, useEffect } from 'react';\nimport { verify } from '../../../../utils/permisions';\n\nexport function useStateCanvasSize(\n  inputWidth: RefObject<HTMLInputElement>,\n  inputHeight: RefObject<HTMLInputElement>,\n  inputCanvasSize: (width: number, height: number) => void,\n  setCanvasSize: (width: number, height: number) => void,\n  width: number,\n  height: number\n  ): void {\n\n  useEffect(() => {\n    const fieldWidth = inputWidth.current;\n    const fieldHeight = inputHeight.current;\n\n    verify(fieldWidth).value = String(width);\n    verify(fieldHeight).value = String(height);\n\n    function handleChangeSize(): void {\n      if (fieldWidth && fieldHeight) {\n        const width: number = Number(fieldWidth.value);\n        const height: number = Number(fieldHeight.value);\n        inputCanvasSize(width, height);\n      }\n    }\n\n    function handleBlurSize(): void {\n      if (fieldWidth && fieldHeight) {\n        const width: number = Number(fieldWidth.value);\n        const height: number = Number(fieldHeight.value);\n        setCanvasSize(width, height);\n      }\n    }\n\n\n    verify(fieldWidth).addEventListener(\"change\", handleChangeSize);\n    verify(fieldWidth).addEventListener(\"blur\", handleBlurSize);\n    verify(fieldHeight).addEventListener(\"change\", handleChangeSize);\n    verify(fieldHeight).addEventListener(\"blur\", handleBlurSize);\n    return () => {\n      if (fieldWidth) {\n        fieldWidth.removeEventListener(\"change\", handleChangeSize);\n        fieldWidth.removeEventListener(\"blur\", handleBlurSize);\n      }\n      if (fieldHeight) {\n        fieldHeight.removeEventListener(\"change\", handleChangeSize);\n        fieldHeight.removeEventListener(\"blur\", handleBlurSize);\n      }\n    };\n  }, [inputWidth, inputHeight, inputCanvasSize, setCanvasSize, width, height]);\n}","import styles from './Toolbar.module.css';\nimport ToolbarText from './toolbarText/ToolbarText';\nimport ToolbarImg from './toolbarImg/ToolbarImg';\nimport ToolbarFilter from './toolbarFilter/ToolbarFilter';\nimport ToolbarBackground from './toolbarBackground/ToolbarBackground';\nimport ToolbarArea from './toolbarArea/ToolbarArea';\nimport ToolbarObject from './toolbarObject/ToolbarObject';\nimport ToolbarCanvas from './toolbarCanvas/ToolbarCanvas';\nimport { connect } from 'react-redux';\n\nfunction Toolbar() {\n  return (\n    <div className={styles.toolbar}>\n      <ToolbarText />\n      <ToolbarImg />\n      <ToolbarBackground />\n      <ToolbarArea />\n      <ToolbarFilter />\n      <ToolbarObject />\n      <ToolbarCanvas />\n    </div>\n  );\n}\n\nexport default connect()(Toolbar);\n","import { connect } from 'react-redux';\nimport styles from './Header.module.css';\nimport Navbar from './navbar/Navbar';\nimport Toolbar from './toolbar/Toolbar';\n\nfunction Header() {\n\n  return (\n    <header className={styles.header}>\n      <div className={styles.panel}>\n        <Navbar />\n        <Toolbar />\n      </div>\n    </header >\n  );\n}\n\nexport default connect()(Header);\n","import { useEffect, RefObject } from 'react';\nimport { store } from '../../store/store';\nimport { verify } from '../../utils/permisions';\n\nexport function useStateBlock(\n  blockId: string,\n  block: RefObject<HTMLElement>,\n  setSelectedBlock: (id: string) => void,\n  resetSelectedBlock: () => void,\n): void {\n\n  useEffect(() => {\n\n    const currentBlock = block.current;\n\n    function handleMousedownBlock(): void {\n      if (store.getState().selectBlock !== blockId) {\n        setTimeout(() => {\n          setSelectedBlock(blockId);\n        });\n      }\n    }\n\n    function handleClickDocument(event: Event): void {\n      const isDefPrev: boolean = event.defaultPrevented;\n      const isSelectedID: boolean = store.getState().selectBlock === blockId;\n      if (!isDefPrev && isSelectedID && (event.target !== currentBlock)) {\n        resetSelectedBlock();\n      }\n    }\n\n\n    document.addEventListener(\"click\", handleClickDocument);\n    verify(currentBlock).addEventListener(\"mousedown\", handleMousedownBlock);\n    return () => {\n      if (currentBlock) currentBlock.removeEventListener(\"mousedown\", handleMousedownBlock);\n      document.removeEventListener(\"click\", handleClickDocument);\n    };\n  }, [blockId, block, setSelectedBlock, resetSelectedBlock]);\n}","import { useEffect, RefObject } from 'react';\r\nimport { Position } from '../../store/types';\r\nimport { verify } from '../../utils/permisions';\r\n\r\nexport function useDragAndDrop(\r\n  block: RefObject<HTMLElement>,\r\n  defPos: Position,\r\n  setPositionBlock: (x: number, y: number) => void\r\n): void {\r\n\r\n\r\n  useEffect(() => {\r\n\r\n    const currentBlock = block.current;\r\n\r\n    let startPos: Position;\r\n\r\n    function handleMousedown(event: MouseEvent): void {\r\n      // event.preventDefault();\r\n      startPos = {\r\n        x: event.pageX,\r\n        y: event.pageY,\r\n      };\r\n      document.addEventListener(\"mousemove\", handleMouseMove);\r\n      document.addEventListener(\"mouseup\", handleMouseUp);\r\n    }\r\n  \r\n    let newPos: Position;\r\n\r\n    function handleMouseMove(event: MouseEvent): void {\r\n      if (!event.defaultPrevented) {\r\n        event.preventDefault();\r\n        const delta = {\r\n          x: event.pageX - startPos.x,\r\n          y: event.pageY - startPos.y\r\n        }\r\n        newPos = {\r\n          x: defPos.x + delta.x,\r\n          y: defPos.y + delta.y\r\n        }\r\n        verify(currentBlock).style.left = String(newPos.x) + 'px';\r\n        verify(currentBlock).style.top = String(newPos.y) + 'px';\r\n      }\r\n    }\r\n  \r\n    function handleMouseUp(): void {\r\n      if (newPos) {\r\n        setPositionBlock(newPos.x, newPos.y);\r\n      }\r\n      document.removeEventListener(\"mousemove\", handleMouseMove);\r\n      document.removeEventListener(\"mouseup\", handleMouseUp);\r\n    }\r\n  \r\n\r\n    verify(currentBlock).addEventListener(\"mousedown\", handleMousedown);\r\n    return () => {\r\n      if (currentBlock) currentBlock.removeEventListener(\"mousedown\", handleMousedown);\r\n    };\r\n  }, [block, defPos, setPositionBlock]);\r\n}","import { useEffect, RefObject } from 'react';\nimport { Position, Size } from '../../store/types';\nimport { verify } from '../../utils/permisions';\n\nexport function useResize(\n  setSizeBlock: (width: number, height: number) => void,\n  setPositionBlock: (x: number, y: number) => void,\n  LT: RefObject<HTMLElement>,\n  RT: RefObject<HTMLElement>,\n  LB: RefObject<HTMLElement>,\n  RB: RefObject<HTMLElement>,\n  block: RefObject<HTMLElement>,\n  defPos: Position,\n  defSize: Size\n): void {\n\n\n  useEffect(() => {\n\n    const currentBlock = block.current;\n    const pointLT = LT;\n    const pointRT = RT;\n    const pointLB = LB;\n    const pointRB = RB;\n\n    let startPos: Position;\n    let point: string;\n\n    function handleMousedown(event: MouseEvent): void {\n      event.preventDefault();\n      switch (event.target) {\n        case pointLT.current:\n          point = 'LT';\n          break;\n        case pointRT.current:\n          point = 'RT';\n          break;\n        case pointLB.current:\n          point = 'LB';\n          break;\n        case pointRB.current:\n          point = 'RB';\n          break;\n      }\n\n      startPos = {\n        x: event.pageX + (5 - event.offsetX),\n        y: event.pageY + (5 - event.offsetY)\n      };\n\n      document.addEventListener(\"mousemove\", handleMouseMove);\n      document.addEventListener(\"mouseup\", handleMouseUp);\n    }\n\n    let newWidth: number = defSize.width;\n    let newHeight: number = defSize.height;\n    let prevWidth: number = defSize.width;\n    let prevHeight: number = defSize.height;\n    let newPos: Position;\n\n    function handleMouseMove(event: MouseEvent): void {\n      event.preventDefault();\n      const delta = {\n        x: event.pageX - startPos.x,\n        y: event.pageY - startPos.y,\n      }\n\n      // перемещение при изменении размеров\n      let moving: Position = { x: 0, y: 0 };\n      switch (point) {\n        case 'LT':\n          [newWidth, newHeight] = calculateSize({ x: -delta.x, y: -delta.y }, prevWidth, prevHeight);\n          moving = { x: defSize.width - newWidth, y: defSize.height - newHeight };\n          break;\n        case 'RT':\n          [newWidth, newHeight] = calculateSize({ x: delta.x, y: -delta.y }, prevWidth, prevHeight);\n          moving = { x: 0, y: defSize.height - newHeight };\n          break;\n        case 'LB':\n          [newWidth, newHeight] = calculateSize({ x: -delta.x, y: delta.y }, prevWidth, prevHeight);\n          moving = { x: defSize.width - newWidth, y: 0 };\n          break;\n        case 'RB':\n          [newWidth, newHeight] = calculateSize(delta, prevWidth, prevHeight);\n          break;\n      }\n\n      verify(currentBlock).style.width = String(newWidth) + 'px';\n      verify(currentBlock).style.height = String(newHeight) + 'px';\n\n      newPos = {\n        x: defPos.x + moving.x,\n        y: defPos.y + moving.y\n      }\n\n      verify(currentBlock).style.left = String(newPos.x) + 'px';\n      verify(currentBlock).style.top = String(newPos.y) + 'px';\n\n      prevWidth = newWidth;\n      prevHeight = newHeight;\n    }\n\n    function calculateSize(delta: Position, prevWidth: number, prevHeight: number) {\n      if ((delta.x / prevWidth) < (delta.y / prevHeight)) {\n        newHeight = defSize.height + delta.y;\n        newHeight = newHeight < 20 ? 20 : newHeight;\n        newWidth = (prevWidth * newHeight) / prevHeight;\n      } else {\n        newWidth = defSize.width + delta.x;\n        newWidth = newWidth < 20 ? 20 : newWidth;\n        newHeight = (prevHeight * newWidth) / prevWidth;\n      }\n      return [newWidth, newHeight];\n    }\n\n    function handleMouseUp(): void {\n      setSizeBlock(newWidth, newHeight);\n      if (newPos) {\n        setPositionBlock(newPos.x, newPos.y);\n      }\n      document.removeEventListener(\"mousemove\", handleMouseMove);\n      document.removeEventListener(\"mouseup\", handleMouseUp);\n    }\n\n    \n    verify(pointLT.current).addEventListener(\"mousedown\", handleMousedown);\n    verify(pointRT.current).addEventListener(\"mousedown\", handleMousedown);\n    verify(pointLB.current).addEventListener(\"mousedown\", handleMousedown);\n    verify(pointRB.current).addEventListener(\"mousedown\", handleMousedown);\n    return () => {\n      if (pointLT.current) pointLT.current.removeEventListener(\"mousedown\", handleMousedown);\n      if (pointRT.current) pointRT.current.removeEventListener(\"mousedown\", handleMousedown);\n      if (pointLB.current) pointLB.current.removeEventListener(\"mousedown\", handleMousedown);\n      if (pointRB.current) pointRB.current.removeEventListener(\"mousedown\", handleMousedown);\n    };\n  }, [setSizeBlock, setPositionBlock, LT, RT, LB, RB, block, defPos, defSize]);\n}","import styles from './Img.module.css';\r\nimport { Img as ImgType } from '../../../store/types';\r\nimport { useRef } from 'react';\r\nimport { useStateBlock } from '../useStateBlock';\r\nimport { useDragAndDrop } from '../useDragAndDrop';\r\nimport { useResize } from '../useResize';\r\nimport { connect } from 'react-redux';\r\nimport { resetSelectedBlock, setPositionBlock, setSelectedBlock, setSizeBlock } from '../../../store/actionCreators/blockActionCreators';\r\nimport { AppDispatch, RootState } from '../../../store/store';\r\n\r\ntype ImgProps = {\r\n  img: ImgType,\r\n  selectBlock: string | null,\r\n  setSizeBlock: (width: number, height: number) => void,\r\n  setPositionBlock: (x: number, y: number) => void,\r\n  setSelectedBlock: (id: string) => void,\r\n  resetSelectedBlock: () => void,\r\n}\r\n\r\nfunction Img(props: ImgProps) {\r\n  const img: ImgType = props.img;\r\n  let src: string = '';\r\n  if (img.src) {\r\n    src = img.src;\r\n  }\r\n  const imgStyle = getStyle(img);\r\n  const imgBlock = useRef<HTMLImageElement>(null);\r\n\r\n\r\n  const pointLT = useRef<HTMLDivElement>(null);\r\n  const pointRT = useRef<HTMLDivElement>(null);\r\n  const pointLB = useRef<HTMLDivElement>(null);\r\n  const pointRB = useRef<HTMLDivElement>(null);\r\n\r\n  useStateBlock(props.img.id, imgBlock, props.setSelectedBlock, props.resetSelectedBlock);\r\n  useDragAndDrop(imgBlock, { x: img.x, y: img.y }, props.setPositionBlock);\r\n  useResize(\r\n    props.setSizeBlock,\r\n    props.setPositionBlock,\r\n    pointLT,\r\n    pointRT,\r\n    pointLB,\r\n    pointRB,\r\n    imgBlock,\r\n    { x: img.x, y: img.y },\r\n    { width: img.width, height: img.height }\r\n  );\r\n\r\n  const select: string = props.img.id === props.selectBlock ? styles.selected : '';\r\n\r\n  return (\r\n    <div\r\n      className={styles.block + ' ' + select}\r\n      style={imgStyle}\r\n      ref={imgBlock}\r\n      onDragStart={(e) => e.preventDefault() }\r\n    >\r\n      <div className={styles.pointTopLeft} ref={pointLT}></div>\r\n      <div className={styles.pointTopRight} ref={pointRT}></div>\r\n      <img src={src}\r\n        alt=''\r\n        className={styles.img}\r\n      />\r\n      <div className={styles.pointBottomLeft} ref={pointLB}></div>\r\n      <div className={styles.pointBottomRight} ref={pointRB}></div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n  selectBlock: state.selectBlock,\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch: AppDispatch) => {\r\n  return {\r\n    setPositionBlock: (x: number, y: number) => dispatch(setPositionBlock(x, y)),\r\n    setSizeBlock: (width: number, height: number) => dispatch(setSizeBlock(width, height)),\r\n    setSelectedBlock: (id: string) => dispatch(setSelectedBlock(id)),\r\n    resetSelectedBlock: () => dispatch(resetSelectedBlock()),\r\n  }\r\n}\r\n\r\nfunction getStyle(img: ImgType) {\r\n  return {\r\n    width: img.width,\r\n    height: img.height,\r\n    left: img.x,\r\n    top: img.y,\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Img);\r\n","import styles from './Text.module.css';\r\nimport { Text as TextType } from '../../../store/types';\r\nimport { useRef } from 'react';\r\nimport { useStateBlock } from '../useStateBlock';\r\nimport { useDragAndDrop } from '../useDragAndDrop';\r\nimport { connect } from 'react-redux';\r\nimport { clickOnText, deleteBlock, resetSelectedBlock, setPositionBlock, setSelectedBlock } from '../../../store/actionCreators/blockActionCreators';\r\nimport { AppDispatch, RootState } from '../../../store/store';\r\nimport { useEditText } from './useEditText';\r\nimport { setBoldText, setItalicText, setTextInTextBlock, setUnderlineText } from '../../../store/actionCreators/textBlockActionCreators';\r\n\r\ntype TextProps = {\r\n  text: TextType,\r\n  color: string | null,\r\n  size: number | null,\r\n  selectBlock: string | null,\r\n  setPositionBlock: (x: number, y: number) => void,\r\n  setSelectedBlock: (id: string) => void,\r\n  resetSelectedBlock: () => void,\r\n  setTextInTextBlock: (text: string) => void,\r\n  clickOnText: () => void,\r\n  deleteBlock: () => void,\r\n  setBoldText: (isBold: boolean) => void,\r\n  setItalicText: (isItalic: boolean) => void,\r\n  setUnderlineText: (isUnderline: boolean) => void,\r\n}\r\n\r\nfunction Text(props: TextProps) {\r\n  const text: TextType = props.text;\r\n\r\n  const textBlock = useRef<HTMLDivElement>(null);\r\n  useStateBlock(props.text.id, textBlock, props.setSelectedBlock, props.resetSelectedBlock);\r\n  useDragAndDrop(textBlock, { x: text.x, y: text.y }, props.setPositionBlock);\r\n\r\n  useEditText(\r\n    textBlock,\r\n    text.bold,\r\n    text.italic,\r\n    text.underline,\r\n    props.setTextInTextBlock,\r\n    props.clickOnText,\r\n    props.deleteBlock,\r\n    props.setBoldText,\r\n    props.setItalicText,\r\n    props.setUnderlineText,\r\n  );\r\n\r\n  const select: string = props.text.id === props.selectBlock ? styles.selected : '';\r\n  let textStyle = getStyle(text);\r\n  textStyle = {\r\n    ...textStyle,\r\n    color: props.color && select !== '' ? props.color : textStyle.color,\r\n    fontSize: props.size && select !== '' ? props.size : textStyle.fontSize,\r\n  }\r\n\r\n  return (\r\n    <div style={textStyle}\r\n      contentEditable={false}\r\n      suppressContentEditableWarning={true}\r\n      onDragStart={(e) => e.preventDefault()}\r\n      ref={textBlock}\r\n      className={styles.block + ' ' + select}\r\n      dangerouslySetInnerHTML={{ __html: text.text }}\r\n    >\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction getStyle(text: TextType) {\r\n  return {\r\n    left: text.x,\r\n    top: text.y,\r\n    color: text.color,\r\n    fontSize: text.size,\r\n    fontWeight: text.bold ? 700 : 400,\r\n    textDecoration: text.underline ? 'underline' : 'none',\r\n    fontStyle: text.italic ? 'italic' : 'normal',\r\n    fontFamily: text.fontFamily,\r\n  };\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n  selectBlock: state.selectBlock,\r\n  color: state.viewModel.text.tempColor,\r\n  size: state.viewModel.text.tempSize,\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch: AppDispatch) => {\r\n  return {\r\n    setPositionBlock: (x: number, y: number) => dispatch(setPositionBlock(x, y)),\r\n    setSelectedBlock: (id: string) => dispatch(setSelectedBlock(id)),\r\n    resetSelectedBlock: () => dispatch(resetSelectedBlock()),\r\n    setTextInTextBlock: (text: string) => dispatch(setTextInTextBlock(text)),\r\n    clickOnText: () => dispatch(clickOnText()),\r\n    deleteBlock: () => dispatch(deleteBlock()),\r\n    setBoldText: (isBold: boolean) => dispatch(setBoldText(isBold)),\r\n    setItalicText: (isItalic: boolean) => dispatch(setItalicText(isItalic)),\r\n    setUnderlineText: (isUnderline: boolean) => dispatch(setUnderlineText(isUnderline)),\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Text);\r\n","import { RefObject, useEffect } from \"react\";\nimport { verify } from \"../../../utils/permisions\";\n\nexport function useEditText(\n  block: RefObject<HTMLDivElement>,\n  bold: boolean,\n  italic: boolean,\n  underline: boolean,\n  setTextInTextBlock: (text: string) => void,\n  clickOnText: () => void,\n  deleteBlock: () => void,\n  setBoldText: (isBold: boolean) => void,\n  setItalicText: (isItalic: boolean) => void,\n  setUnderlineText: (isUnderline: boolean) => void,\n) {\n\n  useEffect(() => {\n\n    const currentBlock = block.current;\n\n    function handleClickBlock() {\n      setTimeout(() => {\n        clickOnText();\n      });\n    }\n\n    function handleDblclickBlock() {\n      verify(currentBlock).setAttribute(\"contenteditable\", \"true\")\n      verify(currentBlock).focus();\n    }\n\n    function handleBlur() {\n      if (currentBlock) {\n        currentBlock.setAttribute(\"contenteditable\", \"false\")\n        const content: string = currentBlock.innerHTML;\n        if (content === '<div><br></div>') {\n          deleteBlock();\n        } else {\n          setTextInTextBlock(currentBlock.innerHTML);\n        }\n      }\n    }\n\n    function handleMouseMove(event: Event) {\n      if (verify(currentBlock).getAttribute('contenteditable') === 'true') {\n        event.stopImmediatePropagation();\n      }\n    }\n\n    function handlerKeydown(event: KeyboardEvent): void {\n      if (event.code === 'Escape') {\n        if (verify(currentBlock).getAttribute('contenteditable') === 'true') {\n          verify(currentBlock).setAttribute(\"contenteditable\", \"false\")\n          setTextInTextBlock(verify(currentBlock).innerHTML)\n        }\n      }\n      if (event.code === 'Delete') {\n        event.stopImmediatePropagation();\n      }\n      if (event.code === 'KeyB' && (event.ctrlKey || event.metaKey)) {\n        setBoldText(!bold)\n      }\n      if (event.code === 'KeyI' && (event.ctrlKey || event.metaKey)) {\n        setItalicText(!italic)\n      }\n      if (event.code === 'KeyU' && (event.ctrlKey || event.metaKey)) {\n        setUnderlineText(!underline)\n      }\n    }\n\n    function handlerPaste(event: any) {\n      event.preventDefault();\n      const text = event.clipboardData.getData(\"text/plain\");\n      document.execCommand(\"insertHTML\", false, text);\n    }\n\n    function handlerInput(event: Event) {\n      if (currentBlock) {\n        if (currentBlock.innerHTML[0] !== '<' || currentBlock.innerHTML === '<br>') {\n          currentBlock.innerHTML = `<div>${currentBlock.innerText}<br></div>`;\n          currentBlock.focus();\n        }\n      }\n    }\n\n\n    verify(currentBlock).addEventListener(\"mousedown\", handleClickBlock);\n    verify(currentBlock).addEventListener(\"dblclick\", handleDblclickBlock);\n    verify(currentBlock).addEventListener(\"blur\", handleBlur);\n    verify(currentBlock).addEventListener(\"keydown\", handlerKeydown);\n    verify(currentBlock).addEventListener(\"paste\", handlerPaste);\n    verify(currentBlock).addEventListener(\"input\", handlerInput);\n    document.addEventListener(\"mousemove\", handleMouseMove);\n    return () => {\n      if (currentBlock) {\n        currentBlock.removeEventListener(\"mousedown\", handleClickBlock);\n        currentBlock.removeEventListener(\"dblclick\", handleDblclickBlock);\n        currentBlock.addEventListener(\"blur\", handleBlur);\n        currentBlock.removeEventListener(\"keydown\", handlerKeydown);\n        currentBlock.removeEventListener(\"paste\", handlerPaste);\n        currentBlock.removeEventListener(\"input\", handlerInput);\n      }\n      document.removeEventListener(\"mousemove\", handleMouseMove);\n    };\n  }, [\n    block, bold, italic, underline, setTextInTextBlock, clickOnText,\n    deleteBlock, setBoldText, setItalicText, setUnderlineText\n  ]);\n}","import styles from './ArtObj.module.css';\r\nimport { ArtObj as ArtObjType } from '../../../store/types';\r\nimport { useRef } from 'react';\r\nimport { useStateBlock } from '../useStateBlock';\r\nimport { useDragAndDrop } from '../useDragAndDrop';\r\nimport { useResize } from '../useResize';\r\nimport { resetSelectedBlock, setPositionBlock, setSelectedBlock, setSizeBlock } from '../../../store/actionCreators/blockActionCreators';\r\nimport { connect } from 'react-redux';\r\nimport { AppDispatch, RootState } from '../../../store/store';\r\n\r\ntype ArtObjProps = {\r\n  artObj: ArtObjType,\r\n  selectBlock: string | null,\r\n  setSizeBlock: (width: number, height: number) => void,\r\n  setPositionBlock: (x: number, y: number) => void,\r\n  setSelectedBlock: (id: string) => void,\r\n  resetSelectedBlock: () => void,\r\n}\r\n\r\nfunction ArtObj(props: ArtObjProps) {\r\n  const artObj: ArtObjType = props.artObj;\r\n  const artObjBlock = useRef<HTMLDivElement>(null);\r\n  const artObjStyle = getStyle(artObj);\r\n\r\n  const pointLT = useRef<HTMLDivElement>(null);\r\n  const pointRT = useRef<HTMLDivElement>(null);\r\n  const pointLB = useRef<HTMLDivElement>(null);\r\n  const pointRB = useRef<HTMLDivElement>(null);\r\n\r\n  useStateBlock(props.artObj.id, artObjBlock, props.setSelectedBlock, props.resetSelectedBlock);\r\n  useDragAndDrop(artObjBlock, { x: artObj.x, y: artObj.y }, props.setPositionBlock);\r\n  useResize(\r\n    props.setSizeBlock,\r\n    props.setPositionBlock,\r\n    pointLT,\r\n    pointRT,\r\n    pointLB,\r\n    pointRB,\r\n    artObjBlock,\r\n    { x: artObj.x, y: artObj.y },\r\n    { width: artObj.width, height: artObj.height }\r\n  );\r\n  \r\n  const select: string = props.artObj.id === props.selectBlock ? styles.selected : '';\r\n\r\n  return (\r\n    <div\r\n      className={styles.block + ' ' + select}\r\n      style={artObjStyle}\r\n      ref={artObjBlock}\r\n      onDragStart={(e) => e.preventDefault() }\r\n    >\r\n      <div className={styles.pointTopLeft} ref={pointLT}></div>\r\n      <div className={styles.pointTopRight} ref={pointRT}></div>\r\n      <img src={artObj.src}\r\n        alt=''\r\n        className={styles.img}\r\n      />\r\n      <div className={styles.pointBottomLeft} ref={pointLB}></div>\r\n      <div className={styles.pointBottomRight} ref={pointRB}></div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = (state: RootState) => ({\r\n  selectBlock: state.selectBlock,\r\n})\r\n\r\nconst mapDispatchToProps = (dispatch: AppDispatch) => {\r\n  return {\r\n    setPositionBlock: (x: number, y: number) => dispatch(setPositionBlock(x, y)),\r\n    setSizeBlock: (width: number, height: number) => dispatch(setSizeBlock(width, height)),\r\n    setSelectedBlock: (id: string) => dispatch(setSelectedBlock(id)),\r\n    resetSelectedBlock: () => dispatch(resetSelectedBlock()),\r\n  }\r\n}\r\n\r\nfunction getStyle(artObj: ArtObjType) {\r\n  return {\r\n    width: artObj.width,\r\n    height: artObj.height,\r\n    left: artObj.x,\r\n    top: artObj.y,\r\n  };\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ArtObj);\r\n","import styles from './Filter.module.css';\nimport { Canvas as CanvasType, Filter as FilterType } from '../../../store/types';\nimport { connect } from 'react-redux';\nimport { RootState } from '../../../store/store';\n\ntype FilterProps = {\n  canvas: CanvasType\n  filter: FilterType | null,\n}\n\nfunction Filter(props: FilterProps) {\n  const canvas: CanvasType = props.canvas;\n\n  let color: string = '';\n  let opacity: number = 0;\n  if (props.filter) {\n    color = props.filter.color;\n    opacity = props.filter.opacity;\n  } else {\n    color = canvas.filter.color;\n    opacity = canvas.filter.opacity;\n  }\n\n  const filterStyle = {\n    background: color,\n    opacity: opacity,\n  };\n\n  return (\n    <div className={styles.filter} style={filterStyle} id=\"filter\"></div>\n  );\n}\n\nfunction mapStateToProps(state: RootState) {\n  return {\n    canvas: state.canvas,\n    filter: state.viewModel.filter,\n  }\n};\n\nexport default connect(mapStateToProps)(Filter);","import styles from './DeleteArea.module.css';\nimport { ReactElement } from 'react';\nimport { Area, Canvas as CanvasType } from '../../../store/types';\nimport { connect } from 'react-redux';\nimport { RootState } from '../../../store/store';\n\ntype DeleteAreaProps = { canvas: CanvasType }\n\nfunction DeleteArea(props: DeleteAreaProps) {\n  const canvas: CanvasType = props.canvas;\n\n  let listBlock: ReactElement[] = [];\n  canvas.deleteArea.forEach((block: Area, index: number) => {\n    const DeleteAreaStyle = {\n      width: block.width as number,\n      height: block.height as number,\n      left: block.x as number,\n      top: block.y as number,\n    };\n\n    listBlock.push(\n    <div className={styles.deleteArea}\n      key={index}\n      style={DeleteAreaStyle}>\n    </div>);\n  });\n\n  return (\n    <>\n      {listBlock}\n    </>\n  );\n}\n\nfunction mapStateToProps(state: RootState) {\n  return {\n    canvas: state.canvas,\n  }\n};\n\nexport default connect(mapStateToProps)(DeleteArea);\n\n\n\n","import styles from './AreaSelection.module.css';\nimport { Area } from '../../../store/types';\nimport { connect } from 'react-redux';\nimport { AppDispatch } from '../../../store/store';\nimport { useDragAndDrop } from '../useDragAndDrop';\nimport { areaSelection, resetAreaSelection, setPositionAreaSelection } from '../../../store/actionCreators/canvasActionCreators';\nimport { ForwardedRef, forwardRef, RefObject } from 'react';\n\ntype AreaSelectionProps = {\n  area: Area,\n  areaSelection: (x: number, y: number, width: number, height: number) => void,\n  resetAreaSelection: () => void,\n  setPositionAreaSelection: (x: number, y: number) => void,\n}\n\n  const AreaSelection = forwardRef((props: AreaSelectionProps, ref: ForwardedRef<HTMLDivElement>) => {\n\n  let areaSelectionStyle = {};\n\n\n  areaSelectionStyle = {\n    left: props.area.x,\n    top: props.area.y,\n    width: props.area.width - 2,\n    height: props.area.height - 2,\n  }\n  useDragAndDrop(ref as RefObject<HTMLElement>, { x: props.area.x, y: props.area.y }, props.setPositionAreaSelection);\n\n  return (\n    <div className={styles.areaSelection} style={areaSelectionStyle} ref={ref}></div>\n  );\n});\n\nconst mapDispatchToProps = (dispatch: AppDispatch) => {\n  return {\n    areaSelection: (x: number, y: number, width: number, height: number) => dispatch(areaSelection(x, y, width, height)),\n    resetAreaSelection: () => dispatch(resetAreaSelection()),\n    setPositionAreaSelection: (x: number, y: number) => dispatch(setPositionAreaSelection(x, y)),\n  }\n}\n\nexport default connect(null, mapDispatchToProps, null, { forwardRef: true })(AreaSelection);\n\n\n\n","import styles from './Canvas.module.css';\r\nimport { ReactElement, useRef } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport Img from './img/Img'\r\nimport Text from './text/Text'\r\nimport ArtObj from './artObj/ArtObj'\r\nimport Filter from './filter/Filter'\r\nimport DeleteArea from './deleteArea/DeleteArea'\r\nimport AreaSelection from './areaSelection/AreaSelection';\r\nimport { Area, Block as BlockType, Canvas as CanvasType, Size as SizeType, BlockTypes} from '../../store/types';\r\nimport { AppDispatch, RootState } from '../../store/store';\r\nimport { areaSelection, resetAreaSelection } from '../../store/actionCreators/canvasActionCreators';\r\nimport { useAreaSelection } from './useAreaSelection';\r\n\r\ntype CanvasProps = {\r\n  canvas: CanvasType,\r\n  area: Area | null,\r\n  bgColor: string | null,\r\n  canvasSize: SizeType | null,\r\n  areaSelection: (x: number, y: number, width: number, height: number) => void,\r\n  resetAreaSelection: () => void,\r\n}\r\n\r\nfunction Canvas(props: CanvasProps) {\r\n  const canvasStyle = getStyle(props.canvas, props.bgColor, props.canvasSize);\r\n  const listBlock: ReactElement[] = getListBlock(props.canvas.listBlock);\r\n\r\n  const canvas = useRef<HTMLDivElement>(null);\r\n  const area = useRef<HTMLDivElement>(null);\r\n  useAreaSelection(canvas, area, props.areaSelection, props.resetAreaSelection);\r\n\r\n  return (\r\n    <div id=\"canvas\" className={styles.canvas} style={canvasStyle} ref={canvas}>\r\n      {props.area &&\r\n        <AreaSelection area={props.area} ref={area}/>\r\n      }\r\n      {props.canvas.deleteArea &&\r\n        <DeleteArea />\r\n      }\r\n      <Filter />\r\n      {listBlock}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction mapStateToProps(state: RootState) {\r\n  return {\r\n    canvas: state.canvas,\r\n    area: state.viewModel.areaSelection,\r\n    bgColor: state.viewModel.bgColor,\r\n    canvasSize: state.viewModel.canvasSize,\r\n  }\r\n};\r\n\r\nconst mapDispatchToProps = (dispatch: AppDispatch) => {\r\n  return {\r\n    areaSelection: (x: number, y: number, width: number, height: number) => dispatch(areaSelection(x, y, width, height)),\r\n    resetAreaSelection: () => dispatch(resetAreaSelection()),\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Canvas);\r\n\r\n\r\nfunction getListBlock(listBlock: BlockType[]): ReactElement[] {\r\n  let newListBlock: ReactElement[] = [];\r\n  listBlock.forEach((block: BlockType) => {\r\n    switch (block.type) {\r\n      case BlockTypes.text:\r\n        newListBlock.push(<Text text={block}\r\n          key={block.id} />);\r\n        break;\r\n      case BlockTypes.img:\r\n        newListBlock.push(<Img img={block}\r\n          key={block.id} />);\r\n        break;\r\n      case BlockTypes.artObj:\r\n        newListBlock.push(<ArtObj artObj={block}\r\n          key={block.id} />);\r\n        break;\r\n    }\r\n  });\r\n  return newListBlock;\r\n}\r\n\r\nfunction getStyle(canvas: CanvasType, bgColor: string | null, canvasSize: SizeType | null) {\r\n  let backgroundColor: string = '#fff';\r\n  let backgroundImage: string = '';\r\n\r\n  if (bgColor) {\r\n    backgroundColor = bgColor;\r\n  } else {\r\n    if (canvas.background.color) {\r\n      backgroundColor = canvas.background.color;\r\n    } else if (canvas.background.src) {\r\n      backgroundImage = 'url(' + canvas.background.src + ')';\r\n    }\r\n  }\r\n\r\n  let width: number = 0;\r\n  let height: number = 0;\r\n  if (canvasSize) {\r\n    width = canvasSize.width;\r\n    height = canvasSize.height;\r\n  } else {\r\n    width = canvas.width;\r\n    height = canvas.height;\r\n  }\r\n\r\n  const bgWidth: number | null = canvas.background.width;\r\n  const bgHeight: number | null = canvas.background.height;\r\n\r\n  return {\r\n    width: width,\r\n    height: height,\r\n    backgroundColor: backgroundColor,\r\n    backgroundImage: backgroundImage,\r\n    backgroundSize: (bgWidth && bgHeight) ? getbackgroundSize(bgWidth, bgHeight, width, height): '',\r\n  };\r\n}\r\n\r\nfunction getbackgroundSize(imgWidth: number, imgHeight: number, canvasWidth: number, canvasHeight: number): string {\r\n  let prevImgWidth: number = imgWidth;\r\n  let prevImgHeight: number = imgHeight;\r\n\r\n  if (prevImgWidth < canvasWidth) {\r\n    imgHeight = (prevImgHeight * canvasWidth) / prevImgWidth;\r\n    imgWidth = (prevImgWidth * imgHeight) / prevImgHeight;\r\n  }\r\n\r\n  if (prevImgHeight < canvasHeight) {\r\n    imgWidth = (prevImgWidth * canvasHeight) / prevImgHeight;\r\n    imgHeight = (prevImgHeight * imgWidth) / prevImgWidth;\r\n  }\r\n  return `${imgWidth}px ${imgHeight}px`\r\n}","import { useEffect, RefObject } from 'react';\nimport { Position } from '../../store/types';\nimport { verify } from '../../utils/permisions';\n\nexport function useAreaSelection(\n  canvas: RefObject<HTMLDivElement>,\n  area: RefObject<HTMLDivElement>,\n  areaSelection: (x: number, y: number, width: number, height: number) => void,\n  resetAreaSelection: () => void): void {\n\n  useEffect(() => {\n\n    const field = canvas.current;\n    const selectArea = area.current;\n\n    let startPos: Position;\n    let startOffsetPos: Position;\n\n    const div: HTMLDivElement = document.createElement(\"div\");\n    div.style.position = 'absolute';\n    div.style.zIndex = '1';\n    div.style.pointerEvents = 'none';\n\n    function handleMousedown(event: MouseEvent): void {\n      \n      if (!event.defaultPrevented && event.target === field) {\n        startPos = {\n          x: event.pageX,\n          y: event.pageY,\n        };\n\n        startOffsetPos = {\n          x: event.offsetX,\n          y: event.offsetY,\n        };\n\n        document.addEventListener(\"mousemove\", handleMouseMove);\n        document.addEventListener(\"mouseup\", handleMouseUp);\n\n        div.style.border = '1px dashed red';\n        div.style.width = '0px';\n        div.style.height = '0px';\n\n        div.style.left = event.offsetX + 'px';\n        div.style.top = event.offsetY + 'px';\n        if (field) field.appendChild(div);\n      }\n    }\n\n\n    function handleMouseMove(event: MouseEvent): void {\n\n      if (!event.defaultPrevented) {\n\n        const delta = {\n          x: Math.abs(event.pageX - startPos.x),\n          y: Math.abs(event.pageY - startPos.y)\n        }\n\n        let moving: Position = { x: 0, y: 0 };\n\n        if (startPos.x >= event.pageX && startPos.y >= event.pageY) { // левый верхний\n          moving = { x: -delta.x, y: -delta.y };\n        } else if (startPos.x <= event.pageX && startPos.y >= event.pageY) { // правый верхний\n          moving = { x: 0, y: -delta.y };\n        } else if (startPos.x >= event.pageX && startPos.y <= event.pageY) { // левый нижний\n          moving = { x: -delta.x, y: 0 };\n        }\n\n        div.style.width = delta.x + 'px';\n        div.style.height = delta.y + 'px';\n\n        div.style.left = startOffsetPos.x + moving.x + 'px';\n        div.style.top = startOffsetPos.y + moving.y + 'px';\n      }\n    }\n\n    function handleMouseUp(): void {\n\n      if (div.offsetWidth > 2 && div.offsetHeight > 2) {\n        areaSelection(div.offsetLeft, div.offsetTop, div.offsetWidth, div.offsetHeight);\n      }\n      div.remove();\n\n      document.removeEventListener(\"mousemove\", handleMouseMove);\n      document.removeEventListener(\"mouseup\", handleMouseUp);\n\n    }\n\n    function handleMousedownDocument(event: Event): void {\n      if (!event.defaultPrevented && area.current) {\n        event.preventDefault();\n        if (area.current !== event.target) {\n          resetAreaSelection();\n        }\n      }\n    }\n\n    function handleMousedownArea(event: MouseEvent) {\n      event.preventDefault();\n    }\n\n    \n    verify(field).addEventListener(\"mousedown\", handleMousedown);\n    if (selectArea) selectArea.addEventListener(\"mousedown\", handleMousedownArea);\n    document.addEventListener(\"mousedown\", handleMousedownDocument);\n    return () => {\n      if (field) field.removeEventListener(\"mousedown\", handleMousedown);\n      if (selectArea) selectArea.removeEventListener(\"mousedown\", handleMousedownArea);\n      document.removeEventListener(\"mousedown\", handleMousedownDocument);\n    };\n  }, [canvas, area, areaSelection, resetAreaSelection]);\n}","import styles from './CardMaker.module.css';\r\nimport Header from './header/Header';\r\nimport Canvas from './canvas/Canvas';\r\nimport { connect } from 'react-redux';\r\n\r\nfunction CardMaker() {\r\n  return (\r\n    <>\r\n      <Header />\r\n      <main className={styles.main}>\r\n        <Canvas />\r\n      </main>\r\n    </>\r\n  );\r\n}\r\n\r\nexport default connect()(CardMaker);\r\n","import './index.css';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport CardMaker from './cardMaker/CardMaker';\r\nimport { store } from './store/store';\r\nimport { Provider } from 'react-redux';\r\n\r\nstore.subscribe(() => {\r\n  // console.log(store.getState());\r\n});\r\n\r\nReactDOM.render(\r\n\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <CardMaker />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}