(this.webpackJsonpcard_maker=this.webpackJsonpcard_maker||[]).push([[0],[,,,,,,,,,,function(e,t,n){e.exports={select:"SelectFontFamily_select__-xsBg",robotoSlab:"SelectFontFamily_robotoSlab__27hZJ",fantazyor:"SelectFontFamily_fantazyor__M9yoI",piroucyrillic:"SelectFontFamily_piroucyrillic__29ewu",phenomena:"SelectFontFamily_phenomena__NRqnd",sunday:"SelectFontFamily_sunday__1H2GQ",kurale:"SelectFontFamily_kurale__3Hg9L",sensei:"SelectFontFamily_sensei__M0k1g",borsok:"SelectFontFamily_borsok__uN7nG",summer:"SelectFontFamily_summer__1iu_f",underdog:"SelectFontFamily_underdog__1VSS1",montserrat:"SelectFontFamily_montserrat__2gZbq",openSans:"SelectFontFamily_openSans__20d1g",comfortaa:"SelectFontFamily_comfortaa__3j5F8",rubik:"SelectFontFamily_rubik__3P7MR",marta:"SelectFontFamily_marta__JO1cQ"}},,function(e,t,n){e.exports={modal:"ModalSearchImg_modal__uBBh1",appear:"ModalSearchImg_appear__1G1Sw",modalDialog:"ModalSearchImg_modalDialog__1idJU",animatetop:"ModalSearchImg_animatetop__lbfEH","slide-in":"ModalSearchImg_slide-in__3tA5h",modalHeader:"ModalSearchImg_modalHeader__3KLzI",modalFooter:"ModalSearchImg_modalFooter__2HKjX",modalClose:"ModalSearchImg_modalClose__3YhCx",modalBody:"ModalSearchImg_modalBody__dyHSE",modalContent:"ModalSearchImg_modalContent__2Q6UH",modalTitle:"ModalSearchImg_modalTitle__1vEB0",searchBox:"ModalSearchImg_searchBox__1QOP1",navBox:"ModalSearchImg_navBox__1nyG-",information:"ModalSearchImg_information__3v8sD"}},function(e,t,n){e.exports={toolbar:"ToolbarCanvas_toolbar__1lWFF",inputNumber:"ToolbarCanvas_inputNumber__3FE9W",row:"ToolbarCanvas_row__1CFS7",label:"ToolbarCanvas_label__1kyuR",unitsLabel:"ToolbarCanvas_unitsLabel__2Sp-N"}},function(e,t,n){e.exports={modal:"Modal_modal__3Ldwj",modalDialog:"Modal_modalDialog__3Du5z",modalHeader:"Modal_modalHeader__1ppBy",modalFooter:"Modal_modalFooter__lSAfT",modalClose:"Modal_modalClose__3GnIC",modalBody:"Modal_modalBody__12nPW",modalContent:"Modal_modalContent__35CCy",modalTitle:"Modal_modalTitle__bNkET"}},function(e,t,n){e.exports={block:"Img_block__r3fmB",img:"Img_img__3Hans",selected:"Img_selected__vEyvs",pointBottomRight:"Img_pointBottomRight__1Z-pj",pointTopLeft:"Img_pointTopLeft__3ZXB8",pointTopRight:"Img_pointTopRight__2cXMJ",pointBottomLeft:"Img_pointBottomLeft__x6rWq"}},function(e,t,n){e.exports={block:"ArtObj_block__1DyCD",img:"ArtObj_img__3ltZN",selected:"ArtObj_selected__1oJ2Z",pointBottomRight:"ArtObj_pointBottomRight__3og1x",pointTopLeft:"ArtObj_pointTopLeft__2iQK4",pointTopRight:"ArtObj_pointTopRight__19xjD",pointBottomLeft:"ArtObj_pointBottomLeft__1BMY1"}},,,,function(e,t,n){e.exports={toolbar:"ToolbarText_toolbar__3Q1B2",toolbar__row:"ToolbarText_toolbar__row__2xbEr"}},,function(e,t,n){e.exports={dropbtn:"DropdownMenu_dropbtn__2-JiC",dropdown:"DropdownMenu_dropdown__2_ubm",dropdownContent:"DropdownMenu_dropdownContent__3ihyt",dropdownText:"DropdownMenu_dropdownText__TLnH9"}},function(e,t,n){e.exports={button:"AddImgButtonFile_button__2-aES",buttonText:"AddImgButtonFile_buttonText__QVBcl",inputFile:"AddImgButtonFile_inputFile__2htQZ"}},function(e,t,n){e.exports={toolbar:"ToolbarFilter_toolbar__33oQI",inputRange:"ToolbarFilter_inputRange__3VgvX",row:"ToolbarFilter_row__2v8k_",label:"ToolbarFilter_label__1iRk3"}},function(e,t,n){e.exports={toolbar:"ToolbarBackground_toolbar__1Rsa9",row:"ToolbarBackground_row__Jz_7E",label:"ToolbarBackground_label__iB0N8",reset:"ToolbarBackground_reset__28bz6",active:"ToolbarBackground_active__2f4Mq"}},function(e,t,n){e.exports={button:"FileImgButton_button__YkRnP",buttonText:"FileImgButton_buttonText__zV9Xx",inputFile:"FileImgButton_inputFile__3s8el"}},function(e,t,n){e.exports={button:"NavFileButton_button__3OvDn",button__text:"NavFileButton_button__text__1282s",inputFile:"NavFileButton_inputFile__2Yk6m",icon:"NavFileButton_icon__jHKWy"}},,,,,function(e,t,n){e.exports={block:"Text_block__Fvt_5",selected:"Text_selected__2uNOO"}},function(e,t,n){e.exports={button:"ButtonEditText_button__2hfGq",active:"ButtonEditText_active__Ffbj1"}},function(e,t,n){e.exports={toolbar:"ToolbarImg_toolbar__GYlq5"}},function(e,t,n){e.exports={button:"AddImgByUrlButton_button__1EEtm",buttonText:"AddImgByUrlButton_buttonText__OVCrG"}},function(e,t,n){e.exports={button:"AddBackgroundByUrlButton_button__JwlsP",button_text:"AddBackgroundByUrlButton_button_text__1Me2L"}},function(e,t,n){e.exports={button:"Button_button__35p3U",buttonText:"Button_buttonText__22v9d"}},function(e,t,n){e.exports={header:"TopToolbar_header__2xzmM",panel:"TopToolbar_panel__2JLpt",mainLabel:"TopToolbar_mainLabel__3Q8Mp"}},function(e,t,n){e.exports={button:"NavButton_button__3vR0i",button__text:"NavButton_button__text__2jZVH"}},function(e,t,n){e.exports={preview:"PreviewTemplate_preview__2EUo2",img:"PreviewTemplate_img__2FN7H"}},,function(e,t,n){e.exports={main:"CardMaker_main__qNuoq"}},function(e,t,n){e.exports={canvas:"Canvas_canvas__Ak89z"}},,function(e,t,n){e.exports={filter:"Filter_filter__16erS"}},function(e,t,n){e.exports={deleteArea:"DeleteArea_deleteArea__2KQym"}},function(e,t,n){e.exports={areaSelection:"AreaSelection_areaSelection__1Syux"}},function(e,t,n){e.exports={toolbar:"Toolbar_toolbar__apu1b"}},function(e,t,n){e.exports={input:"ColorPicker_input__3Kdsq"}},function(e,t,n){e.exports={input__number:"InputNumber_input__number__2Dr6G"}},function(e,t,n){e.exports={sticker:"PreviewArtObj_sticker__yjFpD"}},function(e,t,n){e.exports={cssloadSpinBox:"LoadingIndicator_cssloadSpinBox__27Etq","cssload-spin":"LoadingIndicator_cssload-spin__3fpV3"}},function(e,t,n){e.exports={input__color:"ColorPicker_input__color__29NBt"}},function(e,t,n){e.exports={toolbar:"ToolbarObject_toolbar__29GLR"}},function(e,t,n){e.exports={navbar:"Navbar_navbar__1TxYi",input:"Navbar_input__clRRx"}},,function(e,t,n){},,,,,,,,,,,,,,,function(e,t,n){"use strict";n.r(t);n(57);var r=n(1),c=n.n(r),a=n(28),o=n.n(a),i=n(42),l=n.n(i),u=n(43),s=n.n(u),d=n(2),f=n(15),b=n.n(f),v=n(4),j=n(41),_=n(11);var p=function(e,t){switch(t.type){case"NEW_CARD_MAKER":case"RESET_BACKGROUND":return{color:"#ffffff",src:null,width:null,height:null};case"SET_BACKGROUND_COLOR":return{color:t.color,src:null,width:null,height:null};case"SET_BACKGROUND_IMG":return{color:null,src:t.src,width:t.width,height:t.height};default:return e}};var m=function(e,t){switch(t.type){case"NEW_CARD_MAKER":return{color:"#ffffff",opacity:0};case"SET_FILTER":return{color:t.color,opacity:t.opacity};default:return e}};var h,O=function(e,t){switch(t.type){case"NEW_CARD_MAKER":return 600;case"SET_CANVAS_SIZE":return t.height;default:return e}};!function(e){e[e.img=0]="img",e[e.artObj=1]="artObj",e[e.text=2]="text"}(h||(h={}));var x,g={birthday_1:{name:"\u0421 \u0434\u043d\u0435\u043c \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f!",json:"./templates/birthday_1.json",preview:"./templates/birthday_1.png"},birthday_2:{name:"\u0421 \u0434\u043d\u0435\u043c \u0440\u043e\u0436\u0434\u0435\u043d\u0438\u044f!",json:"./templates/birthday_2.json",preview:"./templates/birthday_2.png"},february_23_1:{name:"\u0421 23 \u0444\u0435\u0432\u0440\u0430\u043b\u044f!",json:"./templates/february_23_1.json",preview:"./templates/february_23_1.png"},march_8_1:{name:"\u0421 8 \u043c\u0430\u0440\u0442\u0430!",json:"./templates/march_8_1.json",preview:"./templates/march_8_1.png"},march_8_2:{name:"\u0421 8 \u043c\u0430\u0440\u0442\u0430!",json:"./templates/march_8_2.json",preview:"./templates/march_8_2.png"},new_year_1:{name:"\u0421 \u043d\u043e\u0432\u044b\u043c \u0433\u043e\u0434\u043e\u043c!",json:"./templates/new_year_1.json",preview:"./templates/new_year_1.png"},new_year_2:{name:"\u0421 \u043d\u043e\u0432\u044b\u043c \u0433\u043e\u0434\u043e\u043c!",json:"./templates/new_year_2.json",preview:"./templates/new_year_2.png"},new_year_3:{name:"\u0421 \u043d\u043e\u0432\u044b\u043c \u0433\u043e\u0434\u043e\u043c!",json:"./templates/new_year_3.json",preview:"./templates/new_year_3.png"},september_1_1:{name:"\u0421 1 \u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f!",json:"./templates/september_1_1.json",preview:"./templates/september_1_1.png"}};function E(e,t,n){var r=[];return e.forEach((function(e){e.id===t?r.push(Object(v.a)(Object(v.a)({},e),n)):r.push(e)})),r}function y(e,t){var n=-1;return e.forEach((function(e,r){e.id!==t||(n=r)})),n}function T(e){if(!e)throw new Error("Assertion failed");return e}function w(){return[S(2),S(1),S(1),S(1),S(3)].join("-")}function S(e){for(var t="",n=0;n<e;n++)t+=(65536*(1+Math.random())|0).toString(16).substring(1);return t}!function(e){e.ball_1="./img/artObj/ball_1.svg",e.bouquet_1="./img/artObj/bouquet_1.svg",e.bouquet_2="./img/artObj/bouquet_2.svg",e.bouquet_3="./img/artObj/bouquet_3.svg",e.bouquet_4="./img/artObj/bouquet_4.svg",e.bouquet_5="./img/artObj/bouquet_5.svg",e.bow="./img/artObj/bow.svg",e.branch_1="./img/artObj/branch_1.svg",e.branch_2="./img/artObj/branch_2.svg",e.branch_3="./img/artObj/branch_3.svg",e.camera_1="./img/artObj/camera_1.svg",e.camera_2="./img/artObj/camera_2.svg",e.flower_1="./img/artObj/flower_1.svg",e.flower_2="./img/artObj/flower_2.svg",e.flower_3="./img/artObj/flower_3.svg",e.gift_1="./img/artObj/gift_1.svg",e.gift_2="./img/artObj/gift_2.svg",e.gift_3="./img/artObj/gift_3.svg",e.sun_1="./img/artObj/sun_1.svg",e.tree_1="./img/artObj/tree_1.svg"}(x||(x={}));var k=function(e,t){switch(t.type){case"NEW_CARD_MAKER":return[];case"CREATE_TEXT_BLOCK":return[].concat(Object(_.a)(e),[{id:w(),type:h.text,color:"#898989",x:t.x-45,y:t.y-25,text:"<div>\u0422\u0435\u043a\u0441\u0442<br></div>",size:50,bold:!1,italic:!1,underline:!1,fontFamily:"OpenSans"}]);case"SET_SIZE_BLOCK":return E(e,t.id,{width:t.width,height:t.height});case"SET_TEXT_IN_TEXT_BLOCK":return E(e,t.id,{text:t.text});case"SET_FONT_FAMILY_TEXT":return E(e,t.id,{fontFamily:t.fontFamily});case"SET_BOLD_TEXT":return E(e,t.id,{bold:t.isBold});case"SET_ITALIC_TEXT":return E(e,t.id,{italic:t.isItalic});case"SET_UNDERLINE_TEXT":return E(e,t.id,{underline:t.isUnderline});case"SET_SIZE_TEXT":return E(e,t.id,{size:t.size});case"SET_COLOR_TEXT":return E(e,t.id,{color:t.color});case"CREATE_IMG_BLOCK":return[].concat(Object(_.a)(e),[{id:w(),type:h.img,width:t.width,height:t.height,x:t.x,y:t.y,src:t.src}]);case"CREATE_ART_OBJ_BLOCK":return[].concat(Object(_.a)(e),[{id:w(),type:h.artObj,width:150,height:150,x:t.x,y:t.y,src:t.src}]);case"DELETE_BLOCK":var n=Object(_.a)(e);return function(e){return Boolean(e)}(t.id)&&n.forEach((function(e,r){if(e.id===t.id)return n.splice(r,1),!1})),n;case"SET_POSITION_BLOCK":return E(e,t.id,{x:t.x,y:t.y});case"SHIFT_UP_BLOCK":var r=Object(_.a)(e);if(function(e,t){var n=t.length;return Boolean(e&&y(t,e)<n-1)}(t.id,e)){var c=y(r,t.id),a=[r[c+1],r[c]];r.splice.apply(r,[c,2].concat(a))}return r;case"SHIFT_DOWN_BLOCK":var o=Object(_.a)(e);if(function(e,t){return Boolean(e&&y(t,e)>0)}(t.id,e)){var i=y(o,t.id),l=[o[i],o[i-1]];o.splice.apply(o,[i-1,2].concat(l))}return o;default:return e}};var L=function(e,t){switch(t.type){case"NEW_CARD_MAKER":return 800;case"SET_CANVAS_SIZE":return t.width;default:return e}};var N=function(e,t){return{width:L(e.width,t),height:O(e.height,t),filter:m(e.filter,t),listBlock:k(e.listBlock,t),background:p(e.background,t),deleteArea:B(e.deleteArea,t)}};function B(e,t){switch(t.type){case"DELETE_AREA_SELECTION":return t.area?[].concat(Object(_.a)(e),[t.area]):e;case"NEW_CARD_MAKER":return[];default:return e}}var C=function(e,t){switch(t.type){case"NEW_CARD_MAKER":case"RESET_SELECTED_BLOCK":case"DELETE_BLOCK":return null;case"SET_SELECTED_BLOCK":return t.id;default:return e}};var R=function(e,t){switch(t.type){case"NEW_CARD_MAKER":return{listState:[N({},t)],currentIndex:0};case"ADD_HISTORY":var n=e.listState,r=e.currentIndex,c=Object(_.a)(e.listState);return r!==n.length-1&&c.splice(r+1,n.length-(r+1)),c.push(t.newCanvas),{currentIndex:r+1,listState:c};case"UNDO":var a=e.currentIndex,o=function(e){var t=e.listState.length,n=e.currentIndex;return t>1&&n>0}(e)?a-1:a;return Object(v.a)(Object(v.a)({},e),{},{currentIndex:o});case"REDO":var i=e.currentIndex,l=function(e){var t=e.listState.length;return e.currentIndex+1<t}(e)?i+1:i;return Object(v.a)(Object(v.a)({},e),{},{currentIndex:l});default:return e}};function I(e,t){switch(t.type){case"AREA_SELECTION":return{x:t.x,y:t.y,width:t.width,height:t.height};case"SET_POSITION_AREA_SELECTION":return Object(v.a)(Object(v.a)({},e.viewModel.areaSelection),{},{x:t.x,y:t.y});case"RESET_AREA_SELECTION":case"UNDO":case"REDO":return null;default:return e.viewModel.areaSelection}}function A(e,t){switch(t.type){case"INPUT_BACKGROUND_COLOR":return t.color;case"UNDO":case"REDO":return null;default:return e.canvas.background.color}}function F(e,t){return"INPUT_BACKGROUND_IMG"===t.type?{width:t.width,height:t.height,src:t.src}:null}function D(e,t){switch(t.type){case"INPUT_CANVAS_SIZE":return{width:t.width,height:t.height};case"SET_CANVAS_SIZE":case"UNDO":case"REDO":return null;default:return e.viewModel.canvasSize}}function M(e,t){switch(t.type){case"INPUT_FILTER":return{color:t.color,opacity:t.opacity};case"UNDO":case"REDO":return null;default:return e.viewModel.filter}}function K(e,t){var n,r={color:null,size:null,bold:null,italic:null,underline:null,fontFamily:null,tempColor:null,tempSize:null};switch(t.type){case"CLICK_ON_TEXT":var c=(n=e.canvas.listBlock)[y(n,t.id)];return{color:c.color,tempColor:null,tempSize:null,size:c.size,bold:c.bold,italic:c.italic,underline:c.underline,fontFamily:c.fontFamily};case"SET_FONT_FAMILY_TEXT":return Object(v.a)(Object(v.a)({},e.viewModel.text),{},{fontFamily:t.fontFamily});case"INPUT_COLOR_TEXT":return Object(v.a)(Object(v.a)({},e.viewModel.text),{},{tempColor:t.color});case"INPUT_SIZE_TEXT":return Object(v.a)(Object(v.a)({},e.viewModel.text),{},{tempSize:t.size});case"SET_BOLD_TEXT":return Object(v.a)(Object(v.a)({},e.viewModel.text),{},{bold:t.isBold});case"SET_ITALIC_TEXT":return Object(v.a)(Object(v.a)({},e.viewModel.text),{},{italic:t.isItalic});case"SET_UNDERLINE_TEXT":return Object(v.a)(Object(v.a)({},e.viewModel.text),{},{underline:t.isUnderline});case"SET_SELECTED_BLOCK":case"RESET_SELECTED_BLOCK":case"UNDO":case"REDO":return r;default:return e.viewModel.text}}var P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return"NEW_CARD_MAKER"===t.type?{bgColor:null,bgImg:null,canvasSize:null,filter:null,text:{color:null,size:null,bold:null,italic:null,underline:null,fontFamily:null,tempColor:null,tempSize:null},areaSelection:null}:{bgColor:A(e,t),bgImg:F(e,t),canvasSize:D(e,t),filter:M(e,t),text:K(e,t),areaSelection:I(e,t)}};var z={width:800,height:600,filter:{color:"#ffffff",opacity:0},listBlock:[],deleteArea:[],background:{color:"#ffffff",src:null,width:null,height:null}},U={canvas:z,selectBlock:null,history:{listState:[z],currentIndex:0},viewModel:{bgColor:null,bgImg:null,canvasSize:null,filter:null,text:{color:null,size:null,bold:null,italic:null,underline:null,fontFamily:null,tempColor:null,tempSize:null},areaSelection:null}};var X=["UNDO","REDO","ADD_HISTORY","AFTER_CHANGE_HISTORY","SET_SELECTED_BLOCK","SET_SIZE_TEXT","SET_POSITION_AREA_SELECTION","RESET_SELECTED_BLOCK","RESET_AREA_SELECTION","APPLY_FILE_PROJECT","NEW_CARD_MAKER","AREA_SELECTION","CLICK_ON_TEXT","INPUT_SIZE_TEXT","INPUT_COLOR_TEXT","INPUT_FILTER","INPUT_CANVAS_SIZE","INPUT_BACKGROUND_IMG","INPUT_BACKGROUND_COLOR"],H=Object(j.b)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AFTER_CHANGE_HISTORY":return t.cardMaker;case"APPLY_FILE_PROJECT":return t.project;default:return{canvas:N(e.canvas,t),selectBlock:C(e.selectBlock,t),history:R(e.history,t),viewModel:P(e,t)}}}),U,Object(j.a)((function(e){return function(t){return function(n){var r=e.getState(),c=t(n);if(!X.includes(n.type)){var a=e.getState();JSON.stringify(r.canvas)!==JSON.stringify(a.canvas)&&(console.log("\u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435 \u0438\u0441\u0442\u043e\u0440\u0438\u0438"),e.dispatch({type:"ADD_HISTORY",newCanvas:a.canvas}))}return c}}}),(function(e){return function(t){return function(n){var r=t(n);if(["UNDO","REDO"].includes(n.type)){var c=e.getState().history.currentIndex,a=e.getState().history.listState[c],o=Object(v.a)(Object(v.a)({},e.getState()),{},{canvas:a});e.dispatch({type:"AFTER_CHANGE_HISTORY",cardMaker:o})}return r}}})));function G(e,t,n,c){Object(r.useEffect)((function(){var r=t.current,a=!1;function o(){a=!0,H.getState().selectBlock!==e&&setTimeout((function(){n(e)}))}function i(t){var n=t.defaultPrevented,o=H.getState().selectBlock===e;n||!o||t.target===r||a||c(),a=!1}return document.addEventListener("click",i),T(r).addEventListener("mousedown",o),function(){r&&r.removeEventListener("mousedown",o),document.removeEventListener("click",i)}}),[e,t,n,c])}function Y(e,t,n){Object(r.useEffect)((function(){var r,c,a=e.current;function o(e){r={x:e.pageX,y:e.pageY},document.addEventListener("mousemove",i),document.addEventListener("mouseup",l)}function i(e){if(!e.defaultPrevented){e.preventDefault();var n={x:e.pageX-r.x,y:e.pageY-r.y};c={x:t.x+n.x,y:t.y+n.y},T(a).style.left="".concat(c.x,"px"),T(a).style.top="".concat(c.y,"px")}}function l(){c&&n(c.x,c.y),document.removeEventListener("mousemove",i),document.removeEventListener("mouseup",l)}return a&&a.addEventListener("mousedown",o),function(){a&&a.removeEventListener("mousedown",o)}}),[e,t,n])}var W=n(9);function Z(e,t,n){return e*n/t}function J(e,t,n){return t*n/e}function q(e,t,n,r){var c={width:e,height:t};return e<n&&(c=function(e,t,n){var r=t*n/e;return{width:e*r/t,height:r}}(e,t,n)),t<r&&(c=function(e,t,n){var r=Z(e,t,n);return{width:r,height:J(e,t,r)}}(e,t,r)),c}function V(e,t,n,c,a,o,i,l,u){Object(r.useEffect)((function(){var r,s,d=i.current,f=n.current,b=c.current,v=a.current,j=o.current;function _(e){switch(e.preventDefault(),e.target){case f:s="LT";break;case b:s="RT";break;case v:s="LB";break;case j:s="RB"}r={x:e.pageX+(5-e.offsetX),y:e.pageY+(5-e.offsetY)},document.addEventListener("mousemove",g),document.addEventListener("mouseup",y)}var p,m=u.width,h=u.height,O=u.width,x=u.height;function g(e){e.preventDefault();var t={x:e.pageX-r.x,y:e.pageY-r.y},n={x:0,y:0};switch(s){case"LT":var c=E({x:-t.x,y:-t.y},O,x),a=Object(W.a)(c,2);m=a[0],h=a[1],n={x:u.width-m,y:u.height-h};break;case"RT":var o=E({x:t.x,y:-t.y},O,x),i=Object(W.a)(o,2);m=i[0],h=i[1],n={x:0,y:u.height-h};break;case"LB":var f=E({x:-t.x,y:t.y},O,x),b=Object(W.a)(f,2);m=b[0],h=b[1],n={x:u.width-m,y:0};break;case"RB":var v=E(t,O,x),j=Object(W.a)(v,2);m=j[0],h=j[1]}T(d).style.width="".concat(m,"px"),T(d).style.height="".concat(h,"px"),p={x:l.x+n.x,y:l.y+n.y},T(d).style.left="".concat(p.x,"px"),T(d).style.top="".concat(p.y,"px"),O=m,x=h}function E(e,t,n){return e.x/t<e.y/n?(h=u.height+e.y,m=Z(t,n,h=h<20?20:h)):(m=u.width+e.x,h=J(t,n,m=m<20?20:m)),[m,h]}function y(){e(m,h),p&&t(p.x,p.y),document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",y)}return T(f).addEventListener("mousedown",_),T(b).addEventListener("mousedown",_),T(v).addEventListener("mousedown",_),T(j).addEventListener("mousedown",_),function(){f&&f.removeEventListener("mousedown",_),b&&b.removeEventListener("mousedown",_),v&&v.removeEventListener("mousedown",_),j&&j.removeEventListener("mousedown",_)}}),[e,t,n,c,a,o,i,l,u])}function Q(e){return{type:"SET_SELECTED_BLOCK",id:e}}function $(e,t){return{type:"SET_SIZE_BLOCK",id:H.getState().selectBlock,width:e,height:t}}function ee(){return{type:"DELETE_BLOCK",id:H.getState().selectBlock}}function te(e,t){return{type:"SET_POSITION_BLOCK",id:H.getState().selectBlock,x:e,y:t}}var ne=n(0);var re=Object(d.b)((function(e){return{selectBlock:e.selectBlock}}),(function(e){return{setPositionBlock:function(t,n){return e(te(t,n))},setSizeBlock:function(t,n){return e($(t,n))},setSelectedBlock:function(t){return e(Q(t))},resetSelectedBlock:function(){return e({type:"RESET_SELECTED_BLOCK"})}}}))((function(e){var t=e.img,n="";t.src&&(n=t.src);var c=function(e){return{width:e.width,height:e.height,left:e.x,top:e.y}}(t),a=Object(r.useRef)(null),o=Object(r.useRef)(null),i=Object(r.useRef)(null),l=Object(r.useRef)(null),u=Object(r.useRef)(null);G(t.id,a,e.setSelectedBlock,e.resetSelectedBlock),Y(a,{x:t.x,y:t.y},e.setPositionBlock),V(e.setSizeBlock,e.setPositionBlock,o,i,l,u,a,{x:t.x,y:t.y},{width:t.width,height:t.height});var s=t.id===e.selectBlock?b.a.selected:"";return Object(ne.jsxs)("div",{className:"".concat(b.a.block," ").concat(s),style:c,ref:a,onDragStart:function(e){return e.preventDefault()},children:[Object(ne.jsx)("div",{className:b.a.pointTopLeft,ref:o}),Object(ne.jsx)("div",{className:b.a.pointTopRight,ref:i}),Object(ne.jsx)("img",{src:n,alt:"",className:b.a.img}),Object(ne.jsx)("div",{className:b.a.pointBottomLeft,ref:l}),Object(ne.jsx)("div",{className:b.a.pointBottomRight,ref:u})]})})),ce=n(32),ae=n.n(ce);function oe(e){return{type:"SET_BOLD_TEXT",id:H.getState().selectBlock,isBold:e}}function ie(e){return{type:"SET_ITALIC_TEXT",id:H.getState().selectBlock,isItalic:e}}function le(e){return{type:"SET_UNDERLINE_TEXT",id:H.getState().selectBlock,isUnderline:e}}var ue=Object(d.b)((function(e){return{selectBlock:e.selectBlock,color:e.viewModel.text.tempColor,size:e.viewModel.text.tempSize}}),(function(e){return{setPositionBlock:function(t,n){return e(te(t,n))},setSelectedBlock:function(t){return e(Q(t))},resetSelectedBlock:function(){return e({type:"RESET_SELECTED_BLOCK"})},setTextInTextBlock:function(t){return e(function(e){return{type:"SET_TEXT_IN_TEXT_BLOCK",id:H.getState().selectBlock,text:e}}(t))},clickOnText:function(){return e({type:"CLICK_ON_TEXT",id:H.getState().selectBlock})},deleteBlock:function(){return e(ee())},setBoldText:function(t){return e(oe(t))},setItalicText:function(t){return e(ie(t))},setUnderlineText:function(t){return e(le(t))}}}))((function(e){var t,n,c,a,o,i,l,u,s,d,f=e.text,b=Object(r.useRef)(null);G(f.id,b,e.setSelectedBlock,e.resetSelectedBlock),Y(b,{x:f.x,y:f.y},e.setPositionBlock),t=b,n=f.bold,c=f.italic,a=f.underline,o=e.setTextInTextBlock,i=e.clickOnText,l=e.deleteBlock,u=e.setBoldText,s=e.setItalicText,d=e.setUnderlineText,Object(r.useEffect)((function(){var e=t.current;function r(){setTimeout((function(){i()}))}function f(){T(e).setAttribute("contenteditable","true"),T(e).focus()}function b(){e&&(e.setAttribute("contenteditable","false"),"<div><br></div>"===e.innerHTML?l():o(e.innerHTML))}function v(t){"true"===T(e).getAttribute("contenteditable")&&t.stopImmediatePropagation()}function j(t){"Escape"===t.code&&"true"===T(e).getAttribute("contenteditable")&&(T(e).setAttribute("contenteditable","false"),o(T(e).innerHTML)),"Delete"===t.code&&(t.preventDefault(),document.execCommand("forwardDelete")),"KeyB"===t.code&&(t.ctrlKey||t.metaKey)&&u(!n),"KeyI"===t.code&&(t.ctrlKey||t.metaKey)&&s(!c),"KeyU"===t.code&&(t.ctrlKey||t.metaKey)&&d(!a)}function _(e){e.preventDefault();var t=e.clipboardData.getData("text/plain");document.execCommand("insertHTML",!1,t)}function p(){e&&("<"===e.innerHTML[0]&&"<br>"!==e.innerHTML||(e.innerHTML="<div>".concat(e.innerText,"<br></div>"),e.focus()))}return T(e).addEventListener("mousedown",r),T(e).addEventListener("dblclick",f),T(e).addEventListener("blur",b),T(e).addEventListener("keydown",j),T(e).addEventListener("paste",_),T(e).addEventListener("input",p),document.addEventListener("mousemove",v),function(){e&&(e.removeEventListener("mousedown",r),e.removeEventListener("dblclick",f),e.addEventListener("blur",b),e.removeEventListener("keydown",j),e.removeEventListener("paste",_),e.removeEventListener("input",p)),document.removeEventListener("mousemove",v)}}),[t,n,c,a,o,i,l,u,s,d]);var j=f.id===e.selectBlock?ae.a.selected:"",_=function(e){return{left:e.x,top:e.y,color:e.color,fontSize:e.size,fontWeight:e.bold?700:400,textDecoration:e.underline?"underline":"none",fontStyle:e.italic?"italic":"normal",fontFamily:e.fontFamily}}(f);return _=Object(v.a)(Object(v.a)({},_),{},{color:e.color&&""!==j?e.color:_.color,fontSize:e.size&&""!==j?e.size:_.fontSize}),Object(ne.jsx)("div",{style:_,contentEditable:!1,suppressContentEditableWarning:!0,onDragStart:function(e){return e.preventDefault()},ref:b,className:"".concat(ae.a.block," ").concat(j),dangerouslySetInnerHTML:{__html:f.text}})})),se=n(16),de=n.n(se);var fe=Object(d.b)((function(e){return{selectBlock:e.selectBlock}}),(function(e){return{setPositionBlock:function(t,n){return e(te(t,n))},setSizeBlock:function(t,n){return e($(t,n))},setSelectedBlock:function(t){return e(Q(t))},resetSelectedBlock:function(){return e({type:"RESET_SELECTED_BLOCK"})}}}))((function(e){var t=e.artObj,n=Object(r.useRef)(null),c=function(e){return{width:e.width,height:e.height,left:e.x,top:e.y}}(t),a=Object(r.useRef)(null),o=Object(r.useRef)(null),i=Object(r.useRef)(null),l=Object(r.useRef)(null);G(t.id,n,e.setSelectedBlock,e.resetSelectedBlock),Y(n,{x:t.x,y:t.y},e.setPositionBlock),V(e.setSizeBlock,e.setPositionBlock,a,o,i,l,n,{x:t.x,y:t.y},{width:t.width,height:t.height});var u=t.id===e.selectBlock?de.a.selected:"";return Object(ne.jsxs)("div",{className:"".concat(de.a.block," ").concat(u),style:c,ref:n,onDragStart:function(e){return e.preventDefault()},children:[Object(ne.jsx)("div",{className:de.a.pointTopLeft,ref:a}),Object(ne.jsx)("div",{className:de.a.pointTopRight,ref:o}),Object(ne.jsx)("img",{src:t.src,alt:"",className:de.a.img}),Object(ne.jsx)("div",{className:de.a.pointBottomLeft,ref:i}),Object(ne.jsx)("div",{className:de.a.pointBottomRight,ref:l})]})})),be=n(45),ve=n.n(be);var je=Object(d.b)((function(e){return{canvas:e.canvas,filter:e.viewModel.filter}}))((function(e){var t=e.canvas,n="",r=0;e.filter?(n=e.filter.color,r=e.filter.opacity):(n=t.filter.color,r=t.filter.opacity);var c={background:n,opacity:r};return Object(ne.jsx)("div",{className:ve.a.filter,style:c,id:"filter"})})),_e=n(46),pe=n.n(_e);var me=Object(d.b)((function(e){return{deleteArea:e.canvas.deleteArea}}))((function(e){if(e.deleteArea===[])return null;var t=[];return e.deleteArea.forEach((function(e,n){var r={width:e.width,height:e.height,left:e.x,top:e.y};t.push(Object(ne.jsx)("div",{className:pe.a.deleteArea,style:r},n))})),Object(ne.jsx)(ne.Fragment,{children:t})})),he=n(47),Oe=n.n(he);function xe(e,t){return{type:"SET_CANVAS_SIZE",width:e,height:t}}function ge(e,t,n){return{type:"SET_BACKGROUND_IMG",src:e,width:t,height:n}}function Ee(e,t,n){return{type:"INPUT_BACKGROUND_IMG",src:e,width:t,height:n}}function ye(e,t,n,r){return{type:"AREA_SELECTION",x:e,y:t,width:n,height:r}}var Te=Object(r.forwardRef)((function(e,t){var n=Object(r.useRef)(null);if(function(e,t,n,c){Object(r.useEffect)((function(){var r,a,o=e.current,i=t.current,l=document.createElement("div");function u(e){e.defaultPrevented||e.target!==o||(r={x:e.pageX,y:e.pageY},a={x:e.offsetX,y:e.offsetY},document.addEventListener("mousemove",s),document.addEventListener("mouseup",d),l.style.border="1px dashed red",l.style.width="0px",l.style.height="0px",l.style.left="".concat(e.offsetX,"px"),l.style.top="".concat(e.offsetY,"px"),o&&o.appendChild(l))}function s(e){if(!e.defaultPrevented){var t={x:Math.abs(e.pageX-r.x),y:Math.abs(e.pageY-r.y)},n={x:0,y:0};r.x>=e.pageX&&r.y>=e.pageY?n={x:-t.x,y:-t.y}:r.x<=e.pageX&&r.y>=e.pageY?n={x:0,y:-t.y}:r.x>=e.pageX&&r.y<=e.pageY&&(n={x:-t.x,y:0}),l.style.width="".concat(t.x,"px"),l.style.height="".concat(t.y,"px"),l.style.left="".concat(a.x+n.x,"px"),l.style.top="".concat(a.y+n.y,"px")}}function d(){l.offsetWidth>2&&l.offsetHeight>2&&n(l.offsetLeft,l.offsetTop,l.offsetWidth,l.offsetHeight),l.remove(),document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",d)}function f(e){!e.defaultPrevented&&t.current&&(e.preventDefault(),t.current!==e.target&&c())}function b(e){e.preventDefault()}return l.style.position="absolute",l.style.zIndex="1",l.style.pointerEvents="none",T(o).addEventListener("mousedown",u),i&&i.addEventListener("mousedown",b),document.addEventListener("mousedown",f),function(){o&&o.removeEventListener("mousedown",u),i&&i.removeEventListener("mousedown",b),document.removeEventListener("mousedown",f)}}),[e,t,n,c])}(t,n,e.areaSelection,e.resetAreaSelection),Y(n,{x:e.area?e.area.x:0,y:e.area?e.area.y:0},e.setPositionAreaSelection),!e.area)return null;var c={left:e.area.x,top:e.area.y,width:e.area.width-2,height:e.area.height-2};return Object(ne.jsx)(ne.Fragment,{children:e.area&&Object(ne.jsx)("div",{className:Oe.a.areaSelection,style:c,ref:n})})})),we=Object(d.b)((function(e){return{area:e.viewModel.areaSelection}}),(function(e){return{areaSelection:function(t,n,r,c){return e(ye(t,n,r,c))},resetAreaSelection:function(){return e({type:"RESET_AREA_SELECTION"})},setPositionAreaSelection:function(t,n){return e(function(e,t){return{type:"SET_POSITION_AREA_SELECTION",x:e,y:t}}(t,n))}}}),null,{forwardRef:!0})(Te);var Se=Object(d.b)((function(e){return{canvas:e.canvas,area:e.viewModel.areaSelection,bgColor:e.viewModel.bgColor,canvasSize:e.viewModel.canvasSize}}),(function(e){return{areaSelection:function(t,n,r,c){return e(ye(t,n,r,c))},resetAreaSelection:function(){return e({type:"RESET_AREA_SELECTION"})}}}))((function(e){var t=function(e,t,n){var r="#fff",c="";t?r=t:e.background.color?r=e.background.color:e.background.src&&(c="url(".concat(e.background.src,")"));var a=0,o=0;n?(a=n.width,o=n.height):(a=e.width,o=e.height);var i=e.background.width,l=e.background.height,u=null;i&&l&&(u=q(i,l,a,o));return{width:a,height:o,backgroundColor:r,backgroundImage:c,backgroundSize:u?"".concat(u.width,"px ").concat(u.height,"px"):""}}(e.canvas,e.bgColor,e.canvasSize),n=function(e){var t=[];return e.forEach((function(e){switch(e.type){case h.text:t.push(Object(ne.jsx)(ue,{text:e},e.id));break;case h.img:t.push(Object(ne.jsx)(re,{img:e},e.id));break;case h.artObj:t.push(Object(ne.jsx)(fe,{artObj:e},e.id))}})),t}(e.canvas.listBlock),c=Object(r.useRef)(null);return Object(ne.jsxs)("div",{id:"canvas",className:s.a.canvas,style:t,ref:c,children:[Object(ne.jsx)(we,{ref:c}),Object(ne.jsx)(me,{}),Object(ne.jsx)(je,{}),n]})}));var ke=n(48),Le=n.n(ke),Ne=n(20),Be=n.n(Ne),Ce=n(5),Re=n(33),Ie=n.n(Re),Ae=n(8);var Fe=Object(d.b)()((function(e){var t=Object(r.useRef)(null);return function(e,t,n,c){Object(r.useEffect)((function(){var r=e.current;function a(e){null!==t?(n(!t),e.preventDefault()):c||n(!0)}return T(r).addEventListener("click",a),function(){r&&r.removeEventListener("click",a)}}),[e,n,t,c])}(t,e.enabled,e.modifyFn,e.param),Object(ne.jsx)("button",{className:"".concat(Ie.a.button," ").concat(e.enabled?Ie.a.active:""),ref:t,children:Object(ne.jsx)(Ae.a,{icon:e.icon})})})),De=n(49),Me=n.n(De);var Ke=Object(d.b)((function(e){return{color:e.viewModel.text.color}}),(function(e){return{setColorText:function(t){return e(function(e){return{type:"SET_COLOR_TEXT",id:H.getState().selectBlock,color:e}}(t))},inputColorText:function(t){return e(function(e){return{type:"INPUT_COLOR_TEXT",color:e}}(t))}}}))((function(e){var t=Object(r.useRef)(null);return function(e,t,n,c){Object(r.useEffect)((function(){var r=t.current;function a(e){var t=e.target;c(t.value)}function o(e){var t=e.target;n(t.value)}function i(e){e.stopImmediatePropagation()}return T(r).value=e||"#000000",T(r).addEventListener("input",a),T(r).addEventListener("change",o),T(r).addEventListener("click",i),function(){r&&(r.removeEventListener("input",a),r.removeEventListener("change",o),r.removeEventListener("click",i))}}),[e,t,n,c])}(e.color,t,e.setColorText,e.inputColorText),Object(ne.jsx)("input",{type:"color",ref:t,className:Me.a.input})})),Pe=n(50),ze=n.n(Pe);var Ue=Object(d.b)((function(e){return{size:e.viewModel.text.size,tempSize:e.viewModel.text.tempSize}}),(function(e){return{setSizeText:function(t){return e(function(e){return{type:"SET_SIZE_TEXT",id:H.getState().selectBlock,size:e}}(t))},inputSizeText:function(t){return e(function(e){return{type:"INPUT_SIZE_TEXT",size:e}}(t))}}}))((function(e){var t,n,c,a,o=Object(r.useRef)(null);return t=e.size,n=o,c=e.setSizeText,a=e.inputSizeText,Object(r.useEffect)((function(){var e=n.current;function r(e){var t=e.target;Number(t.value)>10?a(Number(t.value)):a(10)}function o(e){var t=e.target;Number(t.value)>10?c(Number(t.value)):c(10)}function i(e){e.preventDefault()}return T(e).value=t?String(t):"".concat(10),T(e).addEventListener("input",r),T(e).addEventListener("blur",o),T(e).addEventListener("click",i),function(){e&&(e.removeEventListener("input",r),e.removeEventListener("blur",o),e.removeEventListener("click",i))}}),[t,n,c,a]),Object(ne.jsx)("input",{type:"number",ref:o,className:ze.a.input__number,min:10,max:150,step:1})})),Xe=n(10),He=n.n(Xe);var Ge=Object(d.b)((function(e){return{fontFamily:e.viewModel.text.fontFamily}}),(function(e){return{setFontFamilyText:function(t){return e(function(e){return{type:"SET_FONT_FAMILY_TEXT",id:H.getState().selectBlock,fontFamily:e}}(t))}}}))((function(e){var t=Object(r.useRef)(null);!function(e,t){Object(r.useEffect)((function(){var n=e.current;function r(e){e.preventDefault()}function c(e){var n=e.target;t(n.value)}return T(n).addEventListener("click",r),T(n).addEventListener("change",c),function(){n&&(n.removeEventListener("click",r),n.removeEventListener("change",c))}}),[e,t])}(t,e.setFontFamilyText);var n=[{value:"Roboto Slab",class:He.a.robotoSlab},{value:"Fantazyor",class:He.a.fantazyor},{value:"Piroucyrillic",class:He.a.piroucyrillic},{value:"Phenomena",class:He.a.phenomena},{value:"Sunday",class:He.a.sunday},{value:"Kurale",class:He.a.kurale},{value:"Sensei",class:He.a.sensei},{value:"Borsok",class:He.a.borsok},{value:"Summer",class:He.a.summer},{value:"Underdog",class:He.a.underdog},{value:"Montserrat",class:He.a.montserrat},{value:"OpenSans",class:He.a.openSans},{value:"Comfortaa",class:He.a.comfortaa},{value:"Rubik",class:He.a.rubik},{value:"Marta",class:He.a.marta}].map((function(e,t){return Object(ne.jsx)("option",{className:e.class,value:e.value,children:e.value},t)})),c=n[0].props.className;return n=n.map((function(t){return t.props.value===e.fontFamily?(c=t.props.className,Object(v.a)(Object(v.a)({},t),{},{props:Object(v.a)(Object(v.a)({},t.props),{},{selected:!0})})):t})),Object(ne.jsx)("select",{name:"",id:"",className:"".concat(He.a.select," ").concat(c),ref:t,children:n})}));var Ye=Object(d.b)((function(e){return{bold:e.viewModel.text.bold,italic:e.viewModel.text.italic,underline:e.viewModel.text.underline}}),(function(e){return{createTextBlock:function(){return e({type:"CREATE_TEXT_BLOCK",x:H.getState().canvas.width/2,y:H.getState().canvas.height/2})},setBoldText:function(t){return e(oe(t))},setItalicText:function(t){return e(ie(t))},setUnderlineText:function(t){return e(le(t))}}}))((function(e){return Object(ne.jsxs)("div",{className:Be.a.toolbar,children:[Object(ne.jsxs)("div",{className:Be.a.toolbar__row,children:[Object(ne.jsx)(Ge,{}),Object(ne.jsx)(Fe,{icon:Ce.i,enabled:null,modifyFn:e.createTextBlock,param:!1})]}),Object(ne.jsxs)("div",{className:Be.a.toolbar__row,children:[Object(ne.jsx)(Ue,{}),Object(ne.jsx)(Fe,{icon:Ce.c,enabled:e.bold,modifyFn:e.setBoldText,param:!0}),Object(ne.jsx)(Fe,{icon:Ce.l,enabled:e.italic,modifyFn:e.setItalicText,param:!0}),Object(ne.jsx)(Fe,{icon:Ce.r,enabled:e.underline,modifyFn:e.setUnderlineText,param:!0}),Object(ne.jsx)("div",{className:Be.a.colorPickerBox,children:Object(ne.jsx)(Ke,{})})]})]})})),We=n(34),Ze=n.n(We),Je=n(22),qe=n.n(Je);var Ve=Object(d.b)()((function(e){return Object(ne.jsxs)("div",{className:qe.a.dropdown,children:[Object(ne.jsxs)("button",{className:qe.a.dropbtn,children:[Object(ne.jsx)(Ae.a,{icon:e.icon}),Object(ne.jsx)("span",{className:qe.a.dropdownText,children:e.label})]}),Object(ne.jsx)("div",{className:qe.a.dropdownContent,style:{minWidth:e.minWidth},children:e.children})]})})),Qe=n(23),$e=n.n(Qe),et=Object(r.forwardRef)((function(e,t){return Object(ne.jsxs)("button",{className:$e.a.button,children:[Object(ne.jsx)("label",{htmlFor:"input-file-img",className:$e.a.icon,children:Object(ne.jsx)(Ae.a,{icon:e.icon})}),Object(ne.jsx)("input",{className:$e.a.inputFile,type:"file",accept:".png,.jpg,.jfif,.jpe,.jpeg",ref:t,id:"input-file-img"}),Object(ne.jsx)("label",{className:$e.a.buttonText,htmlFor:"input-file-img",children:e.label})]})})),tt=Object(d.b)(null,null,null,{forwardRef:!0})(et),nt=n(51),rt=n.n(nt);var ct=Object(d.b)(null,(function(e){return{createArtObjBlock:function(t){return e(function(e){return{type:"CREATE_ART_OBJ_BLOCK",src:e,x:H.getState().canvas.width/2-75,y:H.getState().canvas.height/2-75}}(t))}}}))((function(e){var t,n,c,a=Object(r.useRef)(null);return t=a,n=e.src,c=e.createArtObjBlock,Object(r.useEffect)((function(){var e=t.current;function r(){c(n)}return T(e).addEventListener("click",r),function(){e&&e.removeEventListener("click",r)}}),[t,n,c]),Object(ne.jsx)("img",{src:e.src,alt:"",ref:a,className:rt.a.sticker})})),at=n(3),ot=n.n(at),it=n(7),lt=function(){var e=Object(it.a)(ot.a.mark((function e(t){var n,r;return ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Promise((function(e,n){var r=new FileReader;r.readAsDataURL(t),r.onload=Object(it.a)(ot.a.mark((function t(){return ot.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e(r.result));case 1:case"end":return t.stop()}}),t)}))),r.onerror=n})),r=new Image,e.next=4,n;case 4:return r.src=e.sent,e.next=7,r.decode();case 7:return e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ut=function(){var e=Object(it.a)(ot.a.mark((function e(t){return ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=JSON,e.next=3,new Promise((function(e,n){var r=new FileReader;r.readAsText(t),r.onload=function(){return e(r.result)},r.onerror=n}));case 3:return e.t1=e.sent,e.abrupt("return",e.t0.parse.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function st(e,t,n){return{type:"CREATE_IMG_BLOCK",src:e,width:t,height:n,x:H.getState().canvas.width/2-t/2,y:H.getState().canvas.height/2-n/2}}var dt=n(35),ft=n.n(dt),bt=n(12),vt=n.n(bt),jt=n(19);function _t(e){return pt.apply(this,arguments)}function pt(){return pt=Object(it.a)(ot.a.mark((function e(t){var n,r,c=arguments;return ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=c.length>1&&void 0!==c[1]?c[1]:null,""===t.split(" ").join("")){e.next=8;break}return e.next=4,fetch(n||"https://api.pexels.com/v1/search?per_page=20&locale=ru-RU&query="+t,{headers:{"Content-Type":"application/json","User-Agent":"Pexels/JavaScript",Authorization:"563492ad6f91700001000001cbbc3b7fe6c14a5faa262d8d356ad945"}});case 4:return r=e.sent,e.next=7,r.json();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}}),e)}))),pt.apply(this,arguments)}var mt=Object(d.b)()((function(e){var t=Object(r.useRef)(null);return e.useImg(t,e.baseSrc,e.setModal),Object(ne.jsx)("img",{src:e.src,width:375,loading:"lazy",ref:t,alt:""},e.src)})),ht=n(52),Ot=n.n(ht),xt=Object(r.forwardRef)((function(e,t){return Object(ne.jsx)("div",{className:Ot.a.cssloadSpinBox,ref:t})})),gt=Object(d.b)(null,null,null,{forwardRef:!0})(xt),Et=Object(d.b)()((function(e){var t=e.visible,n=void 0!==t&&t,c=e.setModal,a=e.useImg,o=e.onClose;Object(r.useEffect)((function(){var e=function(e){if("Escape"===e.key)o()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[o]);var i=Object(r.useRef)(null),l=Object(r.useRef)(null),u=Object(r.useRef)(null),s=Object(r.useRef)(null),d=Object(r.useRef)(null),f=Object(r.useRef)(null),b=Object(r.useState)([]),v=Object(W.a)(b,2),j=v[0],p=v[1],m=Object(r.useState)(null),h=Object(W.a)(m,2),O=h[0],x=h[1],g=Object(r.useState)(null),E=Object(W.a)(g,2),y=E[0],T=E[1];if(function(e,t,n,c,a,o,i,l,u,s,d){Object(r.useEffect)((function(){var r=e.current,f=t.current,b=n.current;function v(){return j.apply(this,arguments)}function j(){return(j=Object(it.a)(ot.a.mark((function e(){var t;return ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c.current){e.next=18;break}return a.current&&(a.current.style.display="block"),e.prev=2,e.next=5,_t(c.current.value);case 5:if(m((t=e.sent).photos),t.next_page?s(t.next_page):l&&s(null),u&&d(null),t.photos.length>0&&o.current&&(o.current.innerText=""),0!==t.photos.length||!o.current){e.next=12;break}throw new Error;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),o.current&&(o.current.innerText="\u041f\u043e \u0434\u0430\u043d\u043d\u043e\u043c\u0443 \u0437\u0430\u043f\u0440\u043e\u0441\u0443 \u043d\u0438\u0447\u0435\u0433\u043e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e");case 17:a.current&&(a.current.style.display="none");case 18:case"end":return e.stop()}}),e,null,[[2,14]])})))).apply(this,arguments)}function _(e){return p.apply(this,arguments)}function p(){return(p=Object(it.a)(ot.a.mark((function e(n){var r,i;return ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.target===t.current?l:u,!c.current){e.next=16;break}return a.current&&(a.current.style.display="block"),e.prev=3,e.next=6,_t(c.current.value,r);case 6:i=e.sent,a.current&&(a.current.style.display="none"),m(i.photos),i.next_page?s(i.next_page):l&&s(null),i.prev_page?d(i.prev_page):u&&d(null),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(3),o.current&&(o.current.innerText="\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0435\u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u0430");case 16:case"end":return e.stop()}}),e,null,[[3,13]])})))).apply(this,arguments)}function m(e){var t,n=[],r=Object(jt.a)(e);try{for(r.s();!(t=r.n()).done;){var c=t.value;n.push(c.src.large)}}catch(a){r.e(a)}finally{r.f()}i(n)}return l&&t.current?t.current.style.visibility="visible":t.current&&(t.current.style.visibility="hidden"),u&&n.current?n.current.style.visibility="visible":n.current&&(n.current.style.visibility="hidden"),r&&r.addEventListener("click",v),f&&f.addEventListener("click",_),b&&b.addEventListener("click",_),function(){r&&r.removeEventListener("click",v),f&&f.removeEventListener("click",_),b&&b.removeEventListener("click",_)}}))}(i,l,u,s,d,f,p,O,y,x,T),Object(r.useEffect)((function(){n||(p([]),x(null),T(null))}),[n]),!n)return null;var w=Object(_.a)(j),S=w.splice(w.length/2),k=function(){o(),p([]),x(null),T(null)};return Object(ne.jsx)("div",{className:vt.a.modal,onClick:k,children:Object(ne.jsxs)("div",{className:vt.a.modalDialog,onClick:function(e){return e.stopPropagation()},children:[Object(ne.jsxs)("div",{className:vt.a.modalHeader,children:[Object(ne.jsx)("h3",{className:vt.a.modalTitle,children:"\u041f\u043e\u0438\u0441\u043a \u0444\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0439"}),Object(ne.jsx)("span",{className:vt.a.modalClose,onClick:k,children:Object(ne.jsx)(Ae.a,{icon:Ce.p})})]}),Object(ne.jsxs)("div",{className:vt.a.modalHeader,children:[Object(ne.jsxs)("div",{className:vt.a.searchBox,children:[Object(ne.jsx)("input",{type:"text",ref:s}),Object(ne.jsx)("button",{ref:i,children:"\u041f\u043e\u0438\u0441\u043a"}),Object(ne.jsx)(gt,{ref:d})]}),Object(ne.jsxs)("div",{className:vt.a.navBox,children:[Object(ne.jsx)("button",{ref:u,children:"\u041d\u0430\u0437\u0430\u0434"}),Object(ne.jsx)("button",{ref:l,children:"\u0412\u043f\u0435\u0440\u0435\u0434"})]})]}),Object(ne.jsx)("div",{className:vt.a.modalBody,children:Object(ne.jsxs)("div",{className:vt.a.modalContent,children:[Object(ne.jsx)("div",{className:vt.a.information,ref:f,children:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u043e\u0438\u0441\u043a\u043e\u0432\u043e\u0439 \u0437\u0430\u043f\u0440\u043e\u0441"}),Object(ne.jsx)("div",{style:{display:"inline-block"},children:w.map((function(e){return Object(ne.jsx)(mt,{setModal:c,useImg:a,src:e,baseSrc:e},e)}))}),Object(ne.jsx)("div",{style:{display:"inline-block"},children:S.map((function(e){return Object(ne.jsx)(mt,{setModal:c,useImg:a,src:e,baseSrc:e},e)}))})]})}),Object(ne.jsx)("div",{className:vt.a.modalFooter})]})})}));function yt(e,t,n){Object(r.useEffect)((function(){var r=e.current;function c(){return a.apply(this,arguments)}function a(){return(a=Object(it.a)(ot.a.mark((function e(){var r;return ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new Image).src=t,e.next=4,r.decode();case 4:H.dispatch(st(r.src,r.width,r.height)),n(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r&&r.addEventListener("click",c),function(){r&&r.removeEventListener("click",c)}}),[e,t,n])}var Tt=Object(r.forwardRef)((function(e,t){var n=Object(r.useState)(!1),c=Object(W.a)(n,2),a=c[0],o=c[1];return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)("button",{onClick:function(){return o(!0)},ref:t,className:ft.a.button,children:[Object(ne.jsx)(Ae.a,{icon:e.icon}),Object(ne.jsx)("span",{className:ft.a.buttonText,children:e.label})]}),Object(ne.jsx)(Et,{visible:a,onClose:function(){return o(!1)},setModal:o,useImg:yt})]})})),wt=Object(d.b)(null,(function(e){return{createImgBlock:function(t,n,r){return e(st(t,n,r))}}}),null,{forwardRef:!0})(Tt);var St=Object(d.b)(null,(function(e){return{createImgBlock:function(t,n,r){return e(st(t,n,r))}}}))((function(e){var t=Object.values(x),n=[];t.forEach((function(e,t){n.push(Object(ne.jsx)(ct,{src:e},t))}));var c=Object(r.useRef)(null);return function(e,t){Object(r.useEffect)((function(){var n=e.current;function r(){return c.apply(this,arguments)}function c(){return(c=Object(it.a)(ot.a.mark((function e(){var r,c;return ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=14;break}if(r=n.files,e.prev=2,!r){e.next=8;break}return e.next=6,lt(r[0]);case 6:c=e.sent,t(c.src,c.width,c.height);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0438\u043c\u043f\u043e\u0440\u0442\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0439 \u0444\u0430\u0439\u043b \u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443");case 13:n.value="";case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}return T(n).addEventListener("change",r),function(){n&&n.removeEventListener("change",r)}}),[e,t])}(c,e.createImgBlock),Object(ne.jsx)("div",{className:Ze.a.toolbar,children:Object(ne.jsxs)("div",{className:Ze.a.button_box,children:[Object(ne.jsx)(tt,{label:"C \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u0430",icon:Ce.e,ref:c}),Object(ne.jsx)(wt,{label:"\u0418\u0437 Pixels",icon:Ce.j}),Object(ne.jsx)(Ve,{minWidth:200,label:"\u0421\u0442\u0438\u043a\u0435\u0440\u044b",icon:Ce.o,children:n})]})})})),kt=n(24),Lt=n.n(kt),Nt=n(53),Bt=n.n(Nt),Ct=Object(r.forwardRef)((function(e,t){return Object(ne.jsx)("input",{type:"color",ref:t,className:Bt.a.input__color})})),Rt=Object(d.b)(null,null,null,{forwardRef:!0})(Ct);var It=Object(d.b)((function(e){return{filter:e.canvas.filter}}),(function(e){return{inputFilter:function(t,n){return e(function(e,t){return{type:"INPUT_FILTER",color:e,opacity:t}}(t,n))},setFilter:function(t,n){return e(function(e,t){return{type:"SET_FILTER",color:e,opacity:t}}(t,n))}}}))((function(e){var t=Object(r.useRef)(null),n=Object(r.useRef)(null);return function(e,t,n,c,a){Object(r.useEffect)((function(){var r=e.current,o=t.current;function i(){if(o&&r){var e=r.value,t=Number(o.value);n(e,t)}}function l(){if(o&&r){var e=Number(o.value),t=r.value;c(t,e)}}return T(r).value=a.color,T(o).value=String(a.opacity),T(r).addEventListener("input",i),T(r).addEventListener("change",l),T(o).addEventListener("input",i),T(o).addEventListener("change",l),function(){r&&(r.removeEventListener("input",i),r.removeEventListener("change",l)),o&&(o.removeEventListener("input",i),o.removeEventListener("change",l))}}),[e,t,n,c,a])}(t,n,e.inputFilter,e.setFilter,e.filter),Object(ne.jsx)(ne.Fragment,{children:Object(ne.jsxs)("div",{className:Lt.a.toolbar,children:[Object(ne.jsxs)("div",{className:Lt.a.row,children:[Object(ne.jsx)("label",{className:Lt.a.label,children:"\u0426\u0432\u0435\u0442 \u0444\u0438\u043b\u044c\u0442\u0440\u0430:"}),Object(ne.jsx)(Rt,{ref:t})]}),Object(ne.jsx)("input",{type:"range",min:"0",max:"0.5",step:"0.025",className:Lt.a.inputRange,ref:n})]})})})),At=n(25),Ft=n.n(At),Dt=n(26),Mt=n.n(Dt),Kt=n(14),Pt=n.n(Kt),zt=Object(d.b)()((function(e){var t=e.visible,n=void 0!==t&&t,c=e.title,a=void 0===c?"":c,o=e.content,i=void 0===o?"":o,l=e.footer,u=void 0===l?"":l,s=e.onClose;return Object(r.useEffect)((function(){var e=function(e){if("Escape"===e.key)s()};return document.addEventListener("keydown",e),function(){return document.removeEventListener("keydown",e)}}),[s]),n?Object(ne.jsx)("div",{className:Pt.a.modal,onClick:s,children:Object(ne.jsxs)("div",{className:Pt.a.modalDialog,onClick:function(e){return e.stopPropagation()},children:[Object(ne.jsxs)("div",{className:Pt.a.modalHeader,children:[Object(ne.jsx)("h3",{className:Pt.a.modalTitle,children:a}),Object(ne.jsx)("span",{className:Pt.a.modalClose,onClick:s,children:Object(ne.jsx)(Ae.a,{icon:Ce.p})})]}),Object(ne.jsx)("div",{className:Pt.a.modalBody,children:Object(ne.jsx)("div",{className:Pt.a.modalContent,children:i})}),u&&Object(ne.jsx)("div",{className:Pt.a.modalFooter,children:u})]})}):null}));var Ut=Object(d.b)((function(e){return{viewModelBgImg:e.viewModel.bgImg}}),(function(e){return{inputBackgroundImg:function(t,n,r){return e(Ee(t,n,r))},setBackgroundImg:function(t,n,r){return e(ge(t,n,r))},setCanvasSize:function(t,n){return e(xe(t,n))}}}))((function(e){var t,n=Object(r.useRef)(null),c=Object(r.useState)(!1),a=Object(W.a)(c,2),o=a[0],i=a[1],l=function(){return i(!1)};!function(e,t,n,c){Object(r.useEffect)((function(){var r=H.getState().canvas.width,a=H.getState().canvas.height,o=e.current;function i(){return l.apply(this,arguments)}function l(){return(l=Object(it.a)(ot.a.mark((function e(){var i,l;return ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o){e.next=14;break}if(i=o.files,e.prev=2,!i){e.next=8;break}return e.next=6,lt(i[0]);case 6:l=e.sent,r<l.width||a<l.height?(n(l.src,l.width,l.height),c(!0)):t(l.src,l.width,l.height);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0438\u043c\u043f\u043e\u0440\u0442\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0439 \u0444\u0430\u0439\u043b \u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443");case 13:o.value="";case 14:case"end":return e.stop()}}),e,null,[[2,10]])})))).apply(this,arguments)}return T(o).addEventListener("change",i),function(){o&&o.removeEventListener("change",i)}}),[e,t,n,c])}(n,e.setBackgroundImg,e.inputBackgroundImg,i);var u=null!==(t=e.viewModelBgImg)&&void 0!==t?t:{width:0,height:0,src:""},s=Object(ne.jsx)("p",{children:"\u0418\u0441\u0445\u043e\u0434\u043d\u043e\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u0440\u0430\u0437\u043c\u0435\u0440\u0430 \u0445\u043e\u043b\u0441\u0442\u0430"}),d=Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)("button",{onClick:function(){e.setCanvasSize(u.width,u.height),e.setBackgroundImg(u.src,u.width,u.height),l()},children:"\u0420\u0430\u0441\u0442\u044f\u043d\u0443\u0442\u044c \u0445\u043e\u043b\u0441\u0442"}),Object(ne.jsx)("button",{onClick:function(){e.setBackgroundImg(u.src,u.width,u.height),l()},children:"\u041e\u0431\u0440\u0435\u0437\u0430\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"}),Object(ne.jsx)("button",{onClick:l,children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]});return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)(zt,{visible:o,title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435",content:s,footer:d,onClose:l}),Object(ne.jsxs)("button",{className:Mt.a.button,children:[Object(ne.jsx)("label",{htmlFor:"input-file-bg-img",className:Mt.a.icon,children:Object(ne.jsx)(Ae.a,{icon:e.icon})}),Object(ne.jsx)("input",{className:Mt.a.inputFile,type:"file",accept:".png,.jpg,.jfif,.jpe,.jpeg",id:"input-file-bg-img",ref:n}),Object(ne.jsx)("label",{className:Mt.a.buttonText,htmlFor:"input-file-bg-img",children:e.label})]})]})}));var Xt=n(36),Ht=n.n(Xt);function Gt(e,t,n){Object(r.useEffect)((function(){var r=e.current;function c(){return a.apply(this,arguments)}function a(){return(a=Object(it.a)(ot.a.mark((function e(){var r;return ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(r=new Image).src=t,e.next=5,r.decode();case 5:H.getState().canvas.width<r.width||H.getState().canvas.height<r.height?(H.dispatch(Ee(r.src,r.width,r.height)),n(!0)):H.dispatch(ge(r.src,r.width,r.height)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0438\u043c\u043f\u043e\u0440\u0442\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f.");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return r&&r.addEventListener("click",c),function(){r&&r.removeEventListener("click",c)}}),[e,n,t])}var Yt=Object(r.forwardRef)((function(e,t){var n,c=Object(r.useState)(!1),a=Object(W.a)(c,2),o=a[0],i=a[1],l=function(){return i(!1)},u=Object(r.useState)(!1),s=Object(W.a)(u,2),d=s[0],f=s[1],b=function(){return f(!1)},v=null!==(n=e.viewModelBgImg)&&void 0!==n?n:{width:0,height:0,src:""},j=Object(ne.jsx)("p",{children:"\u0418\u0441\u0445\u043e\u0434\u043d\u043e\u0435 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435 \u0431\u043e\u043b\u044c\u0448\u0435 \u0440\u0430\u0437\u043c\u0435\u0440\u0430 \u0445\u043e\u043b\u0441\u0442\u0430"}),_=Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)("button",{onClick:function(){e.setBackgroundImg(v.src,v.width,v.height),e.setCanvasSize(v.width,v.height),b(),l()},children:"\u0420\u0430\u0441\u0442\u044f\u043d\u0443\u0442\u044c \u0445\u043e\u043b\u0441\u0442"}),Object(ne.jsx)("button",{onClick:function(){e.setBackgroundImg(v.src,v.width,v.height),b(),l()},children:"\u041e\u0431\u0440\u0435\u0437\u0430\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435"}),Object(ne.jsx)("button",{onClick:b,children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]});return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)("button",{onClick:function(){return i(!0)},className:Ht.a.button,ref:t,children:[Object(ne.jsx)(Ae.a,{icon:e.icon}),Object(ne.jsx)("span",{className:Ht.a.button_text,children:e.label})]}),Object(ne.jsx)(Et,{visible:o,onClose:l,setModal:f,useImg:Gt}),Object(ne.jsx)(zt,{visible:d,title:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0435",content:j,footer:_,onClose:b})]})})),Wt=Object(d.b)((function(e){return{viewModelBgImg:e.viewModel.bgImg}}),(function(e){return{inputBackgroundImg:function(t,n,r){return e(Ee(t,n,r))},setBackgroundImg:function(t,n,r){return e(ge(t,n,r))},setCanvasSize:function(t,n){return e(xe(t,n))}}}),null,{forwardRef:!0})(Yt);var Zt=Object(d.b)((function(e){return{background:e.canvas.background}}),(function(e){return{resetBackground:function(){return e({type:"RESET_BACKGROUND"})},inputBackgroundColor:function(t){return e(function(e){return{type:"INPUT_BACKGROUND_COLOR",color:e}}(t))},setBackgroundColor:function(t){return e(function(e){return{type:"SET_BACKGROUND_COLOR",color:e}}(t))}}}))((function(e){var t=Object(r.useRef)(null),n=Object(r.useRef)(null);return function(e,t,n,c,a,o){Object(r.useEffect)((function(){var r=a.current,c=o.current;function i(){e()}function l(e){var n=e.target;t(n.value)}function u(e){var t=e.target.value;n(t)}return T(r).addEventListener("input",l),T(r).addEventListener("change",u),T(c).addEventListener("click",i),function(){r&&(r.removeEventListener("input",l),r.removeEventListener("change",u)),c&&c.removeEventListener("click",i)}}),[e,t,n,c,a,o]),Object(r.useEffect)((function(){T(a.current).value=c.color?c.color:"#ffffff"}),[a,c])}(e.resetBackground,e.inputBackgroundColor,e.setBackgroundColor,e.background,t,n),Object(ne.jsxs)("div",{className:Ft.a.toolbar,children:[Object(ne.jsx)(Ut,{label:"C \u043a\u043e\u043c\u043f\u044c\u044e\u0442\u0435\u0440\u0430",icon:Ce.e}),Object(ne.jsx)(Wt,{label:"\u0418\u0437 Pixels",icon:Ce.j}),Object(ne.jsxs)("div",{className:Ft.a.row,children:[Object(ne.jsx)("label",{className:Ft.a.label,children:"\u0426\u0432\u0435\u0442 \u0444\u043e\u043d\u0430:"}),Object(ne.jsx)(Rt,{ref:t}),Object(ne.jsx)("button",{ref:n,className:Ft.a.reset,children:Object(ne.jsx)(Ae.a,{icon:Ce.n})})]})]})})),Jt=n(54),qt=n.n(Jt),Vt=n(37),Qt=n.n(Vt),$t=Object(r.forwardRef)((function(e,t){return Object(ne.jsxs)("button",{className:Qt.a.button,ref:t,children:[Object(ne.jsx)(Ae.a,{icon:e.icon}),Object(ne.jsx)("span",{className:Qt.a.buttonText,children:e.label})]})})),en=Object(d.b)(null,null,null,{forwardRef:!0})($t);var tn=Object(d.b)(null,(function(e){return{shiftUpBlock:function(){return e({type:"SHIFT_UP_BLOCK",id:H.getState().selectBlock})},shiftDownBlock:function(){return e({type:"SHIFT_DOWN_BLOCK",id:H.getState().selectBlock})},deleteBlock:function(){return e(ee())}}}))((function(e){var t=Object(r.useRef)(null),n=Object(r.useRef)(null),c=Object(r.useRef)(null);return function(e,t,n,c){Object(r.useEffect)((function(){var r=e.current,a=t.current;function o(e){e.preventDefault(),n()}function i(e){e.preventDefault(),c()}return T(r).addEventListener("click",o),T(a).addEventListener("click",i),function(){r&&r.removeEventListener("click",o),a&&a.removeEventListener("click",i)}}),[e,t,n,c])}(t,n,e.shiftUpBlock,e.shiftDownBlock),function(e,t){Object(r.useEffect)((function(){var n=e.current;function r(){t()}function c(e){"Delete"===e.code&&(e.defaultPrevented||t())}return T(n).addEventListener("click",r),document.addEventListener("keydown",c),function(){n&&n.removeEventListener("click",r),document.removeEventListener("keydown",c)}}),[e,t])}(c,e.deleteBlock),Object(ne.jsxs)("div",{className:qt.a.toolbar,children:[Object(ne.jsx)(en,{ref:t,label:"\u041d\u0430 \u0441\u043b\u043e\u0439 \u0432\u0432\u0435\u0440\u0445",icon:Ce.b}),Object(ne.jsx)(en,{ref:n,label:"\u041d\u0430 \u0441\u043b\u043e\u0439 \u0432\u043d\u0438\u0437",icon:Ce.a}),Object(ne.jsx)(en,{ref:c,label:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",icon:Ce.q})]})})),nn=n(13),rn=n.n(nn);var cn=Object(d.b)((function(e){return{width:e.canvas.width,height:e.canvas.height}}),(function(e){return{inputCanvasSize:function(t,n){return e(function(e,t){return{type:"INPUT_CANVAS_SIZE",width:e,height:t}}(t,n))},setCanvasSize:function(t,n){return e(xe(t,n))},deleteAreaSelection:function(){return e({type:"DELETE_AREA_SELECTION",area:H.getState().viewModel.areaSelection})},resetAreaSelection:function(){return e({type:"RESET_AREA_SELECTION"})}}}))((function(e){var t=Object(r.useRef)(null),n=Object(r.useRef)(null);!function(e,t,n,c,a,o){Object(r.useEffect)((function(){var r=e.current,i=t.current;function l(){if(r&&i){var e=Number(r.value),t=Number(i.value);n(e,t)}}function u(){if(r&&i){var e=Number(r.value),t=Number(i.value);c(e,t)}}return T(r).value=String(a),T(i).value=String(o),T(r).addEventListener("change",l),T(r).addEventListener("blur",u),T(i).addEventListener("change",l),T(i).addEventListener("blur",u),function(){r&&(r.removeEventListener("change",l),r.removeEventListener("blur",u)),i&&(i.removeEventListener("change",l),i.removeEventListener("blur",u))}}),[e,t,n,c,a,o])}(t,n,e.inputCanvasSize,e.setCanvasSize,e.width,e.height);var c=Object(r.useRef)(null);return function(e,t,n){Object(r.useEffect)((function(){var r=e.current;function c(){t(),n()}function a(e){e.preventDefault()}return T(r).addEventListener("click",c),T(r).addEventListener("mousedown",a),function(){r&&r.removeEventListener("click",c),r&&r.removeEventListener("mousedown",a)}}),[e,t,n])}(c,e.deleteAreaSelection,e.resetAreaSelection),Object(ne.jsxs)("div",{className:rn.a.toolbar,children:[Object(ne.jsxs)("div",{className:rn.a.row,children:[Object(ne.jsx)("label",{className:rn.a.label,children:"\u0428\u0438\u0440\u0438\u043d\u0430:"}),Object(ne.jsx)("input",{type:"number",className:rn.a.inputNumber,min:"0",ref:t}),Object(ne.jsx)("span",{className:rn.a.unitsLabel,children:"px"})]}),Object(ne.jsxs)("div",{className:rn.a.row,children:[Object(ne.jsx)("label",{className:rn.a.label,children:"\u0412\u044b\u0441\u043e\u0442\u0430:"}),Object(ne.jsx)("input",{type:"number",className:rn.a.inputNumber,min:"0",ref:n}),Object(ne.jsx)("span",{className:rn.a.unitsLabel,children:"px"})]}),Object(ne.jsx)(en,{ref:c,label:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043e\u0431\u043b\u0430\u0441\u0442\u044c",icon:Ce.f})]})})),an=n(38),on=n.n(an),ln=n(55),un=n.n(ln),sn=n(39),dn=n.n(sn),fn=Object(r.forwardRef)((function(e,t){return Object(ne.jsxs)("button",{onClick:e.onClick?e.onClick:function(){},className:dn.a.button,ref:t,children:[Object(ne.jsx)(Ae.a,{icon:e.icon}),""!==e.label&&Object(ne.jsx)("span",{className:dn.a.button__text,children:e.label})]})})),bn=Object(d.b)(null,null,null,{forwardRef:!0})(fn),vn=n(27),jn=n.n(vn),_n=Object(r.forwardRef)((function(e,t){return Object(ne.jsxs)("button",{className:jn.a.button,children:[Object(ne.jsx)("label",{htmlFor:"input-file",className:jn.a.icon,children:Object(ne.jsx)(Ae.a,{icon:e.icon})}),Object(ne.jsx)("input",{className:jn.a.inputFile,type:"file",accept:".json",ref:t,id:"input-file"}),""!==e.label&&Object(ne.jsx)("label",{className:jn.a.button__text,htmlFor:"input-file",children:e.label})]})})),pn=Object(d.b)(null,null,null,{forwardRef:!0})(_n);function mn(e){return{type:"APPLY_FILE_PROJECT",project:e}}var hn=n(56);var On=Object(d.b)(null,(function(e){return{newCardMaker:function(){return e({type:"NEW_CARD_MAKER"})}}}))((function(e){var t=Object(r.useState)(!1),n=Object(W.a)(t,2),c=n[0],a=n[1],o=function(){return a(!1)},i=Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)("p",{children:"\u041d\u0435\u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0431\u0443\u0434\u0443\u0442 \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u044b"}),Object(ne.jsx)("p",{children:"\u0412\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c ?"})]}),l=Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)("button",{onClick:function(){e.newCardMaker(),o()},children:"\u0414\u0430"}),Object(ne.jsx)("button",{onClick:o,children:"\u041d\u0435\u0442"})]});return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)(bn,{label:"\u041d\u043e\u0432\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442",icon:hn.a,onClick:function(){return a(!0)}}),Object(ne.jsx)(zt,{visible:c,title:"\u041d\u043e\u0432\u0430\u044f \u043e\u0442\u043a\u0440\u044b\u0442\u043a\u0430",content:i,footer:l,onClose:o})]})}));function xn(e){"#"===e.substring(0,1)&&(e=e.substring(1));var t={r:255,g:255,b:255};return t.r=parseInt(e.substring(0,2),16),t.g=parseInt(e.substring(2,4),16),t.b=parseInt(e.substring(4),16),t}function gn(e){return En.apply(this,arguments)}function En(){return(En=Object(it.a)(ot.a.mark((function e(t){var n,r,c,a,o,i,l,u,s,d,f,b,v,j,_,p,m;return ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=H.getState().canvas,r=n.width,c=n.height,a=n.background,o=n.filter,i=n.listBlock,l=n.deleteArea,(u=document.createElement("canvas")).width=r,u.height=c,!(s=u.getContext("2d"))){e.next=50;break}if(!a.src){e.next=22;break}return(d=new Image).crossOrigin="anonymous",d.src=a.src,e.next=18,d.decode();case 18:f=q(d.width,d.height,r,c),s.drawImage(d,0,0,f.width,f.height),e.next=23;break;case 22:a.color&&(s.fillStyle=a.color,s.fillRect(0,0,r,c));case 23:b=Object(jt.a)(i),e.prev=24,b.s();case 26:if((v=b.n()).done){e.next=32;break}return j=v.value,e.next=30,yn(j,s);case 30:e.next=26;break;case 32:e.next=37;break;case 34:e.prev=34,e.t0=e.catch(24),b.e(e.t0);case 37:return e.prev=37,b.f(),e.finish(37);case 40:_=xn(o.color),s.fillStyle="rgba(".concat(_.r,", ").concat(_.g,", ").concat(_.b,", ").concat(o.opacity,")"),s.fillRect(0,0,r,c),s.fillStyle="#ffffff",l.forEach((function(e){s.fillRect(e.x,e.y,e.width,e.height)})),p=u.toDataURL(t),(m=document.createElement("a")).href=p,m.download="new_card",m.click();case 50:case"end":return e.stop()}}),e,null,[[24,34,37,40]])})))).apply(this,arguments)}function yn(e,t){return Tn.apply(this,arguments)}function Tn(){return(Tn=Object(it.a)(ot.a.mark((function e(t,n){return ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.type,e.next=e.t0===h.text?3:e.t0===h.img?5:e.t0===h.artObj?8:11;break;case 3:return wn(t,n),e.abrupt("break",11);case 5:return e.next=7,Sn(t,n);case 7:case 10:return e.abrupt("break",11);case 8:return e.next=10,Ln(t,n);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wn(e,t){var n,r={x:(n=e).x,y:n.y,color:n.color,size:n.size,weight:n.bold?"700":"",italic:n.italic?"italic":"",family:n.fontFamily},c=document.createElement("div");c.innerHTML=e.text;var a,o=0,i=Object(jt.a)(Array.from(c.children));try{for(i.s();!(a=i.n()).done;){var l=a.value;if(t.fillStyle=r.color,t.font="".concat(r.italic," ").concat(r.weight," ").concat(r.size,"px ").concat(r.family),t.fillText(l.innerText,e.x+5,e.y+o+r.size),e.underline){for(var u=t.measureText(l.innerText).width,s=0,d="";l.innerText.length>s;)d+="__",s++;t.font="700 ".concat(r.size,"px openSans"),t.fillText(d,e.x+5,e.y+o+r.size,u)}o+=1.2*e.size}}catch(f){i.e(f)}finally{i.f()}}function Sn(e,t){return kn.apply(this,arguments)}function kn(){return(kn=Object(it.a)(ot.a.mark((function e(t,n){var r;return ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new Image).crossOrigin="anonymous",r.src=t.src,e.next=5,r.decode();case 5:n.drawImage(r,t.x,t.y,t.width,t.height);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ln(e,t){return Nn.apply(this,arguments)}function Nn(){return(Nn=Object(it.a)(ot.a.mark((function e(t,n){var r;return ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new Image).crossOrigin="anonymous",r.src=t.src,e.next=5,r.decode();case 5:n.drawImage(r,t.x,t.y,t.width,t.height);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Bn=Object(d.b)()((function(){var e=Object(r.useRef)(null),t=Object(r.useState)(!1),n=Object(W.a)(t,2),c=n[0],a=n[1],o=function(){return a(!1)},i=Object(ne.jsx)("p",{children:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0444\u043e\u0440\u043c\u0430\u0442 \u0441\u043e\u0445\u0440\u0430\u043d\u044f\u0435\u043c\u043e\u0433\u043e \u0444\u0430\u0439\u043b\u0430"}),l=Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)("button",{onClick:function(){gn("image/jpeg"),o()},children:"jpg"}),Object(ne.jsx)("button",{onClick:function(){gn("image/png"),o()},children:"png"}),Object(ne.jsx)("button",{onClick:o,children:"\u041e\u0442\u043c\u0435\u043d\u0430"})]});return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)(bn,{label:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043a\u0430\u043a jpg/png",icon:Ce.k,onClick:function(){return a(!0)},ref:e}),Object(ne.jsx)(zt,{visible:c,title:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043a\u0430\u043a...",content:i,footer:l,onClose:o})]})})),Cn=n(40),Rn=n.n(Cn);var In=Object(d.b)(null,(function(e){return{applyFileProject:function(t){return e(mn(t))}}}))((function(e){var t=Object(r.useState)(!1),n=Object(W.a)(t,2),c=n[0],a=n[1],o=function(){return a(!1)},i=function(){var t=Object(it.a)(ot.a.mark((function t(){var n;return ot.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch(e.srcJson);case 2:return n=t.sent,t.t0=e,t.next=6,n.json();case 6:t.t1=t.sent,t.t0.applyFileProject.call(t.t0,t.t1),o();case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),l=Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)("p",{children:"\u041d\u0435\u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u043d\u044b\u0435 \u0438\u0437\u043c\u0435\u043d\u0435\u043d\u0438\u044f \u0431\u0443\u0434\u0443\u0442 \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u044b"}),Object(ne.jsx)("p",{children:"\u0412\u044b \u0445\u043e\u0442\u0438\u0442\u0435 \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c ?"})]}),u=Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)("button",{onClick:i,children:"\u0414\u0430"}),Object(ne.jsx)("button",{onClick:o,children:"\u041d\u0435\u0442"})]}),s=Object(r.useRef)(null);return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsxs)("div",{className:Rn.a.preview,onClick:function(){return a(!0)},children:[Object(ne.jsx)("img",{src:e.srcImg,alt:"",ref:s,className:Rn.a.img}),Object(ne.jsx)("p",{children:e.name})]}),Object(ne.jsx)(zt,{visible:c,title:"\u041f\u0440\u0438\u043c\u0435\u043d\u0435\u043d\u0438\u0435 \u0448\u0430\u0431\u043b\u043e\u043d\u0430",content:l,footer:u,onClose:o})]})}));var An=Object(d.b)(null,(function(e){return{undo:function(){return e({type:"UNDO"})},redo:function(){return e({type:"REDO"})},applyFileProject:function(t){return e(mn(t))}}}))((function(e){var t=Object(r.useRef)(null),n=Object(r.useRef)(null);!function(e,t,n,c){Object(r.useEffect)((function(){var r=e.current,a=t.current;function o(){n()}function i(){c()}function l(e){"KeyZ"===e.code&&(e.ctrlKey||e.metaKey)&&n(),"KeyY"===e.code&&(e.ctrlKey||e.metaKey)&&c()}return T(r).addEventListener("click",o),T(a).addEventListener("click",i),document.addEventListener("keydown",l),function(){r&&r.removeEventListener("click",o),a&&a.removeEventListener("click",i),document.removeEventListener("keydown",l)}}),[e,t,n,c])}(t,n,e.undo,e.redo);var c,a=Object(r.useRef)(null),o=Object(r.useRef)(null);!function(e,t){Object(r.useEffect)((function(){var n=e.current;function r(){return c.apply(this,arguments)}function c(){return(c=Object(it.a)(ot.a.mark((function e(){var r;return ot.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=15;break}if(r=n.files,e.prev=2,!r){e.next=9;break}return e.t0=t,e.next=7,ut(r[0]);case 7:e.t1=e.sent,(0,e.t0)(e.t1);case 9:e.next=14;break;case 11:e.prev=11,e.t2=e.catch(2),alert("\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0438\u043c\u043f\u043e\u0440\u0442\u0435 \u043f\u0440\u043e\u0435\u043a\u0442\u0430. \u041f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u0438\u0441\u0445\u043e\u0434\u043d\u044b\u0439 \u0444\u0430\u0438\u043b \u0438 \u043f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u043e\u043f\u044b\u0442\u043a\u0443");case 14:n.value="";case 15:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}return T(n).addEventListener("change",r),function(){n&&n.removeEventListener("change",r)}}),[e,t])}(a,e.applyFileProject),c=o,Object(r.useEffect)((function(){var e=c.current;function t(){var e=H.getState(),t=JSON.stringify(Object(v.a)(Object(v.a)({},e),{},{selectBlock:null,history:{listState:[e.canvas],currentIndex:0}})),n=new Blob([t],{type:"application/json"}),r=document.createElement("a");r.href=URL.createObjectURL(n),r.download="\u041d\u043e\u0432\u044b\u0439 \u043f\u0440\u043e\u0435\u043a\u0442.json",r.click()}return T(e).addEventListener("click",t),function(){e&&e.removeEventListener("click",t)}}),[c]);var i=Object.values(g),l=[];return i.forEach((function(e,t){l.push(Object(ne.jsx)(In,{name:e.name,srcImg:e.preview,srcJson:e.json},t))})),Object(ne.jsx)(ne.Fragment,{children:Object(ne.jsxs)("nav",{className:un.a.navbar,children:[Object(ne.jsx)(On,{}),Object(ne.jsx)(pn,{label:"\u041e\u0442\u043a\u0440\u044b\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442",icon:Ce.h,ref:a}),Object(ne.jsx)(bn,{label:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u043f\u0440\u043e\u0435\u043a\u0442",icon:Ce.g,ref:o,onClick:null}),Object(ne.jsx)(Bn,{}),Object(ne.jsx)("div",{children:Object(ne.jsx)(Ve,{minWidth:450,label:"\u0428\u0430\u0431\u043b\u043e\u043d\u044b",icon:Ce.d,children:l})}),Object(ne.jsx)(bn,{label:"",icon:Ce.s,ref:t,onClick:null}),Object(ne.jsx)(bn,{label:"",icon:Ce.m,ref:n,onClick:null})]})})}));var Fn=Object(d.b)()((function(){return Object(ne.jsxs)("header",{className:on.a.header,children:[Object(ne.jsx)("div",{className:on.a.mainLabel,children:"Card Maker"}),Object(ne.jsx)(An,{})]})}));var Dn=Object(d.b)()((function(){return Object(ne.jsxs)("div",{className:Le.a.toolbar,children:[Object(ne.jsx)(Fn,{}),Object(ne.jsx)("label",{children:"\u0422\u0435\u043a\u0441\u0442"}),Object(ne.jsx)(Ye,{}),Object(ne.jsx)("label",{children:"\u0418\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f"}),Object(ne.jsx)(St,{}),Object(ne.jsx)("label",{children:"\u0424\u043e\u043d"}),Object(ne.jsx)(Zt,{}),Object(ne.jsx)("label",{children:"\u0424\u0438\u043b\u044c\u0442\u0440"}),Object(ne.jsx)(It,{}),Object(ne.jsx)("label",{children:"\u041e\u0431\u044a\u0435\u043a\u0442\u044b"}),Object(ne.jsx)(tn,{}),Object(ne.jsx)("label",{children:"\u0425\u043e\u043b\u0441\u0442"}),Object(ne.jsx)(cn,{})]})}));var Mn=Object(d.b)()((function(){return Object(ne.jsxs)(ne.Fragment,{children:[Object(ne.jsx)("main",{className:l.a.main,children:Object(ne.jsx)(Se,{})}),Object(ne.jsx)(Dn,{})]})}));window.addEventListener("beforeunload",(function(e){return e.returnValue=!1})),o.a.render(Object(ne.jsx)(c.a.StrictMode,{children:Object(ne.jsx)(d.a,{store:H,children:Object(ne.jsx)(Mn,{})})}),document.getElementById("root"))}],[[72,1,2]]]);
//# sourceMappingURL=main.c68bd0cf.chunk.js.map